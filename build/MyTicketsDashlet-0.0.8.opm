<?xml version="1.0" encoding="utf-8" ?>
<otrs_package version="1.1">
    <Name>MyTicketsDashlet</Name>
    <Version>0.0.8</Version>
    <Vendor>MAWOH GmbH</Vendor>
    <URL>http://www.mawoh.de/</URL>
    <License>GNU AFFERO GENERAL PUBLIC LICENSE Version 3, November 2007</License>
    <ChangeLog Date="2014-02-17 22:00:00" Version="0.0.3">First release.</ChangeLog>
    <ChangeLog Date="2014-03-18 14:20:00" Version="0.0.4">add translations, fix default settings in sysconfig xml</ChangeLog>
    <ChangeLog Date="2014-03-18 15:00:00" Version="0.0.5">add missing translation file</ChangeLog>
    <ChangeLog Date="2014-04-03 16:40:00" Version="0.0.6">add tabs for reminder and pending tickets</ChangeLog>
    <ChangeLog Date="2014-04-03 16:40:00" Version="0.0.7">increase column width</ChangeLog>
    <ChangeLog Date="2015-03-12 16:00:00" Version="0.0.8">fix search filter and README</ChangeLog>
    <Description Lang="en">MyTicketsDashlet provides a dashboard widget that shows all tickets of an agent..</Description>
    <Description Lang="de">MyTicketsDashlet stellt ein Dashboard Widget zur Verf&amp;uuml;gung, welches alle Tickets des angemeldeten Agenten anzeigt.</Description>
    <Framework>3.3.x</Framework>
    <IntroInstall Lang="en" Title="Install Information" Type="pre">

        &lt;br/&gt;
        &lt;strong&gt;WELCOME&lt;/strong&gt;
        &lt;br/&gt;
        &lt;br/&gt;
        You are about to INSTALL the MyTicketsDashlet OTRS module.&lt;br/&gt;
        &lt;br/&gt;
        &lt;br/&gt;
        &lt;br/&gt;
        MAWOH - secure your company&lt;br/&gt;
        &lt;br/&gt;
    </IntroInstall>
    <IntroInstall Lang="en" Title="Install Information" Type="pre">

        &lt;br/&gt;
        &lt;strong&gt;Willkommen&lt;/strong&gt;
        &lt;br/&gt;
        &lt;br/&gt;
        Sie sind im Begriff das OTRS-Paket MyTicketsDashlet zu installieren.&lt;br/&gt;
        &lt;br/&gt;
        &lt;br/&gt;
        &lt;br/&gt;
        MAWOH - secure your company&lt;br/&gt;
        &lt;br/&gt;
    </IntroInstall>
    <IntroInstall Lang="en" Title="Install Information" Type="post">

        &lt;br/&gt;
        &lt;strong&gt;WELCOME&lt;/strong&gt;
        &lt;br/&gt;
        &lt;br/&gt;
        Thank you for choosing the MyTicketsDashlet module.
        &lt;br/&gt;
        &lt;br/&gt;
        &lt;br/&gt;
        MAWOH - secure your company&lt;br/&gt;
        &lt;br/&gt;
    </IntroInstall>
    <IntroInstall Lang="en" Title="Install Information" Type="post">

        &lt;br/&gt;
        &lt;strong&gt;Willkommen&lt;/strong&gt;
        &lt;br/&gt;
        &lt;br/&gt;
        Vielen Dank fuer die Auswahl des MyTicketsDashlet Modules.
        &lt;br/&gt;
        &lt;br/&gt;
        &lt;br/&gt;
        MAWOH - secure your company&lt;br/&gt;
        &lt;br/&gt;
    </IntroInstall>
    <IntroUninstall Lang="en" Title="Uninstall Information" Type="pre">

        &lt;br/&gt;
        &lt;strong&gt;WELCOME&lt;/strong&gt;
        &lt;br/&gt;
        &lt;br/&gt;
        You are about to UNINSTALL the MyTicketsDashlet OTRS module.&lt;br/&gt;
        &lt;br/&gt;
        &lt;br/&gt;
        &lt;br/&gt;
        MAWOH - secure your company&lt;br/&gt;
        &lt;br/&gt;
    </IntroUninstall>
    <IntroUninstall Lang="en" Title="Uninstall Information" Type="pre">

        &lt;br/&gt;
        &lt;strong&gt;Willkommen&lt;/strong&gt;
        &lt;br/&gt;
        &lt;br/&gt;
        Sie sind im Begriff das OTRS-Paket MyTicketsDashlet zu aktualisieren.&lt;br/&gt;
        &lt;br/&gt;
        &lt;br/&gt;
        &lt;br/&gt;
        MAWOH - secure your company&lt;br/&gt;
        &lt;br/&gt;
    </IntroUninstall>
    <IntroUninstall Lang="en" Title="Uninstall Information" Type="post">

        &lt;br/&gt;
        &lt;strong&gt;WELCOME&lt;/strong&gt;
        &lt;br/&gt;
        &lt;br/&gt;
        Thank you for choosing the MyTicketsDashlet module.
        &lt;br/&gt;
        &lt;br/&gt;
        &lt;br/&gt;
        MAWOH - secure your company&lt;br/&gt;
        &lt;br/&gt;
    </IntroUninstall>
    <IntroUninstall Lang="en" Title="Uninstall Information" Type="post">

        &lt;br/&gt;
        &lt;strong&gt;Willkommen&lt;/strong&gt;
        &lt;br/&gt;
        &lt;br/&gt;
        Vielen Dank fuer die Auswahl des MyTicketsDashlet Modules.
        &lt;br/&gt;
        &lt;br/&gt;
        &lt;br/&gt;
        MAWOH - secure your company&lt;br/&gt;
        &lt;br/&gt;
    </IntroUninstall>
    <IntroUpgrade Lang="en" Title="Upgrade Information" Type="pre">

        &lt;br/&gt;
        &lt;strong&gt;WELCOME&lt;/strong&gt;
        &lt;br/&gt;
        &lt;br/&gt;
        You are about to UPGRADE the MyTicketsDashlet OTRS module.&lt;br/&gt;
        &lt;br/&gt;
        &lt;br/&gt;
        &lt;br/&gt;
        MAWOH - secure your company&lt;br/&gt;
        &lt;br/&gt;
    </IntroUpgrade>
    <IntroUpgrade Lang="en" Title="Upgrade Information" Type="pre">

        &lt;br/&gt;
        &lt;strong&gt;Willkommen&lt;/strong&gt;
        &lt;br/&gt;
        &lt;br/&gt;
        Sie sind im Begriff das OTRS-Paket MyTicketsDashlet zu deinstallieren.&lt;br/&gt;
        &lt;br/&gt;
        &lt;br/&gt;
        &lt;br/&gt;
        MAWOH - secure your company&lt;br/&gt;
        &lt;br/&gt;
    </IntroUpgrade>
    <IntroUpgrade Lang="en" Title="Upgrade Information" Type="post">

        &lt;br/&gt;
        &lt;strong&gt;WELCOME&lt;/strong&gt;
        &lt;br/&gt;
        &lt;br/&gt;
        Thank you for choosing the MyTicketsDashlet module.
        &lt;br/&gt;
        &lt;br/&gt;
        &lt;br/&gt;
        MAWOH - secure your company&lt;br/&gt;
        &lt;br/&gt;
    </IntroUpgrade>
    <IntroUpgrade Lang="en" Title="Upgrade Information" Type="post">

        &lt;br/&gt;
        &lt;strong&gt;Willkommen&lt;/strong&gt;
        &lt;br/&gt;
        &lt;br/&gt;
        Vielen Dank fuer die Auswahl des MyTicketsDashlet Modules.
        &lt;br/&gt;
        &lt;br/&gt;
        &lt;br/&gt;
        MAWOH - secure your company&lt;br/&gt;
        &lt;br/&gt;
    </IntroUpgrade>
    <BuildDate>2015-03-13 16:20:23</BuildDate>
    <BuildHost>itsm-dev.int.mawoh.de</BuildHost>
    <Filelist>
        <File Location="Kernel/Config/Files/MyTicketsDashlet.xml" Permission="644" Encode="Base64">PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPG90cnNfY29uZmlnIHZlcnNpb249IjEuMCIgaW5pdD0iQXBwbGljYXRpb24iPgogICAgPENvbmZpZ0l0ZW0gTmFtZT0iRGFzaGJvYXJkQmFja2VuZCMjIzAwOTAtTXlUaWNrZXRzRGFzaGxldCIgUmVxdWlyZWQ9IjAiIFZhbGlkPSIxIj4KICAgICAgICA8RGVzY3JpcHRpb24gVHJhbnNsYXRhYmxlPSIxIj5QYXJhbWV0ZXJzIGZvciB0aGUgZGFzaGJvYXJkIGJhY2tlbmQgb2YgdGhlICJNeSBvcGVuIFRpY2tldCIgb3ZlcnZpZXcgb2YgdGhlIGFnZW50IGludGVyZmFjZS4gIkxpbWl0IiBpcyB0aGUgbnVtYmVyIG9mIGVudHJpZXMgc2hvd24gYnkgZGVmYXVsdC4gIkdyb3VwIiBpcyB1c2VkIHRvIHJlc3RyaWN0IHRoZSBhY2Nlc3MgdG8gdGhlIHBsdWdpbiAoZS4gZy4gR3JvdXA6IGFkbWluO2dyb3VwMTtncm91cDI7KS4gIkRlZmF1bHQiIGRldGVybWluZXMgaWYgdGhlIHBsdWdpbiBpcyBlbmFibGVkIGJ5IGRlZmF1bHQgb3IgaWYgdGhlIHVzZXIgbmVlZHMgdG8gZW5hYmxlIGl0IG1hbnVhbGx5LiAiQ2FjaGVUVExMb2NhbCIgaXMgdGhlIGNhY2hlIHRpbWUgaW4gbWludXRlcyBmb3IgdGhlIHBsdWdpbi48L0Rlc2NyaXB0aW9uPgogICAgICAgIDxHcm91cD5UaWNrZXQ8L0dyb3VwPgogICAgICAgIDxTdWJHcm91cD5Gcm9udGVuZDo6QWdlbnQ6OkRhc2hib2FyZDwvU3ViR3JvdXA+CiAgICAgICAgPFNldHRpbmc+CiAgICAgICAgICAgIDxIYXNoPgogICAgICAgICAgICAgICAgPEl0ZW0gS2V5PSJNb2R1bGUiPktlcm5lbDo6T3V0cHV0OjpIVE1MOjpEYXNoYm9hcmRUaWNrZXRNeVRpY2tldHNEYXNobGV0PC9JdGVtPgogICAgICAgICAgICAgICAgPEl0ZW0gS2V5PSJUaXRsZSI+TXkgVGlja2V0czwvSXRlbT4KICAgICAgICAgICAgICAgIDxJdGVtIEtleT0iRGVzY3JpcHRpb24iPkFsbCBteSB0aWNrZXRzPC9JdGVtPgogICAgICAgICAgICAgICAgPEl0ZW0gS2V5PSJBdHRyaWJ1dGVzIj48L0l0ZW0+CiAgICAgICAgICAgICAgICA8SXRlbSBLZXk9IkZpbHRlciI+T3BlbjwvSXRlbT4KICAgICAgICAgICAgICAgIDxJdGVtIEtleT0iVGltZSI+QWdlPC9JdGVtPgogICAgICAgICAgICAgICAgPEl0ZW0gS2V5PSJMaW1pdCI+MjU8L0l0ZW0+CiAgICAgICAgICAgICAgICA8SXRlbSBLZXk9IlBlcm1pc3Npb24iPnJ3PC9JdGVtPgogICAgICAgICAgICAgICAgPEl0ZW0gS2V5PSJCbG9jayI+Q29udGVudExhcmdlPC9JdGVtPgogICAgICAgICAgICAgICAgPEl0ZW0gS2V5PSJHcm91cCI+PC9JdGVtPgogICAgICAgICAgICAgICAgPEl0ZW0gS2V5PSJEZWZhdWx0Ij4xPC9JdGVtPgogICAgICAgICAgICAgICAgPEl0ZW0gS2V5PSJDYWNoZVRUTExvY2FsIj4wLjU8L0l0ZW0+CiAgICAgICAgICAgICAgICA8SXRlbSBLZXk9IkRlZmF1bHRDb2x1bW5zIj4KICAgICAgICAgICAgICAgICAgICA8SGFzaD4KICAgICAgICAgICAgICAgICAgICAgICAgPEl0ZW0gS2V5PSJBZ2UiPjI8L0l0ZW0+CiAgICAgICAgICAgICAgICAgICAgICAgIDxJdGVtIEtleT0iQ2hhbmdlZCI+MTwvSXRlbT4KICAgICAgICAgICAgICAgICAgICAgICAgPEl0ZW0gS2V5PSJDdXN0b21lcklEIj4xPC9JdGVtPgogICAgICAgICAgICAgICAgICAgICAgICA8SXRlbSBLZXk9IkN1c3RvbWVyTmFtZSI+MTwvSXRlbT4KICAgICAgICAgICAgICAgICAgICAgICAgPEl0ZW0gS2V5PSJDdXN0b21lclVzZXJJRCI+MTwvSXRlbT4KICAgICAgICAgICAgICAgICAgICAgICAgPEl0ZW0gS2V5PSJFc2NhbGF0aW9uUmVzcG9uc2VUaW1lIj4xPC9JdGVtPgogICAgICAgICAgICAgICAgICAgICAgICA8SXRlbSBLZXk9IkVzY2FsYXRpb25Tb2x1dGlvblRpbWUiPjE8L0l0ZW0+CiAgICAgICAgICAgICAgICAgICAgICAgIDxJdGVtIEtleT0iRXNjYWxhdGlvblRpbWUiPjE8L0l0ZW0+CiAgICAgICAgICAgICAgICAgICAgICAgIDxJdGVtIEtleT0iRXNjYWxhdGlvblVwZGF0ZVRpbWUiPjE8L0l0ZW0+CiAgICAgICAgICAgICAgICAgICAgICAgIDxJdGVtIEtleT0iVGlja2V0TnVtYmVyIj4yPC9JdGVtPgogICAgICAgICAgICAgICAgICAgICAgICA8SXRlbSBLZXk9IkxvY2siPjE8L0l0ZW0+CiAgICAgICAgICAgICAgICAgICAgICAgIDxJdGVtIEtleT0iT3duZXIiPjE8L0l0ZW0+CiAgICAgICAgICAgICAgICAgICAgICAgIDxJdGVtIEtleT0iUGVuZGluZ1RpbWUiPjE8L0l0ZW0+CiAgICAgICAgICAgICAgICAgICAgICAgIDxJdGVtIEtleT0iUXVldWUiPjI8L0l0ZW0+CiAgICAgICAgICAgICAgICAgICAgICAgIDxJdGVtIEtleT0iUmVzcG9uc2libGUiPjE8L0l0ZW0+CiAgICAgICAgICAgICAgICAgICAgICAgIDxJdGVtIEtleT0iUHJpb3JpdHkiPjE8L0l0ZW0+CiAgICAgICAgICAgICAgICAgICAgICAgIDxJdGVtIEtleT0iU2VydmljZSI+MTwvSXRlbT4KICAgICAgICAgICAgICAgICAgICAgICAgPEl0ZW0gS2V5PSJTdGF0ZSI+MTwvSXRlbT4KICAgICAgICAgICAgICAgICAgICAgICAgPEl0ZW0gS2V5PSJTTEEiPjE8L0l0ZW0+CiAgICAgICAgICAgICAgICAgICAgICAgIDxJdGVtIEtleT0iVGl0bGUiPjI8L0l0ZW0+CiAgICAgICAgICAgICAgICAgICAgICAgIDxJdGVtIEtleT0iVHlwZSI+MTwvSXRlbT4KICAgICAgICAgICAgICAgICAgICA8L0hhc2g+CiAgICAgICAgICAgICAgICA8L0l0ZW0+CiAgICAgICAgICAgIDwvSGFzaD4KICAgICAgICA8L1NldHRpbmc+CiAgICA8L0NvbmZpZ0l0ZW0+Cjwvb3Ryc19jb25maWc+Cgo=</File>
        <File Location="Kernel/Language/de_MyTicketsDashlet.pm" Permission="644" Encode="Base64">IyAtLQojIEtlcm5lbC9MYW5ndWFnZS9kZV9NeVRpY2tldHNEYXNobGV0LnBtIC0gdHJhbnNsYXRpb24gZmlsZQojIC0tCiMgVGhpcyBzb2Z0d2FyZSBjb21lcyB3aXRoIEFCU09MVVRFTFkgTk8gV0FSUkFOVFkuIEZvciBkZXRhaWxzLCBzZWUKIyB0aGUgZW5jbG9zZWQgZmlsZSBDT1BZSU5HIGZvciBsaWNlbnNlIGluZm9ybWF0aW9uIChBR1BMKS4gSWYgeW91CiMgZGlkIG5vdCByZWNlaXZlIHRoaXMgZmlsZSwgc2VlIGh0dHA6Ly93d3cuZ251Lm9yZy9saWNlbnNlcy9hZ3BsLnR4dC4KIyAtLQoKcGFja2FnZSBLZXJuZWw6Okxhbmd1YWdlOjpkZV9NeVRpY2tldHNEYXNobGV0OwoKdXNlIHN0cmljdDsKdXNlIHdhcm5pbmdzOwoKc3ViIERhdGEgewogICAgbXkgJFNlbGYgPSBzaGlmdDsKCiAgICAjIFRlbXBsYXRlOiBBQUFJVFNNQ29uZmlnSXRlbQogICAgJFNlbGYtPntUcmFuc2xhdGlvbn0tPnsnTXkgVGlja2V0cyd9ID0gJ01laW5lIFRpY2tldHMnOwogICAgJFNlbGYtPntUcmFuc2xhdGlvbn0tPnsnT3BlbiB0aWNrZXRzJ30gPSAnb2ZmZW5lbiBUaWNrZXRzJzsKICAgICRTZWxmLT57VHJhbnNsYXRpb259LT57J1JlbWluZGVyIHRpY2tldHMnfSA9ICdFcmlubmVydW5nc3RpY2tldHMnOwogICAgJFNlbGYtPntUcmFuc2xhdGlvbn0tPnsnUGVuZGluZyB0aWNrZXRzJ30gPSAnV2FydGVudGlja2V0cyc7Cgp9CgoxOwoK</File>
        <File Location="Kernel/Output/HTML/DashboardTicketMyTicketsDashlet.pm" Permission="644" Encode="Base64">IyAtLQojIEtlcm5lbC9PdXRwdXQvSFRNTC9EYXNoYm9hcmRUaWNrZXRNeVRpY2tldHNEYXNobGV0LnBtCiMgLS0KIyBUaGlzIHNvZnR3YXJlIGNvbWVzIHdpdGggQUJTT0xVVEVMWSBOTyBXQVJSQU5UWS4gRm9yIGRldGFpbHMsIHNlZQojIHRoZSBlbmNsb3NlZCBmaWxlIENPUFlJTkcgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24gKEFHUEwpLiBJZiB5b3UKIyBkaWQgbm90IHJlY2VpdmUgdGhpcyBmaWxlLCBzZWUgaHR0cDovL3d3dy5nbnUub3JnL2xpY2Vuc2VzL2FncGwudHh0LgojIC0tCgpwYWNrYWdlIEtlcm5lbDo6T3V0cHV0OjpIVE1MOjpEYXNoYm9hcmRUaWNrZXRNeVRpY2tldHNEYXNobGV0OwoKdXNlIHN0cmljdDsKdXNlIHdhcm5pbmdzOwoKdXNlIEtlcm5lbDo6U3lzdGVtOjpKU09OOwp1c2UgS2VybmVsOjpTeXN0ZW06OlRpY2tldDo6Q29sdW1uRmlsdGVyOwp1c2UgS2VybmVsOjpTeXN0ZW06OkN1c3RvbWVyVXNlcjsKdXNlIEtlcm5lbDo6U3lzdGVtOjpEeW5hbWljRmllbGQ7CnVzZSBLZXJuZWw6OlN5c3RlbTo6RHluYW1pY0ZpZWxkOjpCYWNrZW5kOwp1c2UgS2VybmVsOjpTeXN0ZW06OlZhcmlhYmxlQ2hlY2sgcXcoOmFsbCk7CgpzdWIgbmV3IHsKICAgIG15ICggJFR5cGUsICVQYXJhbSApID0gQF87CgogICAgIyBhbGxvY2F0ZSBuZXcgaGFzaCBmb3Igb2JqZWN0CiAgICBteSAkU2VsZiA9IHslUGFyYW19OwogICAgYmxlc3MoICRTZWxmLCAkVHlwZSApOwoKICAgICMgZ2V0IG5lZWRlZCBvYmplY3RzCiAgICBmb3IgbXkgJEl0ZW0gKAogICAgICAgIHF3KENvbmZpZyBOYW1lIENvbmZpZ09iamVjdCBMb2dPYmplY3QgREJPYmplY3QgTGF5b3V0T2JqZWN0IFBhcmFtT2JqZWN0IFRpY2tldE9iamVjdCBVc2VySUQpCiAgICAgICAgKQogICAgewogICAgICAgIGRpZSAiR290IG5vICRJdGVtISIgaWYgKCAhJFNlbGYtPnskSXRlbX0gKTsKICAgIH0KCiAgICAjIGNyZWF0ZSBhZGRpdGlvbmFsIG9iamVjdHMKICAgICRTZWxmLT57SlNPTk9iamVjdH0gICAgICAgICA9IEtlcm5lbDo6U3lzdGVtOjpKU09OLT5uZXcoICV7JFNlbGZ9ICk7CiAgICAkU2VsZi0+e0NvbHVtbkZpbHRlck9iamVjdH0gPSBLZXJuZWw6OlN5c3RlbTo6VGlja2V0OjpDb2x1bW5GaWx0ZXItPm5ldyglUGFyYW0pOwogICAgJFNlbGYtPntEeW5hbWljRmllbGRPYmplY3R9ID0gS2VybmVsOjpTeXN0ZW06OkR5bmFtaWNGaWVsZC0+bmV3KCVQYXJhbSk7CiAgICAkU2VsZi0+e0JhY2tlbmRPYmplY3R9ICAgICAgPSBLZXJuZWw6OlN5c3RlbTo6RHluYW1pY0ZpZWxkOjpCYWNrZW5kLT5uZXcoJVBhcmFtKTsKICAgICRTZWxmLT57Q3VzdG9tZXJVc2VyT2JqZWN0fSA9IEtlcm5lbDo6U3lzdGVtOjpDdXN0b21lclVzZXItPm5ldyglUGFyYW0pOwoKICAgIG15ICRSZW1vdmVGaWx0ZXJzCiAgICAgICAgPSAkU2VsZi0+e1BhcmFtT2JqZWN0fS0+R2V0UGFyYW0oIFBhcmFtID0+ICdSZW1vdmVGaWx0ZXJzJyApCiAgICAgICAgfHwgJFBhcmFte1JlbW92ZUZpbHRlcnN9CiAgICAgICAgfHwgMDsKCiAgICAjIGdldCBzb3J0aW5nIHBhcmFtcwogICAgZm9yIG15ICRJdGVtIChxdyhTb3J0QnkgT3JkZXJCeSkpIHsKICAgICAgICAkU2VsZi0+eyRJdGVtfSA9ICRTZWxmLT57UGFyYW1PYmplY3R9LT5HZXRQYXJhbSggUGFyYW0gPT4gJEl0ZW0gKSB8fCAkUGFyYW17JEl0ZW19OwogICAgfQoKICAgICMgc2V0IGZpbHRlciBzZXR0aW5ncwogICAgZm9yIG15ICRJdGVtIChxdyhDb2x1bW5GaWx0ZXIgR2V0Q29sdW1uRmlsdGVyIEdldENvbHVtbkZpbHRlclNlbGVjdCkpIHsKICAgICAgICAkU2VsZi0+eyRJdGVtfSA9ICRQYXJhbXskSXRlbX07CiAgICB9CgogICAgIyBzYXZlIGNvbHVtbiBmaWx0ZXJzCiAgICAkU2VsZi0+e1ByZWZLZXlDb2x1bW5GaWx0ZXJzfSA9ICdVc2VyRGFzaGJvYXJkVGlja2V0TXlUaWNrZXRzQ29sdW1uRmlsdGVycycgLiAkU2VsZi0+e05hbWV9OwogICAgJFNlbGYtPntQcmVmS2V5Q29sdW1uRmlsdGVyc1JlYWxLZXlzfQogICAgICAgID0gJ1VzZXJEYXNoYm9hcmRUaWNrZXRNeVRpY2tldHNDb2x1bW5GaWx0ZXJzUmVhbEtleXMnIC4gJFNlbGYtPntOYW1lfTsKCiAgICBpZiAoJFJlbW92ZUZpbHRlcnMpIHsKICAgICAgICAkU2VsZi0+e1VzZXJPYmplY3R9LT5TZXRQcmVmZXJlbmNlcygKICAgICAgICAgICAgVXNlcklEID0+ICRTZWxmLT57VXNlcklEfSwKICAgICAgICAgICAgS2V5ICAgID0+ICRTZWxmLT57UHJlZktleUNvbHVtbkZpbHRlcnN9LAogICAgICAgICAgICBWYWx1ZSAgPT4gJycsCiAgICAgICAgKTsKICAgICAgICAkU2VsZi0+e1VzZXJPYmplY3R9LT5TZXRQcmVmZXJlbmNlcygKICAgICAgICAgICAgVXNlcklEID0+ICRTZWxmLT57VXNlcklEfSwKICAgICAgICAgICAgS2V5ICAgID0+ICRTZWxmLT57UHJlZktleUNvbHVtbkZpbHRlcnNSZWFsS2V5c30sCiAgICAgICAgICAgIFZhbHVlICA9PiAnJywKICAgICAgICApOwogICAgfQoKICAgICMganVzdCBpbiBjYXNlIG5ldyBmaWx0ZXIgdmFsdWVzIGFycml2ZQogICAgZWxzaWYgKAogICAgICAgIElzSGFzaFJlZldpdGhEYXRhKCAkU2VsZi0+e0dldENvbHVtbkZpbHRlcn0gKQogICAgICAgICYmIElzSGFzaFJlZldpdGhEYXRhKCAkU2VsZi0+e0dldENvbHVtbkZpbHRlclNlbGVjdH0gKQogICAgICAgICYmIElzSGFzaFJlZldpdGhEYXRhKCAkU2VsZi0+e0NvbHVtbkZpbHRlcn0gKQogICAgICAgICkKICAgIHsKCiAgICAgICAgaWYgKCAhJFNlbGYtPntDb25maWdPYmplY3R9LT5HZXQoJ0RlbW9TeXN0ZW0nKSApIHsKCiAgICAgICAgICAgICMgY2hlY2sgaWYgdGhlIHVzZXIgaGFzIGZpbHRlciBwcmVmZXJlbmNlcyBmb3IgdGhpcyB3aWRnZXQKICAgICAgICAgICAgbXkgJVByZWZlcmVuY2VzID0gJFNlbGYtPntVc2VyT2JqZWN0fS0+R2V0UHJlZmVyZW5jZXMoCiAgICAgICAgICAgICAgICBVc2VySUQgPT4gJFNlbGYtPntVc2VySUR9LAogICAgICAgICAgICApOwogICAgICAgICAgICBteSAkQ29sdW1uUHJlZlZhbHVlczsKICAgICAgICAgICAgaWYgKCAkUHJlZmVyZW5jZXN7ICRTZWxmLT57UHJlZktleUNvbHVtbkZpbHRlcnN9IH0gKSB7CiAgICAgICAgICAgICAgICAkQ29sdW1uUHJlZlZhbHVlcyA9ICRTZWxmLT57SlNPTk9iamVjdH0tPkRlY29kZSgKICAgICAgICAgICAgICAgICAgICBEYXRhID0+ICRQcmVmZXJlbmNlc3sgJFNlbGYtPntQcmVmS2V5Q29sdW1uRmlsdGVyc30gfSwKICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIFBSRUZWQUxVRVM6CiAgICAgICAgICAgIGZvciBteSAkQ29sdW1uICggc29ydCBrZXlzICV7ICRTZWxmLT57R2V0Q29sdW1uRmlsdGVyU2VsZWN0fSB9ICkgewogICAgICAgICAgICAgICAgaWYgKCAkU2VsZi0+e0dldENvbHVtbkZpbHRlclNlbGVjdH0tPnskQ29sdW1ufSBlcSAnRGVsZXRlRmlsdGVyJyApIHsKICAgICAgICAgICAgICAgICAgICBkZWxldGUgJENvbHVtblByZWZWYWx1ZXMtPnskQ29sdW1ufTsKICAgICAgICAgICAgICAgICAgICBuZXh0IFBSRUZWQUxVRVM7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAkQ29sdW1uUHJlZlZhbHVlcy0+eyRDb2x1bW59ID0gJFNlbGYtPntHZXRDb2x1bW5GaWx0ZXJTZWxlY3R9LT57JENvbHVtbn07CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgICRTZWxmLT57VXNlck9iamVjdH0tPlNldFByZWZlcmVuY2VzKAogICAgICAgICAgICAgICAgVXNlcklEID0+ICRTZWxmLT57VXNlcklEfSwKICAgICAgICAgICAgICAgIEtleSAgICA9PiAkU2VsZi0+e1ByZWZLZXlDb2x1bW5GaWx0ZXJzfSwKICAgICAgICAgICAgICAgIFZhbHVlICA9PiAkU2VsZi0+e0pTT05PYmplY3R9LT5FbmNvZGUoIERhdGEgPT4gJENvbHVtblByZWZWYWx1ZXMgKSwKICAgICAgICAgICAgKTsKCiAgICAgICAgICAgICMgc2F2ZSByZWFsIGtleSdzIG5hbWUKICAgICAgICAgICAgbXkgJENvbHVtblByZWZSZWFsS2V5c1ZhbHVlczsKICAgICAgICAgICAgaWYgKCAkUHJlZmVyZW5jZXN7ICRTZWxmLT57UHJlZktleUNvbHVtbkZpbHRlcnNSZWFsS2V5c30gfSApIHsKICAgICAgICAgICAgICAgICRDb2x1bW5QcmVmUmVhbEtleXNWYWx1ZXMgPSAkU2VsZi0+e0pTT05PYmplY3R9LT5EZWNvZGUoCiAgICAgICAgICAgICAgICAgICAgRGF0YSA9PiAkUHJlZmVyZW5jZXN7ICRTZWxmLT57UHJlZktleUNvbHVtbkZpbHRlcnNSZWFsS2V5c30gfSwKICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgUkVBTEtFWVZBTFVFUzoKICAgICAgICAgICAgZm9yIG15ICRDb2x1bW4gKCBzb3J0IGtleXMgJXsgJFNlbGYtPntDb2x1bW5GaWx0ZXJ9IH0gKSB7CiAgICAgICAgICAgICAgICBuZXh0IFJFQUxLRVlWQUxVRVMgaWYgISRDb2x1bW47CgogICAgICAgICAgICAgICAgbXkgJERlbGV0ZUZpbHRlciA9IDA7CiAgICAgICAgICAgICAgICBpZiAoIElzQXJyYXlSZWZXaXRoRGF0YSggJFNlbGYtPntDb2x1bW5GaWx0ZXJ9LT57JENvbHVtbn0gKSApIHsKICAgICAgICAgICAgICAgICAgICBpZiAoIGdyZXAgeyAkXyBlcSAnRGVsZXRlRmlsdGVyJyB9IEB7ICRTZWxmLT57Q29sdW1uRmlsdGVyfS0+eyRDb2x1bW59IH0gKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICREZWxldGVGaWx0ZXIgPSAxOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2lmICggSXNIYXNoUmVmV2l0aERhdGEoICRTZWxmLT57Q29sdW1uRmlsdGVyfS0+eyRDb2x1bW59ICkgKSB7CgogICAgICAgICAgICAgICAgICAgIGlmICgKICAgICAgICAgICAgICAgICAgICAgICAgZ3JlcCB7ICRTZWxmLT57Q29sdW1uRmlsdGVyfS0+eyRDb2x1bW59LT57JF99IGVxICdEZWxldGVGaWx0ZXInIH0KICAgICAgICAgICAgICAgICAgICAgICAga2V5cyAleyAkU2VsZi0+e0NvbHVtbkZpbHRlcn0tPnskQ29sdW1ufSB9CiAgICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICREZWxldGVGaWx0ZXIgPSAxOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBpZiAoJERlbGV0ZUZpbHRlcikgewogICAgICAgICAgICAgICAgICAgIGRlbGV0ZSAkQ29sdW1uUHJlZlJlYWxLZXlzVmFsdWVzLT57JENvbHVtbn07CiAgICAgICAgICAgICAgICAgICAgZGVsZXRlICRTZWxmLT57Q29sdW1uRmlsdGVyfS0+eyRDb2x1bW59OwogICAgICAgICAgICAgICAgICAgIG5leHQgUkVBTEtFWVZBTFVFUzsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICRDb2x1bW5QcmVmUmVhbEtleXNWYWx1ZXMtPnskQ29sdW1ufSA9ICRTZWxmLT57Q29sdW1uRmlsdGVyfS0+eyRDb2x1bW59OwogICAgICAgICAgICB9CiAgICAgICAgICAgICRTZWxmLT57VXNlck9iamVjdH0tPlNldFByZWZlcmVuY2VzKAogICAgICAgICAgICAgICAgVXNlcklEID0+ICRTZWxmLT57VXNlcklEfSwKICAgICAgICAgICAgICAgIEtleSAgICA9PiAkU2VsZi0+e1ByZWZLZXlDb2x1bW5GaWx0ZXJzUmVhbEtleXN9LAogICAgICAgICAgICAgICAgVmFsdWUgID0+ICRTZWxmLT57SlNPTk9iamVjdH0tPkVuY29kZSggRGF0YSA9PiAkQ29sdW1uUHJlZlJlYWxLZXlzVmFsdWVzICksCiAgICAgICAgICAgICk7CgogICAgICAgIH0KICAgIH0KCiAgICAjIGNoZWNrIGlmIHRoZSB1c2VyIGhhcyBmaWx0ZXIgcHJlZmVyZW5jZXMgZm9yIHRoaXMgd2lkZ2V0CiAgICBteSAlUHJlZmVyZW5jZXMgPSAkU2VsZi0+e1VzZXJPYmplY3R9LT5HZXRQcmVmZXJlbmNlcygKICAgICAgICBVc2VySUQgPT4gJFNlbGYtPntVc2VySUR9LAogICAgKTsKCiAgICAjIGdldCBjb2x1bW4gbmFtZXMgZnJvbSBQcmVmZXJlbmNlcwogICAgbXkgJFByZWZlcmVuY2VzQ29sdW1uRmlsdGVyczsKICAgIGlmICggJFByZWZlcmVuY2VzeyAkU2VsZi0+e1ByZWZLZXlDb2x1bW5GaWx0ZXJzfSB9ICkgewogICAgICAgICRQcmVmZXJlbmNlc0NvbHVtbkZpbHRlcnMgPSAkU2VsZi0+e0pTT05PYmplY3R9LT5EZWNvZGUoCiAgICAgICAgICAgIERhdGEgPT4gJFByZWZlcmVuY2VzeyAkU2VsZi0+e1ByZWZLZXlDb2x1bW5GaWx0ZXJzfSB9LAogICAgICAgICk7CiAgICB9CgogICAgaWYgKCRQcmVmZXJlbmNlc0NvbHVtbkZpbHRlcnMpIHsKICAgICAgICAkU2VsZi0+e0dldENvbHVtbkZpbHRlclNlbGVjdH0gPSAkUHJlZmVyZW5jZXNDb2x1bW5GaWx0ZXJzOwogICAgICAgIG15IEBDb2x1bW5GaWx0ZXJzID0ga2V5cyAleyRQcmVmZXJlbmNlc0NvbHVtbkZpbHRlcnN9OyAgICAjIyBubyBjcml0aWMKICAgICAgICBmb3IgbXkgJEZpZWxkIChAQ29sdW1uRmlsdGVycykgewogICAgICAgICAgICAkU2VsZi0+e0dldENvbHVtbkZpbHRlcn0tPnsgJEZpZWxkIC4gJFNlbGYtPntOYW1lfSB9CiAgICAgICAgICAgICAgICA9ICRQcmVmZXJlbmNlc0NvbHVtbkZpbHRlcnMtPnskRmllbGR9OwogICAgICAgIH0KICAgIH0KCiAgICAjIGdldCBjb2x1bW4gcmVhbCBuYW1lcyBmcm9tIFByZWZlcmVuY2VzCiAgICBteSAkUHJlZmVyZW5jZXNDb2x1bW5GaWx0ZXJzUmVhbEtleXM7CiAgICBpZiAoICRQcmVmZXJlbmNlc3sgJFNlbGYtPntQcmVmS2V5Q29sdW1uRmlsdGVyc1JlYWxLZXlzfSB9ICkgewogICAgICAgICRQcmVmZXJlbmNlc0NvbHVtbkZpbHRlcnNSZWFsS2V5cyA9ICRTZWxmLT57SlNPTk9iamVjdH0tPkRlY29kZSgKICAgICAgICAgICAgRGF0YSA9PiAkUHJlZmVyZW5jZXN7ICRTZWxmLT57UHJlZktleUNvbHVtbkZpbHRlcnNSZWFsS2V5c30gfSwKICAgICAgICApOwogICAgfQoKICAgIGlmICgkUHJlZmVyZW5jZXNDb2x1bW5GaWx0ZXJzUmVhbEtleXMpIHsKICAgICAgICBteSBAQ29sdW1uRmlsdGVyc1JlYWwgPSBrZXlzICV7JFByZWZlcmVuY2VzQ29sdW1uRmlsdGVyc1JlYWxLZXlzfTsgICAgIyMgbm8gY3JpdGljCiAgICAgICAgZm9yIG15ICRGaWVsZCAoQENvbHVtbkZpbHRlcnNSZWFsKSB7CiAgICAgICAgICAgICRTZWxmLT57Q29sdW1uRmlsdGVyfS0+eyRGaWVsZH0gPSAkUHJlZmVyZW5jZXNDb2x1bW5GaWx0ZXJzUmVhbEtleXMtPnskRmllbGR9OwogICAgICAgIH0KICAgIH0KCiAgICAjIGdldCBjdXJyZW50IGZpbHRlcgogICAgbXkgJE5hbWUgPSAkU2VsZi0+e1BhcmFtT2JqZWN0fS0+R2V0UGFyYW0oIFBhcmFtID0+ICdOYW1lJyApIHx8ICcnOwogICAgbXkgJFByZWZlcmVuY2VzS2V5ID0gJ1VzZXJEYXNoYm9hcmRUaWNrZXRNeVRpY2tldHNGaWx0ZXInIC4gJFNlbGYtPntOYW1lfTsKICAgIGlmICggJFNlbGYtPntOYW1lfSBlcSAkTmFtZSApIHsKICAgICAgICAkU2VsZi0+e0ZpbHRlcn0gPSAkU2VsZi0+e1BhcmFtT2JqZWN0fS0+R2V0UGFyYW0oIFBhcmFtID0+ICdGaWx0ZXInICkgfHwgJyc7CiAgICB9CgogICAgIyByZW1lbWJlciBmaWx0ZXIKICAgIGlmICggJFNlbGYtPntGaWx0ZXJ9ICkgewoKICAgICAgICAjIHVwZGF0ZSBzZXNzaW9uCiAgICAgICAgJFNlbGYtPntTZXNzaW9uT2JqZWN0fS0+VXBkYXRlU2Vzc2lvbklEKAogICAgICAgICAgICBTZXNzaW9uSUQgPT4gJFNlbGYtPntTZXNzaW9uSUR9LAogICAgICAgICAgICBLZXkgICAgICAgPT4gJFByZWZlcmVuY2VzS2V5LAogICAgICAgICAgICBWYWx1ZSAgICAgPT4gJFNlbGYtPntGaWx0ZXJ9LAogICAgICAgICk7CgogICAgICAgICMgdXBkYXRlIHByZWZlcmVuY2VzCiAgICAgICAgaWYgKCAhJFNlbGYtPntDb25maWdPYmplY3R9LT5HZXQoJ0RlbW9TeXN0ZW0nKSApIHsKICAgICAgICAgICAgJFNlbGYtPntVc2VyT2JqZWN0fS0+U2V0UHJlZmVyZW5jZXMoCiAgICAgICAgICAgICAgICBVc2VySUQgPT4gJFNlbGYtPntVc2VySUR9LAogICAgICAgICAgICAgICAgS2V5ICAgID0+ICRQcmVmZXJlbmNlc0tleSwKICAgICAgICAgICAgICAgIFZhbHVlICA9PiAkU2VsZi0+e0ZpbHRlcn0sCiAgICAgICAgICAgICk7CiAgICAgICAgfQogICAgfQogICAgZWxzZSB7CiAgICAgICAgJFNlbGYtPntGaWx0ZXJ9ID0gJFNlbGYtPnskUHJlZmVyZW5jZXNLZXl9IHx8ICRTZWxmLT57Q29uZmlnfS0+e0ZpbHRlcn0gfHwgJ0FsbCc7CiAgICB9CgogICAgJFNlbGYtPntQcmVmS2V5U2hvd259ICAgPSAnVXNlckRhc2hib2FyZFByZWYnIC4gJFNlbGYtPntOYW1lfSAuICctU2hvd24nOwogICAgJFNlbGYtPntQcmVmS2V5Q29sdW1uc30gPSAnVXNlckRhc2hib2FyZFByZWYnIC4gJFNlbGYtPntOYW1lfSAuICctQ29sdW1ucyc7CiAgICAkU2VsZi0+e1BhZ2VTaG93bn0gICAgICA9ICRTZWxmLT57TGF5b3V0T2JqZWN0fS0+eyAkU2VsZi0+e1ByZWZLZXlTaG93bn0gfQogICAgICAgIHx8ICRTZWxmLT57Q29uZmlnfS0+e0xpbWl0fTsKICAgICRTZWxmLT57U3RhcnRIaXR9ID0gaW50KCAkU2VsZi0+e1BhcmFtT2JqZWN0fS0+R2V0UGFyYW0oIFBhcmFtID0+ICdTdGFydEhpdCcgKSB8fCAxICk7CgogICAgIyBkZWZpbmUgZmlsdGVyYWJsZSBjb2x1bW5zCiAgICAkU2VsZi0+e1ZhbGlkRmlsdGVyYWJsZUNvbHVtbnN9ID0gewogICAgICAgICdPd25lcicgICAgICAgICAgPT4gMSwKICAgICAgICAnUmVzcG9uc2libGUnICAgID0+IDEsCiAgICAgICAgJ0N1c3RvbWVySUQnICAgICA9PiAxLAogICAgICAgICdDdXN0b21lclVzZXJJRCcgPT4gMSwKICAgICAgICAnU3RhdGUnICAgICAgICAgID0+IDEsCiAgICAgICAgJ1F1ZXVlJyAgICAgICAgICA9PiAxLAogICAgICAgICdQcmlvcml0eScgICAgICAgPT4gMSwKICAgICAgICAnVHlwZScgICAgICAgICAgID0+IDEsCiAgICAgICAgJ0xvY2snICAgICAgICAgICA9PiAxLAogICAgICAgICdTZXJ2aWNlJyAgICAgICAgPT4gMSwKICAgICAgICAnU0xBJyAgICAgICAgICAgID0+IDEsCiAgICB9OwoKICAgICMgaGFzaCB3aXRoIGFsbCB2YWxpZCBzb3J0YWJsZSBjb2x1bXVucyAodGFrZW4gZnJvbSBUaWNrZXRTZWFyY2gpCiAgICAjIFNvcnRCeSAgPT4gJ0FnZScsICAgIyBPd25lcnxSZXNwb25zaWJsZXxDdXN0b21lcklEfFN0YXRlfFRpY2tldE51bWJlcnxRdWV1ZQogICAgIyB8UHJpb3JpdHl8VHlwZXxMb2NrfFRpdGxlfFNlcnZpY2V8U0xBfENoYW5nZWR8UGVuZGluZ1RpbWV8RXNjYWxhdGlvblRpbWUKICAgICMgfCBFc2NhbGF0aW9uVXBkYXRlVGltZXxFc2NhbGF0aW9uUmVzcG9uc2VUaW1lfEVzY2FsYXRpb25Tb2x1dGlvblRpbWUKICAgICRTZWxmLT57VmFsaWRTb3J0YWJsZUNvbHVtbnN9ID0gewogICAgICAgICdBZ2UnICAgICAgICAgICAgICAgICAgICA9PiAxLAogICAgICAgICdPd25lcicgICAgICAgICAgICAgICAgICA9PiAxLAogICAgICAgICdSZXNwb25zaWJsZScgICAgICAgICAgICA9PiAxLAogICAgICAgICdDdXN0b21lcklEJyAgICAgICAgICAgICA9PiAxLAogICAgICAgICdTdGF0ZScgICAgICAgICAgICAgICAgICA9PiAxLAogICAgICAgICdUaWNrZXROdW1iZXInICAgICAgICAgICA9PiAxLAogICAgICAgICdRdWV1ZScgICAgICAgICAgICAgICAgICA9PiAxLAogICAgICAgICdQcmlvcml0eScgICAgICAgICAgICAgICA9PiAxLAogICAgICAgICdUeXBlJyAgICAgICAgICAgICAgICAgICA9PiAxLAogICAgICAgICdMb2NrJyAgICAgICAgICAgICAgICAgICA9PiAxLAogICAgICAgICdUaXRsZScgICAgICAgICAgICAgICAgICA9PiAxLAogICAgICAgICdTZXJ2aWNlJyAgICAgICAgICAgICAgICA9PiAxLAogICAgICAgICdDaGFuZ2VkJyAgICAgICAgICAgICAgICA9PiAxLAogICAgICAgICdTTEEnICAgICAgICAgICAgICAgICAgICA9PiAxLAogICAgICAgICdQZW5kaW5nVGltZScgICAgICAgICAgICA9PiAxLAogICAgICAgICdFc2NhbGF0aW9uVGltZScgICAgICAgICA9PiAxLAogICAgICAgICdFc2NhbGF0aW9uVXBkYXRlVGltZScgICA9PiAxLAogICAgICAgICdFc2NhbGF0aW9uUmVzcG9uc2VUaW1lJyA9PiAxLAogICAgICAgICdFc2NhbGF0aW9uU29sdXRpb25UaW1lJyA9PiAxLAogICAgfTsKCiAgICAjIHJlbW92ZSBDdXN0b21lcklEIGlmIEN1c3RvbWVyIEluZm9ybWF0aW9uIENlbnRlcgogICAgaWYgKCAkU2VsZi0+e0FjdGlvbn0gZXEgJ0FnZW50Q3VzdG9tZXJJbmZvcm1hdGlvbkNlbnRlcicgKSB7CiAgICAgICAgZGVsZXRlICRTZWxmLT57Q29sdW1uRmlsdGVyfS0+e0N1c3RvbWVySUR9OwogICAgICAgIGRlbGV0ZSAkU2VsZi0+e0dldENvbHVtbkZpbHRlcn0tPntDdXN0b21lcklEfTsKICAgICAgICBkZWxldGUgJFNlbGYtPntHZXRDb2x1bW5GaWx0ZXJTZWxlY3R9LT57Q3VzdG9tZXJJRH07CiAgICAgICAgZGVsZXRlICRTZWxmLT57VmFsaWRGaWx0ZXJhYmxlQ29sdW1uc30tPntDdXN0b21lcklEfTsKICAgICAgICBkZWxldGUgJFNlbGYtPntWYWxpZFNvcnRhYmxlQ29sdW1uc30tPntDdXN0b21lcklEfTsKICAgIH0KCiAgICByZXR1cm4gJFNlbGY7Cn0KCnN1YiBQcmVmZXJlbmNlcyB7CiAgICBteSAoICRTZWxmLCAlUGFyYW0gKSA9IEBfOwoKICAgICMgY29uZmlndXJlIGNvbHVtbnMKICAgIG15IEBDb2x1bW5zRW5hYmxlZDsKICAgIG15IEBDb2x1bW5zQXZhaWxhYmxlOwogICAgbXkgQENvbHVtbnNBdmFpbGFibGVOb3RFbmFibGVkOwoKICAgICMgY2hlY2sgZm9yIGRlZmF1bHQgc2V0dGluZ3MKICAgIGlmICgKICAgICAgICAkU2VsZi0+e0NvbmZpZ30tPntEZWZhdWx0Q29sdW1uc30KICAgICAgICAmJiBJc0hhc2hSZWZXaXRoRGF0YSggJFNlbGYtPntDb25maWd9LT57RGVmYXVsdENvbHVtbnN9ICkKICAgICAgICApCiAgICB7CiAgICAgICAgQENvbHVtbnNBdmFpbGFibGUgPSBncmVwIHsgJFNlbGYtPntDb25maWd9LT57RGVmYXVsdENvbHVtbnN9LT57JF99IG5lICcwJyB9CiAgICAgICAgICAgIGtleXMgJXsgJFNlbGYtPntDb25maWd9LT57RGVmYXVsdENvbHVtbnN9IH07CiAgICAgICAgQENvbHVtbnNFbmFibGVkID0gZ3JlcCB7ICRTZWxmLT57Q29uZmlnfS0+e0RlZmF1bHRDb2x1bW5zfS0+eyRffSBlcSAnMicgfQogICAgICAgICAgICBrZXlzICV7ICRTZWxmLT57Q29uZmlnfS0+e0RlZmF1bHRDb2x1bW5zfSB9OwogICAgfQoKICAgICMgZ2V0IGR5bmFtaWMgZmllbGRzCiAgICBteSAkRHluYW1pY0ZpZWxkTGlzdCA9ICRTZWxmLT57RHluYW1pY0ZpZWxkT2JqZWN0fS0+RHluYW1pY0ZpZWxkTGlzdCgKICAgICAgICBPYmplY3RUeXBlID0+ICdUaWNrZXQnLAogICAgICAgIFJlc3VsdFR5cGUgPT4gJ0hBU0gnLAogICAgKTsKCiAgICBmb3IgbXkgJER5bmFtaWNGaWVsZElEICggc29ydCBrZXlzICV7JER5bmFtaWNGaWVsZExpc3R9ICkgewogICAgICAgIHB1c2ggQENvbHVtbnNBdmFpbGFibGUsICdEeW5hbWljRmllbGRfJyAuICREeW5hbWljRmllbGRMaXN0LT57JER5bmFtaWNGaWVsZElEfTsKICAgIH0KCiAgICAjIGNoZWNrIGlmIHRoZSB1c2VyIGhhcyBmaWx0ZXIgcHJlZmVyZW5jZXMgZm9yIHRoaXMgd2lkZ2V0CiAgICBteSAlUHJlZmVyZW5jZXMgPSAkU2VsZi0+e1VzZXJPYmplY3R9LT5HZXRQcmVmZXJlbmNlcygKICAgICAgICBVc2VySUQgPT4gJFNlbGYtPntVc2VySUR9LAogICAgKTsKCiAgICAjIGlmIHByZWZlcmVuY2Ugc2V0dGluZ3MgYXJlIGF2YWlsYWJsZSwgdGFrZSB0aGVtCiAgICBpZiAoICRQcmVmZXJlbmNlc3sgJFNlbGYtPntQcmVmS2V5Q29sdW1uc30gfSApIHsKCiAgICAgICAgbXkgJENvbHVtbnNFbmFibGVkID0gJFNlbGYtPntKU09OT2JqZWN0fS0+RGVjb2RlKAogICAgICAgICAgICBEYXRhID0+ICRTZWxmLT57TGF5b3V0T2JqZWN0fS0+eyAkU2VsZi0+e1ByZWZLZXlDb2x1bW5zfSB9LAogICAgICAgICk7CgogICAgICAgIEBDb2x1bW5zRW5hYmxlZCA9IGdyZXAgeyAkQ29sdW1uc0VuYWJsZWQtPntDb2x1bW5zfS0+eyRffSA9PSAxIH0KICAgICAgICAgICAga2V5cyAleyAkQ29sdW1uc0VuYWJsZWQtPntDb2x1bW5zfSB9OwoKICAgICAgICBpZiAoICRDb2x1bW5zRW5hYmxlZC0+e09yZGVyfSAmJiBAeyAkQ29sdW1uc0VuYWJsZWQtPntPcmRlcn0gfSApIHsKICAgICAgICAgICAgQENvbHVtbnNFbmFibGVkID0gQHsgJENvbHVtbnNFbmFibGVkLT57T3JkZXJ9IH07CiAgICAgICAgfQogICAgfQoKICAgIG15ICVDb2x1bW5zOwogICAgZm9yIG15ICRDb2x1bW5OYW1lICggc29ydCB7ICRhIGNtcCAkYiB9IEBDb2x1bW5zQXZhaWxhYmxlICkgewogICAgICAgICRDb2x1bW5ze0NvbHVtbnN9LT57JENvbHVtbk5hbWV9ID0gKCBncmVwIHsgJENvbHVtbk5hbWUgZXEgJF8gfSBAQ29sdW1uc0VuYWJsZWQgKSA/IDEgOiAwOwogICAgICAgIGlmICggIWdyZXAgeyAkXyBlcSAkQ29sdW1uTmFtZSB9IEBDb2x1bW5zRW5hYmxlZCApIHsKICAgICAgICAgICAgcHVzaCBAQ29sdW1uc0F2YWlsYWJsZU5vdEVuYWJsZWQsICRDb2x1bW5OYW1lOwogICAgICAgIH0KICAgIH0KCiAgICAjIHJlbW92ZSBDdXN0b21lcklEIGlmIEN1c3RvbWVyIEluZm9ybWF0aW9uIENlbnRlcgogICAgaWYgKCAkU2VsZi0+e0FjdGlvbn0gZXEgJ0FnZW50Q3VzdG9tZXJJbmZvcm1hdGlvbkNlbnRlcicgKSB7CiAgICAgICAgZGVsZXRlICRDb2x1bW5ze0NvbHVtbnN9LT57Q3VzdG9tZXJJRH07CiAgICAgICAgQENvbHVtbnNFbmFibGVkICAgICAgICAgICAgID0gZ3JlcCB7ICRfIG5lICdDdXN0b21lcklEJyB9IEBDb2x1bW5zRW5hYmxlZDsKICAgICAgICBAQ29sdW1uc0F2YWlsYWJsZU5vdEVuYWJsZWQgPSBncmVwIHsgJF8gbmUgJ0N1c3RvbWVySUQnIH0gQENvbHVtbnNBdmFpbGFibGVOb3RFbmFibGVkOwogICAgfQoKICAgIG15IEBQYXJhbXMgPSAoCiAgICAgICAgewogICAgICAgICAgICBEZXNjICA9PiAnU2hvd24gVGlja2V0cycsCiAgICAgICAgICAgIE5hbWUgID0+ICRTZWxmLT57UHJlZktleVNob3dufSwKICAgICAgICAgICAgQmxvY2sgPT4gJ09wdGlvbicsCiAgICAgICAgICAgIERhdGEgID0+IHsKICAgICAgICAgICAgICAgIDUgID0+ICcgNScsCiAgICAgICAgICAgICAgICAxMCA9PiAnMTAnLAogICAgICAgICAgICAgICAgMTUgPT4gJzE1JywKICAgICAgICAgICAgICAgIDIwID0+ICcyMCcsCiAgICAgICAgICAgICAgICAyNSA9PiAnMjUnLAogICAgICAgICAgICAgICAgMjUgPT4gJzUwJywKICAgICAgICAgICAgICAgIDI1ID0+ICc3NScsCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIFNlbGVjdGVkSUQgID0+ICRTZWxmLT57UGFnZVNob3dufSwKICAgICAgICAgICAgVHJhbnNsYXRpb24gPT4gMCwKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgICAgRGVzYyAgICAgICAgICAgICA9PiAnU2hvd24gQ29sdW1ucycsCiAgICAgICAgICAgIE5hbWUgICAgICAgICAgICAgPT4gJFNlbGYtPntQcmVmS2V5Q29sdW1uc30sCiAgICAgICAgICAgIEJsb2NrICAgICAgICAgICAgPT4gJ0FsbG9jYXRpb25MaXN0JywKICAgICAgICAgICAgQ29sdW1ucyAgICAgICAgICA9PiAkU2VsZi0+e0pTT05PYmplY3R9LT5FbmNvZGUoIERhdGEgPT4gXCVDb2x1bW5zICksCiAgICAgICAgICAgIENvbHVtbnNFbmFibGVkICAgPT4gJFNlbGYtPntKU09OT2JqZWN0fS0+RW5jb2RlKCBEYXRhID0+IFxAQ29sdW1uc0VuYWJsZWQgKSwKICAgICAgICAgICAgQ29sdW1uc0F2YWlsYWJsZSA9PiAkU2VsZi0+e0pTT05PYmplY3R9LT5FbmNvZGUoIERhdGEgPT4gXEBDb2x1bW5zQXZhaWxhYmxlTm90RW5hYmxlZCApLAojICAgICAgICAgICAgVHJhbnNsYXRpb24gICAgICA9PiAxLAogICAgICAgIH0sCiAgICApOwoKICAgIHJldHVybiBAUGFyYW1zOwp9CgpzdWIgQ29uZmlnIHsKICAgIG15ICggJFNlbGYsICVQYXJhbSApID0gQF87CgogICAgIyBjaGVjayBpZiBmcm9udGVuZCBtb2R1bGUgb2YgbGluayBpcyB1c2VkCiAgICBpZiAoICRTZWxmLT57Q29uZmlnfS0+e0xpbmt9ICYmICRTZWxmLT57Q29uZmlnfS0+e0xpbmt9ID1+IC9BY3Rpb249KC4rPykoWyY7XS4rP3wpJC8gKSB7CiAgICAgICAgbXkgJEFjdGlvbiA9ICQxOwogICAgICAgIGlmICggISRTZWxmLT57Q29uZmlnT2JqZWN0fS0+R2V0KCdGcm9udGVuZDo6TW9kdWxlJyktPnskQWN0aW9ufSApIHsKICAgICAgICAgICAgJFNlbGYtPntDb25maWd9LT57TGlua30gPSAnJzsKICAgICAgICB9CiAgICB9CgogICAgcmV0dXJuICgKICAgICAgICAleyAkU2VsZi0+e0NvbmZpZ30gfSwKCiAgICAgICAgIyByZW1lbWJlciwgZG8gbm90IGFsbG93IHRvIHVzZSBwYWdlIGNhY2hlCiAgICAgICAgIyAoaXQncyBub3Qgd29ya2luZyBiZWNhdXNlIG9mIGludGVybmFsIGZpbHRlcikKICAgICAgICBDYWNoZVRUTCA9PiB1bmRlZiwKICAgICAgICBDYWNoZUtleSA9PiB1bmRlZiwKICAgICk7Cn0KCnN1YiBGaWx0ZXJDb250ZW50IHsKICAgIG15ICggJFNlbGYsICVQYXJhbSApID0gQF87CgogICAgcmV0dXJuIGlmICEkUGFyYW17RmlsdGVyQ29sdW1ufTsKCiAgICBteSAkVGlja2V0SURzOwogICAgbXkgJEhlYWRlckNvbHVtbiA9ICRQYXJhbXtGaWx0ZXJDb2x1bW59OwogICAgbXkgQE9yaWdpbmFsVmlld2FibGVUaWNrZXRzOwoKICAgIGlmICgKICAgICAgICAkU2VsZi0+e0NvbmZpZ09iamVjdH0tPkdldCgnT25seVZhbHVlc09uVGlja2V0JykgfHwKICAgICAgICAkSGVhZGVyQ29sdW1uIGVxICdDdXN0b21lcklEJyB8fAogICAgICAgICRIZWFkZXJDb2x1bW4gZXEgJ0N1c3RvbWVyVXNlcklEJwogICAgICAgICkKICAgIHsKICAgICAgICBteSAlU2VhcmNoUGFyYW1zICAgICAgICA9ICRTZWxmLT5fU2VhcmNoUGFyYW1zR2V0KCVQYXJhbSk7CiAgICAgICAgbXkgJVRpY2tldFNlYXJjaCAgICAgICAgPSAleyAkU2VhcmNoUGFyYW1ze1RpY2tldFNlYXJjaH0gfTsKICAgICAgICBteSAlVGlja2V0U2VhcmNoU3VtbWFyeSA9ICV7ICRTZWFyY2hQYXJhbXN7VGlja2V0U2VhcmNoU3VtbWFyeX0gfTsKCiAgICAgICAgQE9yaWdpbmFsVmlld2FibGVUaWNrZXRzID0gJFNlbGYtPntUaWNrZXRPYmplY3R9LT5UaWNrZXRTZWFyY2goCiAgICAgICAgICAgICVUaWNrZXRTZWFyY2gsCiAgICAgICAgICAgICV7ICRUaWNrZXRTZWFyY2hTdW1tYXJ5eyAkU2VsZi0+e0ZpbHRlcn0gfSB9LAogICAgICAgICAgICBSZXN1bHQgPT4gJ0FSUkFZJywKICAgICAgICApOwogICAgfQoKICAgIGlmICggJEhlYWRlckNvbHVtbiA9fiBtL15EeW5hbWljRmllbGRfLyAmJiAhZGVmaW5lZCAkU2VsZi0+e0R5bmFtaWNGaWVsZH0gKSB7CgogICAgICAgICMgZ2V0IHRoZSBkeW5hbWljIGZpZWxkcyBmb3IgdGhpcyBzY3JlZW4KICAgICAgICAkU2VsZi0+e0R5bmFtaWNGaWVsZH0gPSAkU2VsZi0+e0R5bmFtaWNGaWVsZE9iamVjdH0tPkR5bmFtaWNGaWVsZExpc3RHZXQoCiAgICAgICAgICAgIFZhbGlkICAgICAgPT4gMCwKICAgICAgICAgICAgT2JqZWN0VHlwZSA9PiBbJ1RpY2tldCddLAogICAgICAgICk7CiAgICB9CgogICAgIyBnZXQgY29sdW1uIHZhbHVlcyBmb3IgdG8gYnVpbGQgdGhlIGZpbHRlcnMgbGF0ZXIKICAgIG15ICRDb2x1bW5WYWx1ZXMgPSAkU2VsZi0+X0dldENvbHVtblZhbHVlcygKICAgICAgICBPcmlnaW5hbFRpY2tldElEcyA9PiBcQE9yaWdpbmFsVmlld2FibGVUaWNrZXRzLAogICAgICAgIEhlYWRlckNvbHVtbiAgICAgID0+ICRIZWFkZXJDb2x1bW4sCiAgICApOwoKICAgICMgbWFrZSBzdXJlIHRoYXQgZXZlbiBhIHZhbHVlIG9mIDAgaXMgcGFzc2VkIGFzIGEgU2VsZWN0ZWQgdmFsdWUsIGUuZy4gVW5jaGVja2VkIHZhbHVlIG9mIGEKICAgICMgY2hlY2tib3ggZHluYW1pYyBmaWVsZC4KICAgIG15ICRTZWxlY3RlZFZhbHVlCiAgICAgICAgPSBkZWZpbmVkICRTZWxmLT57R2V0Q29sdW1uRmlsdGVyfS0+eyAkSGVhZGVyQ29sdW1uIC4gJFNlbGYtPntOYW1lfSB9CiAgICAgICAgPyAkU2VsZi0+e0dldENvbHVtbkZpbHRlcn0tPnsgJEhlYWRlckNvbHVtbiAuICRTZWxmLT57TmFtZX0gfQogICAgICAgIDogJyc7CgogICAgbXkgJExhYmVsQ29sdW1uID0gJEhlYWRlckNvbHVtbjsKICAgIGlmICggJExhYmVsQ29sdW1uID1+IG17IFxBIER5bmFtaWNGaWVsZF8gfXhtcyApIHsKCiAgICAgICAgbXkgJER5bmFtaWNGaWVsZENvbmZpZzsKICAgICAgICAkTGFiZWxDb2x1bW4gPX4gc3tcQSBEeW5hbWljRmllbGRfIH17fXhtczsKCiAgICAgICAgRFlOQU1JQ0ZJRUxEOgogICAgICAgIGZvciBteSAkREZDb25maWcgKCBAeyAkU2VsZi0+e0R5bmFtaWNGaWVsZH0gfSApIHsKICAgICAgICAgICAgbmV4dCBEWU5BTUlDRklFTEQgaWYgIUlzSGFzaFJlZldpdGhEYXRhKCRERkNvbmZpZyk7CiAgICAgICAgICAgIG5leHQgRFlOQU1JQ0ZJRUxEIGlmICRERkNvbmZpZy0+e05hbWV9IG5lICRMYWJlbENvbHVtbjsKCiAgICAgICAgICAgICREeW5hbWljRmllbGRDb25maWcgPSAkREZDb25maWc7CiAgICAgICAgICAgIGxhc3QgRFlOQU1JQ0ZJRUxEOwogICAgICAgIH0KICAgICAgICBpZiAoIElzSGFzaFJlZldpdGhEYXRhKCREeW5hbWljRmllbGRDb25maWcpICkgewogICAgICAgICAgICAkTGFiZWxDb2x1bW4gPSAkRHluYW1pY0ZpZWxkQ29uZmlnLT57TGFiZWx9OwogICAgICAgIH0KICAgIH0KCiAgICAjIHZhcmlhYmxlIHRvIHNhdmUgdGhlIGZpbHRlcidzIGh0bWwgY29kZQogICAgbXkgJENvbHVtbkZpbHRlckpTT04gPSAkU2VsZi0+X0NvbHVtbkZpbHRlckpTT04oCiAgICAgICAgQ29sdW1uTmFtZSAgICA9PiAkSGVhZGVyQ29sdW1uLAogICAgICAgIExhYmVsICAgICAgICAgPT4gJExhYmVsQ29sdW1uLAogICAgICAgIENvbHVtblZhbHVlcyAgPT4gJENvbHVtblZhbHVlcy0+eyRIZWFkZXJDb2x1bW59LAogICAgICAgIFNlbGVjdGVkVmFsdWUgPT4gJFNlbGVjdGVkVmFsdWUsCiAgICAgICAgRGFzaGJvYXJkTmFtZSA9PiAkU2VsZi0+e05hbWV9LAogICAgKTsKCiAgICByZXR1cm4gJENvbHVtbkZpbHRlckpTT047Cgp9CgpzdWIgUnVuIHsKICAgIG15ICggJFNlbGYsICVQYXJhbSApID0gQF87CgogICAgbXkgJVNlYXJjaFBhcmFtcyAgICAgICAgPSAkU2VsZi0+X1NlYXJjaFBhcmFtc0dldCglUGFyYW0pOwogICAgbXkgQENvbHVtbnMgICAgICAgICAgICAgPSBAeyAkU2VhcmNoUGFyYW1ze0NvbHVtbnN9IH07CiAgICBteSAlVGlja2V0U2VhcmNoICAgICAgICA9ICV7ICRTZWFyY2hQYXJhbXN7VGlja2V0U2VhcmNofSB9OwogICAgbXkgJVRpY2tldFNlYXJjaFN1bW1hcnkgPSAleyAkU2VhcmNoUGFyYW1ze1RpY2tldFNlYXJjaFN1bW1hcnl9IH07CgogICAgbXkgJENhY2hlS2V5ID0gJFNlbGYtPntOYW1lfSAuICctJwogICAgICAgIC4gJFNlbGYtPntBY3Rpb259IC4gJy0nCiAgICAgICAgLiAkU2VsZi0+e1BhZ2VTaG93bn0gLiAnLScKICAgICAgICAuICRTZWxmLT57U3RhcnRIaXR9IC4gJy0nCiAgICAgICAgLiAkU2VsZi0+e1VzZXJJRH07CiAgICBteSAkQ2FjaGVDb2x1bW5zID0gam9pbigKICAgICAgICAnLCcsCiAgICAgICAgbWFwIHsKICAgICAgICAgICAgJF8gLiAnPT4nIC4gJFNlbGYtPntHZXRDb2x1bW5GaWx0ZXJTZWxlY3R9LT57JF99CiAgICAgICAgICAgIH0KICAgICAgICAgICAgc29ydCBrZXlzICV7ICRTZWxmLT57R2V0Q29sdW1uRmlsdGVyU2VsZWN0fSB9CiAgICApOwogICAgJENhY2hlS2V5IC49ICctJyAuICRDYWNoZUNvbHVtbnMgaWYgJENhY2hlQ29sdW1uczsKCiAgICAkQ2FjaGVLZXkgLj0gJy0nIC4gJFNlbGYtPntTb3J0Qnl9ICBpZiBkZWZpbmVkICRTZWxmLT57U29ydEJ5fTsKICAgICRDYWNoZUtleSAuPSAnLScgLiAkU2VsZi0+e09yZGVyQnl9IGlmIGRlZmluZWQgJFNlbGYtPntPcmRlckJ5fTsKCiAgICAjIEN1c3RvbWVySW5mb3JtYXRpb25DZW50ZXIgc2hvd3MgZGF0YSBwZXIgQ3VzdG9tZXJJRAogICAgaWYgKCAkUGFyYW17Q3VzdG9tZXJJRH0gKSB7CiAgICAgICAgJENhY2hlS2V5IC49ICctJyAuICRQYXJhbXtDdXN0b21lcklEfTsKICAgIH0KCiAgICAjIGNoZWNrIGNhY2hlCiAgICBteSAkVGlja2V0SURzID0gJFNlbGYtPntDYWNoZU9iamVjdH0tPkdldCgKICAgICAgICBUeXBlID0+ICdEYXNoYm9hcmQnLAogICAgICAgIEtleSAgPT4gJENhY2hlS2V5IC4gJy0nIC4gJFNlbGYtPntGaWx0ZXJ9IC4gJy1MaXN0JywKICAgICk7CgogICAgIyBmaW5kIGFuZCBzaG93IHRpY2tldCBsaXN0CiAgICBteSAkQ2FjaGVVc2VkID0gMTsKCiAgICBpZiAoICEkVGlja2V0SURzICkgewoKICAgICAgICAjIGFkZCBzb3J0IGJ5IHBhcmFtZXRlciB0byB0aGUgc2VhcmNoCiAgICAgICAgaWYgKAogICAgICAgICAgICAhZGVmaW5lZCAkVGlja2V0U2VhcmNoe1NvcnRCeX0KICAgICAgICAgICAgfHwgISRTZWxmLT57VmFsaWRTb3J0YWJsZUNvbHVtbnN9LT57ICRUaWNrZXRTZWFyY2h7U29ydEJ5fSB9CiAgICAgICAgICAgICkKICAgICAgICB7CiAgICAgICAgICAgIGlmICggJFNlbGYtPntTb3J0Qnl9ICYmICRTZWxmLT57VmFsaWRTb3J0YWJsZUNvbHVtbnN9LT57ICRTZWxmLT57U29ydEJ5fSB9ICkgewogICAgICAgICAgICAgICAgJFRpY2tldFNlYXJjaHtTb3J0Qnl9ID0gJFNlbGYtPntTb3J0Qnl9OwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgJFRpY2tldFNlYXJjaHtTb3J0Qnl9ID0gJ0FnZSc7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgICMgYWRkIG9yZGVyIGJ5IHBhcmFtZXRlciB0byB0aGUgc2VhcmNoCiAgICAgICAgaWYgKCAkU2VsZi0+e09yZGVyQnl9ICkgewogICAgICAgICAgICAkVGlja2V0U2VhcmNoe09yZGVyQnl9ID0gJFNlbGYtPntPcmRlckJ5fTsKICAgICAgICB9CgogICAgICAgICRDYWNoZVVzZWQgPSAwOwogICAgICAgIG15IEBUaWNrZXRJRHNBcnJheSA9ICRTZWxmLT57VGlja2V0T2JqZWN0fS0+VGlja2V0U2VhcmNoKAogICAgICAgICAgICBSZXN1bHQgPT4gJ0FSUkFZJywKICAgICAgICAgICAgJVRpY2tldFNlYXJjaCwKICAgICAgICAgICAgJXsgJFRpY2tldFNlYXJjaFN1bW1hcnl7ICRTZWxmLT57RmlsdGVyfSB9IH0sCiAgICAgICAgICAgICV7ICRTZWxmLT57Q29sdW1uRmlsdGVyfSB9LAogICAgICAgICAgICBMaW1pdCA9PiAkU2VsZi0+e1BhZ2VTaG93bn0gKyAkU2VsZi0+e1N0YXJ0SGl0fSAtIDEsCiAgICAgICAgKTsKICAgICAgICAkVGlja2V0SURzID0gXEBUaWNrZXRJRHNBcnJheTsKICAgIH0KCiAgICAjIGNoZWNrIGNhY2hlCiAgICBteSAkU3VtbWFyeSA9ICRTZWxmLT57Q2FjaGVPYmplY3R9LT5HZXQoCiAgICAgICAgVHlwZSA9PiAnRGFzaGJvYXJkJywKICAgICAgICBLZXkgID0+ICRDYWNoZUtleSAuICctU3VtbWFyeScsCiAgICApOwoKICAgICMgaWYgbm8gY2FjaGUgb3IgbmV3IGxpc3QgcmVzdWx0LCBkbyBjb3VudCBsb29rdXAKICAgIGlmICggISRTdW1tYXJ5IHx8ICEkQ2FjaGVVc2VkICkgewogICAgICAgIGZvciBteSAkVHlwZSAoIHNvcnQga2V5cyAlVGlja2V0U2VhcmNoU3VtbWFyeSApIHsKICAgICAgICAgICAgbmV4dCBpZiAhJFRpY2tldFNlYXJjaFN1bW1hcnl7JFR5cGV9OwoKICAgICAgICAgICAgIyBjb3B5IG9yaWdpbmFsIGNvbHVtbiBmaWx0ZXIKICAgICAgICAgICAgbXkgJUNvbHVtbkZpbHRlciA9ICV7ICRTZWxmLT57Q29sdW1uRmlsdGVyfSB9OwoKICAgICAgICAgICAgIyBsb29wIHRocm91Z2ggYWxsIGNvbHVtIGZpbHRlciBlbGVtZW50cwogICAgICAgICAgICBmb3IgbXkgJEVsZW1lbnQgKCBzb3J0IGtleXMgJUNvbHVtbkZpbHRlciApIHsKCiAgICAgICAgICAgICAgICAjIHZlcmlmeSBpZiBjdXJyZW50IGNvbHVtbiBmaWx0ZXIgZWxlbWVudCBpcyBhbHJlYWR5IHByZXNlbnQgaW4gdGhlIHRpY2tldCBzZWFyY2gKICAgICAgICAgICAgICAgICMgc3VtbWFyeSwgdG8gZGVsZXRlIGl0IGZyb20gdGhlIGNvbHVtbiBmaWx0ZXIgaGFzaAogICAgICAgICAgICAgICAgaWYgKCAkVGlja2V0U2VhcmNoU3VtbWFyeXskVHlwZX0tPnskRWxlbWVudH0gKSB7CiAgICAgICAgICAgICAgICAgICAgZGVsZXRlICRDb2x1bW5GaWx0ZXJ7JEVsZW1lbnR9OwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CgogICAgICAgICAgICAkU3VtbWFyeS0+eyRUeXBlfSA9ICRTZWxmLT57VGlja2V0T2JqZWN0fS0+VGlja2V0U2VhcmNoKAogICAgICAgICAgICAgICAgUmVzdWx0ID0+ICdDT1VOVCcsCiAgICAgICAgICAgICAgICAlVGlja2V0U2VhcmNoLAogICAgICAgICAgICAgICAgJXsgJFRpY2tldFNlYXJjaFN1bW1hcnl7JFR5cGV9IH0sCiAgICAgICAgICAgICAgICAleyAkU2VsZi0+e0NvbHVtbkZpbHRlcn0gfSwKICAgICAgICAgICAgICAgICVDb2x1bW5GaWx0ZXIsCiAgICAgICAgICAgICk7CiAgICAgICAgfQogICAgfQoKICAgICMgc2V0IGNhY2hlCiAgICBpZiAoICEkQ2FjaGVVc2VkICYmICRTZWxmLT57Q29uZmlnfS0+e0NhY2hlVFRMTG9jYWx9ICkgewogICAgICAgICRTZWxmLT57Q2FjaGVPYmplY3R9LT5TZXQoCiAgICAgICAgICAgIFR5cGUgID0+ICdEYXNoYm9hcmQnLAogICAgICAgICAgICBLZXkgICA9PiAkQ2FjaGVLZXkgLiAnLVN1bW1hcnknLAogICAgICAgICAgICBWYWx1ZSA9PiAkU3VtbWFyeSwKICAgICAgICAgICAgVFRMICAgPT4gJFNlbGYtPntDb25maWd9LT57Q2FjaGVUVExMb2NhbH0gKiA2MCwKICAgICAgICApOwogICAgICAgICRTZWxmLT57Q2FjaGVPYmplY3R9LT5TZXQoCiAgICAgICAgICAgIFR5cGUgID0+ICdEYXNoYm9hcmQnLAogICAgICAgICAgICBLZXkgICA9PiAkQ2FjaGVLZXkgLiAnLScgLiAkU2VsZi0+e0ZpbHRlcn0gLiAnLUxpc3QnLAogICAgICAgICAgICBWYWx1ZSA9PiAkVGlja2V0SURzLAogICAgICAgICAgICBUVEwgICA9PiAkU2VsZi0+e0NvbmZpZ30tPntDYWNoZVRUTExvY2FsfSAqIDYwLAogICAgICAgICk7CiAgICB9CgogICAgIyBzZXQgY3NzIGNsYXNzCiAgICAkU3VtbWFyeS0+eyAkU2VsZi0+e0ZpbHRlcn0gLiAnOjpTZWxlY3RlZCcgfSA9ICdTZWxlY3RlZCc7CgogICAgIyBnZXQgZmlsdGVyIHRpY2tldCBjb3VudHMKICAgICRTZWxmLT57TGF5b3V0T2JqZWN0fS0+QmxvY2soCiAgICAgICAgTmFtZSA9PiAnQ29udGVudExhcmdlVGlja2V0R2VuZXJpY0ZpbHRlcicsCiAgICAgICAgRGF0YSA9PiB7CiAgICAgICAgICAgICVQYXJhbSwKICAgICAgICAgICAgJXsgJFNlbGYtPntDb25maWd9IH0sCiAgICAgICAgICAgIE5hbWUgPT4gJFNlbGYtPntOYW1lfSwKICAgICAgICAgICAgJXskU3VtbWFyeX0sCiAgICAgICAgfSwKICAgICk7CgogICAgJFNlbGYtPntMYXlvdXRPYmplY3R9LT5CbG9jaygKICAgICAgICBOYW1lID0+ICdDb250ZW50TGFyZ2VUaWNrZXRHZW5lcmljRmlsdGVyT3duZXInLAogICAgICAgIERhdGEgPT4gewogICAgICAgICAgICAlUGFyYW0sCiAgICAgICAgICAgIE5hbWUgPT4gJFNlbGYtPntOYW1lfSwKICAgICAgICAgICAgJXskU3VtbWFyeX0sCiAgICAgICAgfSwKICAgICk7CgogICAgIyBhZGQgcGFnZSBuYXYgYmFyCiAgICBteSAkVG90YWwgPSAkU3VtbWFyeS0+eyAkU2VsZi0+e0ZpbHRlcn0gfSB8fCAwOwoKICAgIG15ICVHZXRDb2x1bW5GaWx0ZXIgPSAkU2VsZi0+e0dldENvbHVtbkZpbHRlcn0gPyAleyAkU2VsZi0+e0dldENvbHVtbkZpbHRlcn0gfSA6ICgpOwoKICAgIG15ICRDb2x1bW5GaWx0ZXJMaW5rID0gJyc7CiAgICBDT0xVTU5OQU1FOgogICAgZm9yIG15ICRDb2x1bW5OYW1lICggc29ydCBrZXlzICVHZXRDb2x1bW5GaWx0ZXIgKSB7CiAgICAgICAgbmV4dCBDT0xVTU5OQU1FIGlmICEkQ29sdW1uTmFtZTsKICAgICAgICBuZXh0IENPTFVNTk5BTUUgaWYgISRHZXRDb2x1bW5GaWx0ZXJ7JENvbHVtbk5hbWV9OwogICAgICAgICRDb2x1bW5GaWx0ZXJMaW5rCiAgICAgICAgICAgIC49ICc7JyAuICRTZWxmLT57TGF5b3V0T2JqZWN0fS0+QXNjaWkySHRtbCggVGV4dCA9PiAnQ29sdW1uRmlsdGVyJyAuICRDb2x1bW5OYW1lICkKICAgICAgICAgICAgLiAnPScgLiAkU2VsZi0+e0xheW91dE9iamVjdH0tPkFzY2lpMkh0bWwoIFRleHQgPT4gJEdldENvbHVtbkZpbHRlcnskQ29sdW1uTmFtZX0gKQogICAgfQoKICAgIG15ICRMaW5rUGFnZSA9CiAgICAgICAgJ1N1YmFjdGlvbj1FbGVtZW50O05hbWU9JyAuICRTZWxmLT57TmFtZX0KICAgICAgICAuICc7RmlsdGVyPScgLiAkU2VsZi0+e0ZpbHRlcn0KICAgICAgICAuICc7U29ydEJ5PScgLiAgKCAkU2VsZi0+e1NvcnRCeX0gIHx8ICcnICkKICAgICAgICAuICc7T3JkZXJCeT0nIC4gKCAkU2VsZi0+e09yZGVyQnl9IHx8ICcnICkKICAgICAgICAuICRDb2x1bW5GaWx0ZXJMaW5rCiAgICAgICAgLiAnOyc7CgogICAgaWYgKCAkUGFyYW17Q3VzdG9tZXJJRH0gKSB7CiAgICAgICAgJExpbmtQYWdlIC49ICJDdXN0b21lcklEPSRQYXJhbXtDdXN0b21lcklEfTsiOwogICAgfQogICAgbXkgJVBhZ2VOYXYgPSAkU2VsZi0+e0xheW91dE9iamVjdH0tPlBhZ2VOYXZCYXIoCiAgICAgICAgU3RhcnRIaXQgICAgICAgPT4gJFNlbGYtPntTdGFydEhpdH0sCiAgICAgICAgUGFnZVNob3duICAgICAgPT4gJFNlbGYtPntQYWdlU2hvd259LAogICAgICAgIEFsbEhpdHMgICAgICAgID0+ICRUb3RhbCB8fCAxLAogICAgICAgIEFjdGlvbiAgICAgICAgID0+ICdBY3Rpb249JyAuICRTZWxmLT57TGF5b3V0T2JqZWN0fS0+e0FjdGlvbn0sCiAgICAgICAgTGluayAgICAgICAgICAgPT4gJExpbmtQYWdlLAogICAgICAgIEFKQVhSZXBsYWNlICAgID0+ICdEYXNoYm9hcmQnIC4gJFNlbGYtPntOYW1lfSwKICAgICAgICBJRFByZWZpeCAgICAgICA9PiAnRGFzaGJvYXJkJyAuICRTZWxmLT57TmFtZX0sCiAgICAgICAgS2VlcFNjcmlwdFRhZ3MgPT4gJFBhcmFte0FKQVh9LAogICAgKTsKICAgICRTZWxmLT57TGF5b3V0T2JqZWN0fS0+QmxvY2soCiAgICAgICAgTmFtZSA9PiAnQ29udGVudExhcmdlVGlja2V0R2VuZXJpY0ZpbHRlck5hdkJhcicsCiAgICAgICAgRGF0YSA9PiB7CiAgICAgICAgICAgICV7ICRTZWxmLT57Q29uZmlnfSB9LAogICAgICAgICAgICBOYW1lID0+ICRTZWxmLT57TmFtZX0sCiAgICAgICAgICAgICVQYWdlTmF2LAogICAgICAgIH0sCiAgICApOwoKICAgICMgc2hvdyB0YWJsZSBoZWFkZXIKICAgICRTZWxmLT57TGF5b3V0T2JqZWN0fS0+QmxvY2soCiAgICAgICAgTmFtZSA9PiAnQ29udGVudExhcmdlVGlja2V0R2VuZXJpY0hlYWRlcicsCiAgICAgICAgRGF0YSA9PiB7fSwKICAgICk7CgogICAgIyBkZWZpbmUgd2hpY2ggbWV0YSBpdGVtcyB3aWxsIGJlIHNob3duCiAgICBteSBATWV0YUl0ZW1zID0gJFNlbGYtPntMYXlvdXRPYmplY3R9LT5UaWNrZXRNZXRhSXRlbXNDb3VudCgpOwoKICAgICMgc2hvdyBub24tbGFiZWxlZCB0YWJsZSBoZWFkZXJzCiAgICBteSAkQ1NTID0gJyc7CiAgICBteSAkT3JkZXJCeTsKICAgIGZvciBteSAkSXRlbSAoQE1ldGFJdGVtcykgewogICAgICAgICRDU1MgPSAnJzsKICAgICAgICBteSAkVGl0bGUgPSAkSXRlbTsKICAgICAgICBpZiAoICRTZWxmLT57U29ydEJ5fSAmJiAoICRTZWxmLT57U29ydEJ5fSBlcSAkSXRlbSApICkgewogICAgICAgICAgICBpZiAoICRTZWxmLT57T3JkZXJCeX0gJiYgKCAkU2VsZi0+e09yZGVyQnl9IGVxICdVcCcgKSApIHsKICAgICAgICAgICAgICAgICRPcmRlckJ5ID0gJ0Rvd24nOwogICAgICAgICAgICAgICAgJENTUyAuPSAnIFNvcnREZXNjZW5kaW5nTGFyZ2UnOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgJE9yZGVyQnkgPSAnVXAnOwogICAgICAgICAgICAgICAgJENTUyAuPSAnIFNvcnRBc2NlbmRpbmdMYXJnZSc7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgICMgc2V0IHRpdGxlIGRlc2NyaXB0aW9uCiAgICAgICAgICAgIG15ICRUaXRsZURlc2MgPSAkT3JkZXJCeSBlcSAnRG93bicgPyAnc29ydGVkIGRlc2NlbmRpbmcnIDogJ3NvcnRlZCBhc2NlbmRpbmcnOwogICAgICAgICAgICAkVGl0bGVEZXNjID0gJFNlbGYtPntMYXlvdXRPYmplY3R9LT57TGFuZ3VhZ2VPYmplY3R9LT5HZXQoJFRpdGxlRGVzYyk7CiAgICAgICAgICAgICRUaXRsZSAuPSAnLCAnIC4gJFRpdGxlRGVzYzsKICAgICAgICB9CgogICAgICAgICMgYWRkIHN1cnJvdW5kaW5nIGNvbnRhaW5lcgogICAgICAgICRTZWxmLT57TGF5b3V0T2JqZWN0fS0+QmxvY2soCiAgICAgICAgICAgIE5hbWUgPT4gJ0dlbmVyYWxPdmVydmlld0hlYWRlcicsCiAgICAgICAgKTsKICAgICAgICAkU2VsZi0+e0xheW91dE9iamVjdH0tPkJsb2NrKAogICAgICAgICAgICBOYW1lID0+ICdDb250ZW50TGFyZ2VUaWNrZXRHZW5lcmljSGVhZGVyTWV0YScsCiAgICAgICAgICAgIERhdGEgPT4gewogICAgICAgICAgICAgICAgQ1NTID0+ICRDU1MsCiAgICAgICAgICAgIH0sCiAgICAgICAgKTsKCiAgICAgICAgaWYgKCAkSXRlbSBlcSAnTmV3IEFydGljbGUnICkgewoKICAgICAgICAgICAgJFNlbGYtPntMYXlvdXRPYmplY3R9LT5CbG9jaygKICAgICAgICAgICAgICAgIE5hbWUgPT4gJ0NvbnRlbnRMYXJnZVRpY2tldEdlbmVyaWNIZWFkZXJNZXRhRW1wdHknLAogICAgICAgICAgICAgICAgRGF0YSA9PiB7CiAgICAgICAgICAgICAgICAgICAgSGVhZGVyQ29sdW1uTmFtZSA9PiAkSXRlbSwKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICk7CiAgICAgICAgfQogICAgICAgIGVsc2UgewogICAgICAgICAgICAkU2VsZi0+e0xheW91dE9iamVjdH0tPkJsb2NrKAogICAgICAgICAgICAgICAgTmFtZSA9PiAnQ29udGVudExhcmdlVGlja2V0R2VuZXJpY0hlYWRlck1ldGFMaW5rJywKICAgICAgICAgICAgICAgIERhdGEgPT4gewogICAgICAgICAgICAgICAgICAgICVQYXJhbSwKICAgICAgICAgICAgICAgICAgICBOYW1lICAgICAgICAgICAgID0+ICRTZWxmLT57TmFtZX0sCiAgICAgICAgICAgICAgICAgICAgT3JkZXJCeSAgICAgICAgICA9PiAkT3JkZXJCeSB8fCAnVXAnLAogICAgICAgICAgICAgICAgICAgIEhlYWRlckNvbHVtbk5hbWUgPT4gJEl0ZW0sCiAgICAgICAgICAgICAgICAgICAgVGl0bGUgICAgICAgICAgICA9PiAkVGl0bGUsCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICApOwogICAgICAgIH0KICAgIH0KCiAgICAjIHNob3cgYWxsIG5lZWRlZCBoZWFkZXJzCiAgICBIRUFERVJDT0xVTU46CiAgICBmb3IgbXkgJEhlYWRlckNvbHVtbiAoQENvbHVtbnMpIHsKCiAgICAgICAgIyBza2lwIEN1c3RvbWVySUQgaWYgQ3VzdG9tZXIgSW5mb3JtYXRpb24gQ2VudGVyCiAgICAgICAgaWYgKAogICAgICAgICAgICAkU2VsZi0+e0FjdGlvbn0gZXEgJ0FnZW50Q3VzdG9tZXJJbmZvcm1hdGlvbkNlbnRlcicKICAgICAgICAgICAgJiYgJEhlYWRlckNvbHVtbiBlcSAnQ3VzdG9tZXJJRCcKICAgICAgICAgICAgKQogICAgICAgIHsKICAgICAgICAgICAgbmV4dCBIRUFERVJDT0xVTU47CiAgICAgICAgfQoKICAgICAgICBpZiAoICRIZWFkZXJDb2x1bW4gIX4gbXtcQSBEeW5hbWljRmllbGRffXhtcyApIHsKCiAgICAgICAgICAgICRDU1MgPSAnJzsKICAgICAgICAgICAgbXkgJFRpdGxlID0gJEhlYWRlckNvbHVtbjsKCiAgICAgICAgICAgIGlmICggJFNlbGYtPntTb3J0Qnl9ICYmICggJFNlbGYtPntTb3J0Qnl9IGVxICRIZWFkZXJDb2x1bW4gKSApIHsKICAgICAgICAgICAgICAgIGlmICggJFNlbGYtPntPcmRlckJ5fSAmJiAoICRTZWxmLT57T3JkZXJCeX0gZXEgJ1VwJyApICkgewogICAgICAgICAgICAgICAgICAgICRPcmRlckJ5ID0gJ0Rvd24nOwogICAgICAgICAgICAgICAgICAgICRDU1MgLj0gJyBTb3J0RGVzY2VuZGluZ0xhcmdlJzsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgICRPcmRlckJ5ID0gJ1VwJzsKICAgICAgICAgICAgICAgICAgICAkQ1NTIC49ICcgU29ydEFzY2VuZGluZ0xhcmdlJzsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAjIGFkZCB0aXRsZSBkZXNjcmlwdGlvbgogICAgICAgICAgICAgICAgbXkgJFRpdGxlRGVzYyA9ICRPcmRlckJ5IGVxICdEb3duJyA/ICdzb3J0ZWQgZGVzY2VuZGluZycgOiAnc29ydGVkIGFzY2VuZGluZyc7CiAgICAgICAgICAgICAgICAkVGl0bGVEZXNjID0gJFNlbGYtPntMYXlvdXRPYmplY3R9LT57TGFuZ3VhZ2VPYmplY3R9LT5HZXQoJFRpdGxlRGVzYyk7CiAgICAgICAgICAgICAgICAkVGl0bGUgLj0gJywgJyAuICRUaXRsZURlc2M7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgICMgdHJhbnNsYXRlIHRoZSBjb2x1bW4gbmFtZSB0byB3cml0ZSBpdCBpbiB0aGUgY3VycmVudCBsYW5ndWFnZQogICAgICAgICAgICBteSAkVHJhbnNsYXRlZFdvcmQ7CiAgICAgICAgICAgIGlmICggJEhlYWRlckNvbHVtbiBlcSAnRXNjYWxhdGlvblRpbWUnICkgewogICAgICAgICAgICAgICAgJFRyYW5zbGF0ZWRXb3JkID0gJFNlbGYtPntMYXlvdXRPYmplY3R9LT57TGFuZ3VhZ2VPYmplY3R9LT5HZXQoJ1NlcnZpY2UgVGltZScpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2lmICggJEhlYWRlckNvbHVtbiBlcSAnRXNjYWxhdGlvblJlc3BvbnNlVGltZScgKSB7CiAgICAgICAgICAgICAgICAkVHJhbnNsYXRlZFdvcmQKICAgICAgICAgICAgICAgICAgICA9ICRTZWxmLT57TGF5b3V0T2JqZWN0fS0+e0xhbmd1YWdlT2JqZWN0fS0+R2V0KCdGaXJzdCBSZXNwb25zZSBUaW1lJyk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzaWYgKCAkSGVhZGVyQ29sdW1uIGVxICdFc2NhbGF0aW9uU29sdXRpb25UaW1lJyApIHsKICAgICAgICAgICAgICAgICRUcmFuc2xhdGVkV29yZCA9ICRTZWxmLT57TGF5b3V0T2JqZWN0fS0+e0xhbmd1YWdlT2JqZWN0fS0+R2V0KCdTb2x1dGlvbiBUaW1lJyk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzaWYgKCAkSGVhZGVyQ29sdW1uIGVxICdFc2NhbGF0aW9uVXBkYXRlVGltZScgKSB7CiAgICAgICAgICAgICAgICAkVHJhbnNsYXRlZFdvcmQgPSAkU2VsZi0+e0xheW91dE9iamVjdH0tPntMYW5ndWFnZU9iamVjdH0tPkdldCgnVXBkYXRlIFRpbWUnKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNpZiAoICRIZWFkZXJDb2x1bW4gZXEgJ1BlbmRpbmdUaW1lJyApIHsKICAgICAgICAgICAgICAgICRUcmFuc2xhdGVkV29yZCA9ICRTZWxmLT57TGF5b3V0T2JqZWN0fS0+e0xhbmd1YWdlT2JqZWN0fS0+R2V0KCdQZW5kaW5nIHRpbGwnKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICRUcmFuc2xhdGVkV29yZCA9ICRTZWxmLT57TGF5b3V0T2JqZWN0fS0+e0xhbmd1YWdlT2JqZWN0fS0+R2V0KCRIZWFkZXJDb2x1bW4pOwogICAgICAgICAgICB9CgogICAgICAgICAgICAjIGFkZCBzdXJyb3VuZGluZyBjb250YWluZXIKICAgICAgICAgICAgJFNlbGYtPntMYXlvdXRPYmplY3R9LT5CbG9jaygKICAgICAgICAgICAgICAgIE5hbWUgPT4gJ0dlbmVyYWxPdmVydmlld0hlYWRlcicsCiAgICAgICAgICAgICk7CiAgICAgICAgICAgICRTZWxmLT57TGF5b3V0T2JqZWN0fS0+QmxvY2soCiAgICAgICAgICAgICAgICBOYW1lID0+ICdDb250ZW50TGFyZ2VUaWNrZXRHZW5lcmljSGVhZGVyVGlja2V0SGVhZGVyJywKICAgICAgICAgICAgICAgIERhdGEgPT4ge30sCiAgICAgICAgICAgICk7CgogICAgICAgICAgICBpZiAoICRIZWFkZXJDb2x1bW4gZXEgJ1RpY2tldE51bWJlcicgKSB7CiAgICAgICAgICAgICAgICAkU2VsZi0+e0xheW91dE9iamVjdH0tPkJsb2NrKAogICAgICAgICAgICAgICAgICAgIE5hbWUgPT4gJ0NvbnRlbnRMYXJnZVRpY2tldEdlbmVyaWNIZWFkZXJUaWNrZXROdW1iZXJDb2x1bW4nLAogICAgICAgICAgICAgICAgICAgIERhdGEgPT4gewogICAgICAgICAgICAgICAgICAgICAgICAlUGFyYW0sCiAgICAgICAgICAgICAgICAgICAgICAgIENTUyA9PiAkQ1NTIHx8ICcnLAogICAgICAgICAgICAgICAgICAgICAgICBOYW1lICAgID0+ICRTZWxmLT57TmFtZX0sCiAgICAgICAgICAgICAgICAgICAgICAgIE9yZGVyQnkgPT4gJE9yZGVyQnkgfHwgJ1VwJywKICAgICAgICAgICAgICAgICAgICAgICAgRmlsdGVyICA9PiAkU2VsZi0+e0ZpbHRlcn0sCiAgICAgICAgICAgICAgICAgICAgICAgIFRpdGxlICAgPT4gJFRpdGxlLAogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgbmV4dCBIRUFERVJDT0xVTU47CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIG15ICRGaWx0ZXJUaXRsZSAgICAgPSAkSGVhZGVyQ29sdW1uOwogICAgICAgICAgICBteSAkRmlsdGVyVGl0bGVEZXNjID0gJ2ZpbHRlciBub3QgYWN0aXZlJzsKICAgICAgICAgICAgaWYgKCAkU2VsZi0+e0dldENvbHVtbkZpbHRlclNlbGVjdH0gJiYgJFNlbGYtPntHZXRDb2x1bW5GaWx0ZXJTZWxlY3R9LT57JEhlYWRlckNvbHVtbn0gKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAkQ1NTIC49ICcgRmlsdGVyQWN0aXZlJzsKICAgICAgICAgICAgICAgICRGaWx0ZXJUaXRsZURlc2MgPSAnZmlsdGVyIGFjdGl2ZSc7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgJEZpbHRlclRpdGxlRGVzYyA9ICRTZWxmLT57TGF5b3V0T2JqZWN0fS0+e0xhbmd1YWdlT2JqZWN0fS0+R2V0KCRGaWx0ZXJUaXRsZURlc2MpOwogICAgICAgICAgICAkRmlsdGVyVGl0bGUgLj0gJywgJyAuICRGaWx0ZXJUaXRsZURlc2M7CgogICAgICAgICAgICAkU2VsZi0+e0xheW91dE9iamVjdH0tPkJsb2NrKAogICAgICAgICAgICAgICAgTmFtZSA9PiAnQ29udGVudExhcmdlVGlja2V0R2VuZXJpY0hlYWRlckNvbHVtbicsCiAgICAgICAgICAgICAgICBEYXRhID0+IHsKICAgICAgICAgICAgICAgICAgICBIZWFkZXJDb2x1bW5OYW1lICAgICA9PiAkSGVhZGVyQ29sdW1uICAgfHwgJycsCiAgICAgICAgICAgICAgICAgICAgSGVhZGVyTmFtZVRyYW5zbGF0ZWQgPT4gJFRyYW5zbGF0ZWRXb3JkIHx8ICRIZWFkZXJDb2x1bW4sCiAgICAgICAgICAgICAgICAgICAgQ1NTICAgICAgICAgICAgICAgICAgPT4gJENTUyAgICAgICAgICAgIHx8ICcnLAogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgKTsKCiAgICAgICAgICAgICMgdmVyaWZ5IGlmIGNvbHVtbiBpcyBmaWx0ZXJhYmxlIGFuZCBzb3J0YWJsZQogICAgICAgICAgICBpZiAoCiAgICAgICAgICAgICAgICAkU2VsZi0+e1ZhbGlkU29ydGFibGVDb2x1bW5zfS0+eyRIZWFkZXJDb2x1bW59CiAgICAgICAgICAgICAgICAmJiAkU2VsZi0+e1ZhbGlkRmlsdGVyYWJsZUNvbHVtbnN9LT57JEhlYWRlckNvbHVtbn0KICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgewoKICAgICAgICAgICAgICAgIG15ICRDc3M7CiAgICAgICAgICAgICAgICBpZiAoCiAgICAgICAgICAgICAgICAgICAgJEhlYWRlckNvbHVtbiBlcSAnQ3VzdG9tZXJJRCcKICAgICAgICAgICAgICAgICAgICB8fCAkSGVhZGVyQ29sdW1uIGVxICdSZXNwb25zaWJsZScKICAgICAgICAgICAgICAgICAgICB8fCAkSGVhZGVyQ29sdW1uIGVxICdPd25lcicKICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgJENzcyA9ICdIaWRkZW4nOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICMgdmFyaWFibGUgdG8gc2F2ZSB0aGUgZmlsdGVyJ3MgaHRtbCBjb2RlCiAgICAgICAgICAgICAgICBteSAkQ29sdW1uRmlsdGVySFRNTCA9ICRTZWxmLT5fSW5pdGlhbENvbHVtbkZpbHRlcigKICAgICAgICAgICAgICAgICAgICBDb2x1bW5OYW1lID0+ICRIZWFkZXJDb2x1bW4sCiAgICAgICAgICAgICAgICAgICAgQ3NzICAgICAgICA9PiAkQ3NzLAogICAgICAgICAgICAgICAgKTsKCiAgICAgICAgICAgICAgICAkU2VsZi0+e0xheW91dE9iamVjdH0tPkJsb2NrKAogICAgICAgICAgICAgICAgICAgIE5hbWUgPT4gJ0NvbnRlbnRMYXJnZVRpY2tldEdlbmVyaWNIZWFkZXJDb2x1bW5GaWx0ZXJMaW5rJywKICAgICAgICAgICAgICAgICAgICBEYXRhID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgJVBhcmFtLAogICAgICAgICAgICAgICAgICAgICAgICBIZWFkZXJDb2x1bW5OYW1lICAgICA9PiAkSGVhZGVyQ29sdW1uLAogICAgICAgICAgICAgICAgICAgICAgICBDU1MgICAgICAgICAgICAgICAgICA9PiAkQ1NTLAogICAgICAgICAgICAgICAgICAgICAgICBIZWFkZXJOYW1lVHJhbnNsYXRlZCA9PiAkVHJhbnNsYXRlZFdvcmQgfHwgJEhlYWRlckNvbHVtbiwKICAgICAgICAgICAgICAgICAgICAgICAgQ29sdW1uRmlsdGVyU3RyZyAgICAgPT4gJENvbHVtbkZpbHRlckhUTUwsCiAgICAgICAgICAgICAgICAgICAgICAgIE9yZGVyQnkgICAgICAgICAgICAgID0+ICRPcmRlckJ5IHx8ICdVcCcsCiAgICAgICAgICAgICAgICAgICAgICAgIFNvcnRCeSAgICAgICAgICAgICAgID0+ICRTZWxmLT57U29ydEJ5fSB8fCAnQWdlJywKICAgICAgICAgICAgICAgICAgICAgICAgTmFtZSAgICAgICAgICAgICAgICAgPT4gJFNlbGYtPntOYW1lfSwKICAgICAgICAgICAgICAgICAgICAgICAgVGl0bGUgICAgICAgICAgICAgICAgPT4gJFRpdGxlLAogICAgICAgICAgICAgICAgICAgICAgICBGaWx0ZXJUaXRsZSAgICAgICAgICA9PiAkRmlsdGVyVGl0bGUsCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICk7CgogICAgICAgICAgICAgICAgaWYgKCAkSGVhZGVyQ29sdW1uIGVxICdDdXN0b21lcklEJyApIHsKCiAgICAgICAgICAgICAgICAgICAgJFNlbGYtPntMYXlvdXRPYmplY3R9LT5CbG9jaygKICAgICAgICAgICAgICAgICAgICAgICAgTmFtZSA9PiAnQ29udGVudExhcmdlVGlja2V0R2VuZXJpY0hlYWRlckNvbHVtbkZpbHRlckxpbmtDdXN0b21lcklEU2VhcmNoJywKICAgICAgICAgICAgICAgICAgICAgICAgRGF0YSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtaW5RdWVyeUxlbmd0aCAgICAgID0+IDIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBxdWVyeURlbGF5ICAgICAgICAgID0+IDEwMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1heFJlc3VsdHNEaXNwbGF5ZWQgPT4gMjAsCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2lmICggJEhlYWRlckNvbHVtbiBlcSAnUmVzcG9uc2libGUnIHx8ICRIZWFkZXJDb2x1bW4gZXEgJ093bmVyJyApIHsKCiAgICAgICAgICAgICAgICAgICAgJFNlbGYtPntMYXlvdXRPYmplY3R9LT5CbG9jaygKICAgICAgICAgICAgICAgICAgICAgICAgTmFtZSA9PiAnQ29udGVudExhcmdlVGlja2V0R2VuZXJpY0hlYWRlckNvbHVtbkZpbHRlckxpbmtVc2VyU2VhcmNoJywKICAgICAgICAgICAgICAgICAgICAgICAgRGF0YSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtaW5RdWVyeUxlbmd0aCAgICAgID0+IDIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBxdWVyeURlbGF5ICAgICAgICAgID0+IDEwMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1heFJlc3VsdHNEaXNwbGF5ZWQgPT4gMjAsCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQoKICAgICAgICAgICAgIyB2ZXJpZnkgaWYgY29sdW1uIGlzIGp1c3QgZmlsdGVyYWJsZQogICAgICAgICAgICBlbHNpZiAoICRTZWxmLT57VmFsaWRGaWx0ZXJhYmxlQ29sdW1uc30tPnskSGVhZGVyQ29sdW1ufSApIHsKCiAgICAgICAgICAgICAgICBteSAkQ3NzOwogICAgICAgICAgICAgICAgaWYgKCAkSGVhZGVyQ29sdW1uIGVxICdDdXN0b21lclVzZXJJRCcgKSB7CiAgICAgICAgICAgICAgICAgICAgJENzcyA9ICdIaWRkZW4nOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICMgdmFyaWFibGUgdG8gc2F2ZSB0aGUgZmlsdGVyJ3MgaHRtbCBjb2RlCiAgICAgICAgICAgICAgICBteSAkQ29sdW1uRmlsdGVySFRNTCA9ICRTZWxmLT5fSW5pdGlhbENvbHVtbkZpbHRlcigKICAgICAgICAgICAgICAgICAgICBDb2x1bW5OYW1lID0+ICRIZWFkZXJDb2x1bW4sCiAgICAgICAgICAgICAgICAgICAgQ3NzICAgICAgICA9PiAkQ3NzLAogICAgICAgICAgICAgICAgKTsKCiAgICAgICAgICAgICAgICAkU2VsZi0+e0xheW91dE9iamVjdH0tPkJsb2NrKAogICAgICAgICAgICAgICAgICAgIE5hbWUgPT4gJ0NvbnRlbnRMYXJnZVRpY2tldEdlbmVyaWNIZWFkZXJDb2x1bW5GaWx0ZXInLAogICAgICAgICAgICAgICAgICAgIERhdGEgPT4gewogICAgICAgICAgICAgICAgICAgICAgICAlUGFyYW0sCiAgICAgICAgICAgICAgICAgICAgICAgIEhlYWRlckNvbHVtbk5hbWUgICAgID0+ICRIZWFkZXJDb2x1bW4sCiAgICAgICAgICAgICAgICAgICAgICAgIENTUyAgICAgICAgICAgICAgICAgID0+ICRDU1MsCiAgICAgICAgICAgICAgICAgICAgICAgIEhlYWRlck5hbWVUcmFuc2xhdGVkID0+ICRUcmFuc2xhdGVkV29yZCB8fCAkSGVhZGVyQ29sdW1uLAogICAgICAgICAgICAgICAgICAgICAgICBDb2x1bW5GaWx0ZXJTdHJnICAgICA9PiAkQ29sdW1uRmlsdGVySFRNTCwKICAgICAgICAgICAgICAgICAgICAgICAgTmFtZSAgICAgICAgICAgICAgICAgPT4gJFNlbGYtPntOYW1lfSwKICAgICAgICAgICAgICAgICAgICAgICAgVGl0bGUgICAgICAgICAgICAgICAgPT4gJFRpdGxlLAogICAgICAgICAgICAgICAgICAgICAgICBGaWx0ZXJUaXRsZSAgICAgICAgICA9PiAkRmlsdGVyVGl0bGUsCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICk7CgogICAgICAgICAgICAgICAgaWYgKCAkSGVhZGVyQ29sdW1uIGVxICdDdXN0b21lclVzZXJJRCcgKSB7CgogICAgICAgICAgICAgICAgICAgICRTZWxmLT57TGF5b3V0T2JqZWN0fS0+QmxvY2soCiAgICAgICAgICAgICAgICAgICAgICAgIE5hbWUgPT4gJ0NvbnRlbnRMYXJnZVRpY2tldEdlbmVyaWNIZWFkZXJDb2x1bW5GaWx0ZXJMaW5rQ3VzdG9tZXJVc2VyU2VhcmNoJywKICAgICAgICAgICAgICAgICAgICAgICAgRGF0YSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtaW5RdWVyeUxlbmd0aCAgICAgID0+IDIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBxdWVyeURlbGF5ICAgICAgICAgID0+IDEwMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1heFJlc3VsdHNEaXNwbGF5ZWQgPT4gMjAsCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQoKICAgICAgICAgICAgIyB2ZXJpZnkgaWYgY29sdW1uIGlzIGp1c3Qgc29ydGFibGUKICAgICAgICAgICAgZWxzaWYgKCAkU2VsZi0+e1ZhbGlkU29ydGFibGVDb2x1bW5zfS0+eyRIZWFkZXJDb2x1bW59ICkgewogICAgICAgICAgICAgICAgJFNlbGYtPntMYXlvdXRPYmplY3R9LT5CbG9jaygKICAgICAgICAgICAgICAgICAgICBOYW1lID0+ICdDb250ZW50TGFyZ2VUaWNrZXRHZW5lcmljSGVhZGVyQ29sdW1uTGluaycsCiAgICAgICAgICAgICAgICAgICAgRGF0YSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgICVQYXJhbSwKICAgICAgICAgICAgICAgICAgICAgICAgSGVhZGVyQ29sdW1uTmFtZSAgICAgPT4gJEhlYWRlckNvbHVtbiwKICAgICAgICAgICAgICAgICAgICAgICAgQ1NTICAgICAgICAgICAgICAgICAgPT4gJENTUywKICAgICAgICAgICAgICAgICAgICAgICAgSGVhZGVyTmFtZVRyYW5zbGF0ZWQgPT4gJFRyYW5zbGF0ZWRXb3JkIHx8ICRIZWFkZXJDb2x1bW4sCiAgICAgICAgICAgICAgICAgICAgICAgIE9yZGVyQnkgICAgICAgICAgICAgID0+ICRPcmRlckJ5IHx8ICdVcCcsCiAgICAgICAgICAgICAgICAgICAgICAgIFNvcnRCeSAgICAgICAgICAgICAgID0+ICRTZWxmLT57U29ydEJ5fSB8fCAkSGVhZGVyQ29sdW1uLAogICAgICAgICAgICAgICAgICAgICAgICBOYW1lICAgICAgICAgICAgICAgICA9PiAkU2VsZi0+e05hbWV9LAogICAgICAgICAgICAgICAgICAgICAgICBUaXRsZSAgICAgICAgICAgICAgICA9PiAkVGl0bGUsCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAkU2VsZi0+e0xheW91dE9iamVjdH0tPkJsb2NrKAogICAgICAgICAgICAgICAgICAgIE5hbWUgPT4gJ0NvbnRlbnRMYXJnZVRpY2tldEdlbmVyaWNIZWFkZXJDb2x1bW5FbXB0eScsCiAgICAgICAgICAgICAgICAgICAgRGF0YSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgICVQYXJhbSwKICAgICAgICAgICAgICAgICAgICAgICAgSGVhZGVyTmFtZVRyYW5zbGF0ZWQgPT4gJFRyYW5zbGF0ZWRXb3JkIHx8ICRIZWFkZXJDb2x1bW4sCiAgICAgICAgICAgICAgICAgICAgICAgIEhlYWRlckNvbHVtbk5hbWUgICAgID0+ICRIZWFkZXJDb2x1bW4sCiAgICAgICAgICAgICAgICAgICAgICAgIENTUyAgICAgICAgICAgICAgICAgID0+ICRDU1MsCiAgICAgICAgICAgICAgICAgICAgICAgIFRpdGxlICAgICAgICAgICAgICAgID0+ICRUaXRsZSwKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgIyBEeW5hbWljIGZpZWxkcwogICAgICAgIGVsc2UgewogICAgICAgICAgICBteSAkRHluYW1pY0ZpZWxkQ29uZmlnOwogICAgICAgICAgICBteSAkREZDb2x1bW4gPSAkSGVhZGVyQ29sdW1uOwogICAgICAgICAgICAkREZDb2x1bW4gPX4gcy9EeW5hbWljRmllbGRfLy9nOwogICAgICAgICAgICBEWU5BTUlDRklFTEQ6CiAgICAgICAgICAgIGZvciBteSAkREZDb25maWcgKCBAeyAkU2VsZi0+e0R5bmFtaWNGaWVsZH0gfSApIHsKICAgICAgICAgICAgICAgIG5leHQgRFlOQU1JQ0ZJRUxEIGlmICFJc0hhc2hSZWZXaXRoRGF0YSgkREZDb25maWcpOwogICAgICAgICAgICAgICAgbmV4dCBEWU5BTUlDRklFTEQgaWYgJERGQ29uZmlnLT57TmFtZX0gbmUgJERGQ29sdW1uOwoKICAgICAgICAgICAgICAgICREeW5hbWljRmllbGRDb25maWcgPSAkREZDb25maWc7CiAgICAgICAgICAgICAgICBsYXN0IERZTkFNSUNGSUVMRDsKICAgICAgICAgICAgfQogICAgICAgICAgICBuZXh0IEhFQURFUkNPTFVNTiBpZiAhSXNIYXNoUmVmV2l0aERhdGEoJER5bmFtaWNGaWVsZENvbmZpZyk7CgogICAgICAgICAgICBteSAkTGFiZWwgPSAkRHluYW1pY0ZpZWxkQ29uZmlnLT57TGFiZWx9OwoKICAgICAgICAgICAgbXkgJFRyYW5zbGF0ZWRMYWJlbCA9ICRTZWxmLT57TGF5b3V0T2JqZWN0fS0+e0xhbmd1YWdlT2JqZWN0fS0+R2V0KCRMYWJlbCk7CgogICAgICAgICAgICBteSAkRHluYW1pY0ZpZWxkTmFtZSA9ICdEeW5hbWljRmllbGRfJyAuICREeW5hbWljRmllbGRDb25maWctPntOYW1lfTsKCiAgICAgICAgICAgIG15ICRDU1MgICAgICAgICAgICAgPSAnJzsKICAgICAgICAgICAgbXkgJEZpbHRlclRpdGxlICAgICA9ICRMYWJlbDsKICAgICAgICAgICAgbXkgJEZpbHRlclRpdGxlRGVzYyA9ICdmaWx0ZXIgbm90IGFjdGl2ZSc7CiAgICAgICAgICAgIGlmICgKICAgICAgICAgICAgICAgICRTZWxmLT57R2V0Q29sdW1uRmlsdGVyU2VsZWN0fQogICAgICAgICAgICAgICAgJiYgZGVmaW5lZCAkU2VsZi0+e0dldENvbHVtbkZpbHRlclNlbGVjdH0tPnskRHluYW1pY0ZpZWxkTmFtZX0KICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgJENTUyAuPSAnRmlsdGVyQWN0aXZlICc7CiAgICAgICAgICAgICAgICAkRmlsdGVyVGl0bGVEZXNjID0gJ2ZpbHRlciBhY3RpdmUnOwogICAgICAgICAgICB9CiAgICAgICAgICAgICRGaWx0ZXJUaXRsZURlc2MgPSAkU2VsZi0+e0xheW91dE9iamVjdH0tPntMYW5ndWFnZU9iamVjdH0tPkdldCgkRmlsdGVyVGl0bGVEZXNjKTsKICAgICAgICAgICAgJEZpbHRlclRpdGxlIC49ICcsICcgLiAkRmlsdGVyVGl0bGVEZXNjOwoKICAgICAgICAgICAgIyBnZXQgZmllbGQgc29ydGFibGUgY29uZGl0aW9uCiAgICAgICAgICAgIG15ICRJc1NvcnRhYmxlID0gJFNlbGYtPntCYWNrZW5kT2JqZWN0fS0+SGFzQmVoYXZpb3IoCiAgICAgICAgICAgICAgICBEeW5hbWljRmllbGRDb25maWcgPT4gJER5bmFtaWNGaWVsZENvbmZpZywKICAgICAgICAgICAgICAgIEJlaGF2aW9yICAgICAgICAgICA9PiAnSXNTb3J0YWJsZScsCiAgICAgICAgICAgICk7CgogICAgICAgICAgICAjIHNldCB0aXRsZQogICAgICAgICAgICBteSAkVGl0bGUgPSAkTGFiZWw7CgogICAgICAgICAgICAjIGFkZCBzdXJyb3VuZGluZyBjb250YWluZXIKICAgICAgICAgICAgJFNlbGYtPntMYXlvdXRPYmplY3R9LT5CbG9jaygKICAgICAgICAgICAgICAgIE5hbWUgPT4gJ0dlbmVyYWxPdmVydmlld0hlYWRlcicsCiAgICAgICAgICAgICk7CiAgICAgICAgICAgICRTZWxmLT57TGF5b3V0T2JqZWN0fS0+QmxvY2soCiAgICAgICAgICAgICAgICBOYW1lID0+ICdDb250ZW50TGFyZ2VUaWNrZXRHZW5lcmljSGVhZGVyVGlja2V0SGVhZGVyJywKICAgICAgICAgICAgICAgIERhdGEgPT4ge30sCiAgICAgICAgICAgICk7CgogICAgICAgICAgICBpZiAoJElzU29ydGFibGUpIHsKICAgICAgICAgICAgICAgIG15ICRPcmRlckJ5OwogICAgICAgICAgICAgICAgaWYgKAogICAgICAgICAgICAgICAgICAgICRTZWxmLT57U29ydEJ5fQogICAgICAgICAgICAgICAgICAgICYmICggJFNlbGYtPntTb3J0Qnl9IGVxICggJ0R5bmFtaWNGaWVsZF8nIC4gJER5bmFtaWNGaWVsZENvbmZpZy0+e05hbWV9ICkgKQogICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBpZiAoICRTZWxmLT57T3JkZXJCeX0gJiYgKCAkU2VsZi0+e09yZGVyQnl9IGVxICdVcCcgKSApIHsKICAgICAgICAgICAgICAgICAgICAgICAgJE9yZGVyQnkgPSAnRG93bic7CiAgICAgICAgICAgICAgICAgICAgICAgICRDU1MgLj0gJyBTb3J0RGVzY2VuZGluZ0xhcmdlJzsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICRPcmRlckJ5ID0gJ1VwJzsKICAgICAgICAgICAgICAgICAgICAgICAgJENTUyAuPSAnIFNvcnRBc2NlbmRpbmdMYXJnZSc7CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAjIGFkZCB0aXRsZSBkZXNjcmlwdGlvbgogICAgICAgICAgICAgICAgICAgIG15ICRUaXRsZURlc2MgPSAkT3JkZXJCeSBlcSAnRG93bicgPyAnc29ydGVkIGRlc2NlbmRpbmcnIDogJ3NvcnRlZCBhc2NlbmRpbmcnOwogICAgICAgICAgICAgICAgICAgICRUaXRsZURlc2MgPSAkU2VsZi0+e0xheW91dE9iamVjdH0tPntMYW5ndWFnZU9iamVjdH0tPkdldCgkVGl0bGVEZXNjKTsKICAgICAgICAgICAgICAgICAgICAkVGl0bGUgLj0gJywgJyAuICRUaXRsZURlc2M7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgJFNlbGYtPntMYXlvdXRPYmplY3R9LT5CbG9jaygKICAgICAgICAgICAgICAgICAgICBOYW1lID0+ICdDb250ZW50TGFyZ2VUaWNrZXRHZW5lcmljSGVhZGVyQ29sdW1uJywKICAgICAgICAgICAgICAgICAgICBEYXRhID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgSGVhZGVyQ29sdW1uTmFtZSA9PiAkRHluYW1pY0ZpZWxkTmFtZSB8fCAnJywKICAgICAgICAgICAgICAgICAgICAgICAgQ1NTID0+ICRDU1MgfHwgJycsCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICk7CgogICAgICAgICAgICAgIyBjaGVjayBpZiB0aGUgZHluYW1pYyBmaWVsZCBpcyBzb3J0YWJsZSBhbmQgZmlsdHJhYmxlIChzb3J0YWJsZSBjaGVjayB3YXMgbWFkZSBiZWZvcmUpCiAgICAgICAgICAgICAgICBpZiAoICRTZWxmLT57VmFsaWRGaWx0ZXJhYmxlQ29sdW1uc30tPnskRHluYW1pY0ZpZWxkTmFtZX0gKSB7CgogICAgICAgICAgICAgICAgICAgICMgdmFyaWFibGUgdG8gc2F2ZSB0aGUgZmlsdGVyJ3MgaHRtbCBjb2RlCiAgICAgICAgICAgICAgICAgICAgbXkgJENvbHVtbkZpbHRlckhUTUwgPSAkU2VsZi0+X0luaXRpYWxDb2x1bW5GaWx0ZXIoCiAgICAgICAgICAgICAgICAgICAgICAgIENvbHVtbk5hbWUgPT4gJER5bmFtaWNGaWVsZE5hbWUsCiAgICAgICAgICAgICAgICAgICAgICAgIExhYmVsICAgICAgPT4gJExhYmVsLAogICAgICAgICAgICAgICAgICAgICk7CgogICAgICAgICAgICAgICAgICAgICMgb3V0cHV0IHNvcnRhYmxlIGFuZCBmaWx0cmFibGUgZHluYW1pYyBmaWVsZAogICAgICAgICAgICAgICAgICAgICRTZWxmLT57TGF5b3V0T2JqZWN0fS0+QmxvY2soCiAgICAgICAgICAgICAgICAgICAgICAgIE5hbWUgPT4gJ0NvbnRlbnRMYXJnZVRpY2tldEdlbmVyaWNIZWFkZXJDb2x1bW5GaWx0ZXJMaW5rJywKICAgICAgICAgICAgICAgICAgICAgICAgRGF0YSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAlUGFyYW0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBIZWFkZXJDb2x1bW5OYW1lICAgICA9PiAkRHluYW1pY0ZpZWxkTmFtZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIENTUyAgICAgICAgICAgICAgICAgID0+ICRDU1MsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBIZWFkZXJOYW1lVHJhbnNsYXRlZCA9PiAkVHJhbnNsYXRlZExhYmVsIHx8ICREeW5hbWljRmllbGROYW1lLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgQ29sdW1uRmlsdGVyU3RyZyAgICAgPT4gJENvbHVtbkZpbHRlckhUTUwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBPcmRlckJ5ICAgICAgICAgICAgICA9PiAkT3JkZXJCeSB8fCAnVXAnLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgU29ydEJ5ICAgICAgICAgICAgICAgPT4gJFNlbGYtPntTb3J0Qnl9IHx8ICdBZ2UnLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgTmFtZSAgICAgICAgICAgICAgICAgPT4gJFNlbGYtPntOYW1lfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIFRpdGxlICAgICAgICAgICAgICAgID0+ICRUaXRsZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIEZpbHRlclRpdGxlICAgICAgICAgID0+ICRGaWx0ZXJUaXRsZSwKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICMgb3RoZXJ3aXNlIHRoZSBkeW5hbWljIGZpZWxkIGlzIG9ubHkgc29ydGFibGUgKHNvcnRhYmxlIGNoZWNrIHdhcyBtYWRlIGJlZm9yZSkKICAgICAgICAgICAgICAgIGVsc2UgewoKICAgICAgICAgICAgICAgICAgICAjIG91dHB1dCBzb3J0YWJsZSBkeW5hbWljIGZpZWxkCiAgICAgICAgICAgICAgICAgICAgJFNlbGYtPntMYXlvdXRPYmplY3R9LT5CbG9jaygKICAgICAgICAgICAgICAgICAgICAgICAgTmFtZSA9PiAnQ29udGVudExhcmdlVGlja2V0R2VuZXJpY0hlYWRlckNvbHVtbkxpbmsnLAogICAgICAgICAgICAgICAgICAgICAgICBEYXRhID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICVQYXJhbSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIEhlYWRlckNvbHVtbk5hbWUgICAgID0+ICREeW5hbWljRmllbGROYW1lLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgQ1NTICAgICAgICAgICAgICAgICAgPT4gJENTUywKICAgICAgICAgICAgICAgICAgICAgICAgICAgIEhlYWRlck5hbWVUcmFuc2xhdGVkID0+ICRUcmFuc2xhdGVkTGFiZWwgfHwgJER5bmFtaWNGaWVsZE5hbWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBPcmRlckJ5ICAgICAgICAgICAgICA9PiAkT3JkZXJCeSB8fCAnVXAnLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgU29ydEJ5ICAgICAgICAgICAgICAgPT4gJFNlbGYtPntTb3J0Qnl9IHx8ICREeW5hbWljRmllbGROYW1lLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgTmFtZSAgICAgICAgICAgICAgICAgPT4gJFNlbGYtPntOYW1lfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIFRpdGxlICAgICAgICAgICAgICAgID0+ICRUaXRsZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIEZpbHRlclRpdGxlICAgICAgICAgID0+ICRGaWx0ZXJUaXRsZSwKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CgogICAgICAgICAgICAjIGlmIHRoZSBkeW5hbWljIGZpZWxkIHdhcyBub3Qgc29ydGFibGUgKGNoZWNrIHdhcyBtYWRlIGFuZCBmYWlsIGJlZm9yZSkKICAgICAgICAgICAgIyBpdCBtaWdodCBiZSBmaWx0cmFibGUKICAgICAgICAgICAgZWxzaWYgKCAkU2VsZi0+e1ZhbGlkRmlsdGVyYWJsZUNvbHVtbnN9LT57JER5bmFtaWNGaWVsZE5hbWV9ICkgewoKICAgICAgICAgICAgICAgICRTZWxmLT57TGF5b3V0T2JqZWN0fS0+QmxvY2soCiAgICAgICAgICAgICAgICAgICAgTmFtZSA9PiAnQ29udGVudExhcmdlVGlja2V0R2VuZXJpY0hlYWRlckNvbHVtbicsCiAgICAgICAgICAgICAgICAgICAgRGF0YSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIEhlYWRlckNvbHVtbk5hbWUgPT4gJER5bmFtaWNGaWVsZE5hbWUgfHwgJycsCiAgICAgICAgICAgICAgICAgICAgICAgIENTUyAgICAgICAgICAgICAgPT4gJENTUyAgICAgICAgICAgICAgfHwgJycsCiAgICAgICAgICAgICAgICAgICAgICAgIFRpdGxlICAgICAgICAgICAgPT4gJFRpdGxlLAogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICApOwoKICAgICAgICAgICAgICAgICMgdmFyaWFibGUgdG8gc2F2ZSB0aGUgZmlsdGVyJ3MgaHRtbCBjb2RlCiAgICAgICAgICAgICAgICBteSAkQ29sdW1uRmlsdGVySFRNTCA9ICRTZWxmLT5fSW5pdGlhbENvbHVtbkZpbHRlcigKICAgICAgICAgICAgICAgICAgICBDb2x1bW5OYW1lID0+ICREeW5hbWljRmllbGROYW1lLAogICAgICAgICAgICAgICAgICAgIExhYmVsICAgICAgPT4gJExhYmVsLAogICAgICAgICAgICAgICAgKTsKCiAgICAgICAgICAgICAgICAjIG91dHB1dCBmaWx0cmFibGUgKG5vdCBzb3J0YWJsZSkgZHluYW1pYyBmaWVsZAogICAgICAgICAgICAgICAgJFNlbGYtPntMYXlvdXRPYmplY3R9LT5CbG9jaygKICAgICAgICAgICAgICAgICAgICBOYW1lID0+ICdDb250ZW50TGFyZ2VUaWNrZXRHZW5lcmljSGVhZGVyQ29sdW1uRmlsdGVyJywKICAgICAgICAgICAgICAgICAgICBEYXRhID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgJVBhcmFtLAogICAgICAgICAgICAgICAgICAgICAgICBIZWFkZXJDb2x1bW5OYW1lICAgICA9PiAkRHluYW1pY0ZpZWxkTmFtZSwKICAgICAgICAgICAgICAgICAgICAgICAgQ1NTICAgICAgICAgICAgICAgICAgPT4gJENTUywKICAgICAgICAgICAgICAgICAgICAgICAgSGVhZGVyTmFtZVRyYW5zbGF0ZWQgPT4gJFRyYW5zbGF0ZWRMYWJlbCB8fCAkRHluYW1pY0ZpZWxkTmFtZSwKICAgICAgICAgICAgICAgICAgICAgICAgQ29sdW1uRmlsdGVyU3RyZyAgICAgPT4gJENvbHVtbkZpbHRlckhUTUwsCiAgICAgICAgICAgICAgICAgICAgICAgIE5hbWUgICAgICAgICAgICAgICAgID0+ICRTZWxmLT57TmFtZX0sCiAgICAgICAgICAgICAgICAgICAgICAgIFRpdGxlICAgICAgICAgICAgICAgID0+ICRUaXRsZSwKICAgICAgICAgICAgICAgICAgICAgICAgRmlsdGVyVGl0bGUgICAgICAgICAgPT4gJEZpbHRlclRpdGxlLAogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICApOwogICAgICAgICAgICB9CgogICAgICAgICAgICAjIG90aGVyd2lzZSB0aGUgZmllbGQgaXMgbm90IGZpbHRyYWJsZSBhbmQgbm90IHNvcnRhYmxlCiAgICAgICAgICAgIGVsc2UgewoKICAgICAgICAgICAgICAgICRTZWxmLT57TGF5b3V0T2JqZWN0fS0+QmxvY2soCiAgICAgICAgICAgICAgICAgICAgTmFtZSA9PiAnQ29udGVudExhcmdlVGlja2V0R2VuZXJpY0hlYWRlckNvbHVtbicsCiAgICAgICAgICAgICAgICAgICAgRGF0YSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIEhlYWRlckNvbHVtbk5hbWUgPT4gJER5bmFtaWNGaWVsZE5hbWUgfHwgJycsCiAgICAgICAgICAgICAgICAgICAgICAgIENTUyA9PiAkQ1NTIHx8ICcnLAogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICApOwoKICAgICAgICAgICAgICAgICMgb3V0cHV0IHBsYWluIGR5bmFtaWMgZmllbGQgaGVhZGVyIChub3QgZmlsdHJhYmxlLCBub3Qgc29ydGFibGUpCiAgICAgICAgICAgICAgICAkU2VsZi0+e0xheW91dE9iamVjdH0tPkJsb2NrKAogICAgICAgICAgICAgICAgICAgIE5hbWUgPT4gJ0NvbnRlbnRMYXJnZVRpY2tldEdlbmVyaWNIZWFkZXJDb2x1bW5FbXB0eScsCiAgICAgICAgICAgICAgICAgICAgRGF0YSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgICVQYXJhbSwKICAgICAgICAgICAgICAgICAgICAgICAgSGVhZGVyTmFtZVRyYW5zbGF0ZWQgPT4gJFRyYW5zbGF0ZWRMYWJlbCB8fCAkRHluYW1pY0ZpZWxkTmFtZSwKICAgICAgICAgICAgICAgICAgICAgICAgSGVhZGVyQ29sdW1uTmFtZSAgICAgPT4gJER5bmFtaWNGaWVsZE5hbWUsCiAgICAgICAgICAgICAgICAgICAgICAgIENTUyAgICAgICAgICAgICAgICAgID0+ICRDU1MsCiAgICAgICAgICAgICAgICAgICAgICAgIFRpdGxlICAgICAgICAgICAgICAgID0+ICRUaXRsZSwKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KCiAgICAjIHNob3cgdGlja2V0cwogICAgbXkgJENvdW50ID0gMDsKICAgIGZvciBteSAkVGlja2V0SUQgKCBAeyRUaWNrZXRJRHN9ICkgewogICAgICAgICRDb3VudCsrOwogICAgICAgIG5leHQgaWYgJENvdW50IDwgJFNlbGYtPntTdGFydEhpdH07CiAgICAgICAgbXkgJVRpY2tldCA9ICRTZWxmLT57VGlja2V0T2JqZWN0fS0+VGlja2V0R2V0KAogICAgICAgICAgICBUaWNrZXRJRCAgICAgID0+ICRUaWNrZXRJRCwKICAgICAgICAgICAgVXNlcklEICAgICAgICA9PiAkU2VsZi0+e1VzZXJJRH0sCiAgICAgICAgICAgIER5bmFtaWNGaWVsZHMgPT4gMCwKICAgICAgICApOwoKICAgICAgICAjIHNldCBhIGRlZmF1bHQgdGl0bGUgaWYgdGlja2V0IGhhcyBubyB0aXRsZQogICAgICAgIGlmICggISRUaWNrZXR7VGl0bGV9ICkgewogICAgICAgICAgICAkVGlja2V0e1RpdGxlfSA9ICRTZWxmLT57TGF5b3V0T2JqZWN0fS0+e0xhbmd1YWdlT2JqZWN0fS0+R2V0KAogICAgICAgICAgICAgICAgJ1RoaXMgdGlja2V0IGhhcyBubyB0aXRsZSBvciBzdWJqZWN0JwogICAgICAgICAgICApOwogICAgICAgIH0KCiAgICAgICAgIyBjcmVhdGUgaHVtYW4gYWdlCiAgICAgICAgaWYgKCAkU2VsZi0+e0NvbmZpZ30tPntUaW1lfSBuZSAnQWdlJyApIHsKICAgICAgICAgICAgJFRpY2tldHtUaW1lfSA9ICRTZWxmLT57TGF5b3V0T2JqZWN0fS0+Q3VzdG9tZXJBZ2VJbkhvdXJzKAogICAgICAgICAgICAgICAgQWdlICAgPT4gJFRpY2tldHsgJFNlbGYtPntDb25maWd9LT57VGltZX0gfSwKICAgICAgICAgICAgICAgIFNwYWNlID0+ICcgJywKICAgICAgICAgICAgKTsKICAgICAgICB9CiAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICRUaWNrZXR7VGltZX0gPSAkU2VsZi0+e0xheW91dE9iamVjdH0tPkN1c3RvbWVyQWdlKAogICAgICAgICAgICAgICAgQWdlICAgPT4gJFRpY2tldHsgJFNlbGYtPntDb25maWd9LT57VGltZX0gfSwKICAgICAgICAgICAgICAgIFNwYWNlID0+ICcgJywKICAgICAgICAgICAgKTsKICAgICAgICB9CgogICAgICAgICMgc2hvdyB0aWNrZXQKICAgICAgICAkU2VsZi0+e0xheW91dE9iamVjdH0tPkJsb2NrKAogICAgICAgICAgICBOYW1lID0+ICdDb250ZW50TGFyZ2VUaWNrZXRHZW5lcmljUm93JywKICAgICAgICAgICAgRGF0YSA9PiBcJVRpY2tldCwKICAgICAgICApOwoKICAgICAgICAjIHNob3cgdGlja2V0IGZsYWdzCiAgICAgICAgbXkgQFRpY2tldE1ldGFJdGVtcyA9ICRTZWxmLT57TGF5b3V0T2JqZWN0fS0+VGlja2V0TWV0YUl0ZW1zKAogICAgICAgICAgICBUaWNrZXQgPT4gXCVUaWNrZXQsCiAgICAgICAgKTsKICAgICAgICBmb3IgbXkgJEl0ZW0gKEBUaWNrZXRNZXRhSXRlbXMpIHsKCiAgICAgICAgICAgICRTZWxmLT57TGF5b3V0T2JqZWN0fS0+QmxvY2soCiAgICAgICAgICAgICAgICBOYW1lID0+ICdHZW5lcmFsT3ZlcnZpZXdSb3cnLAogICAgICAgICAgICApOwogICAgICAgICAgICAkU2VsZi0+e0xheW91dE9iamVjdH0tPkJsb2NrKAogICAgICAgICAgICAgICAgTmFtZSA9PiAnQ29udGVudExhcmdlVGlja2V0R2VuZXJpY1Jvd01ldGEnLAogICAgICAgICAgICAgICAgRGF0YSA9PiB7fSwKICAgICAgICAgICAgKTsKICAgICAgICAgICAgaWYgKCRJdGVtKSB7CiAgICAgICAgICAgICAgICAkU2VsZi0+e0xheW91dE9iamVjdH0tPkJsb2NrKAogICAgICAgICAgICAgICAgICAgIE5hbWUgPT4gJ0NvbnRlbnRMYXJnZVRpY2tldEdlbmVyaWNSb3dNZXRhSW1hZ2UnLAogICAgICAgICAgICAgICAgICAgIERhdGEgPT4gJEl0ZW0sCiAgICAgICAgICAgICAgICApOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICAjIHNhdmUgY29sdW1uIGNvbnRlbnQKICAgICAgICBteSAkRGF0YVZhbHVlOwoKICAgICAgICAjIHNob3cgYWxsIG5lZWRlZCBjb2x1bW5zCiAgICAgICAgQ09MVU1OOgogICAgICAgIGZvciBteSAkQ29sdW1uIChAQ29sdW1ucykgewoKICAgICAgICAgICAgIyBza2lwIEN1c3RvbWVySUQgaWYgQ3VzdG9tZXIgSW5mb3JtYXRpb24gQ2VudGVyCiAgICAgICAgICAgIGlmICgKICAgICAgICAgICAgICAgICRTZWxmLT57QWN0aW9ufSBlcSAnQWdlbnRDdXN0b21lckluZm9ybWF0aW9uQ2VudGVyJwogICAgICAgICAgICAgICAgJiYgJENvbHVtbiBlcSAnQ3VzdG9tZXJJRCcKICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgbmV4dCBDT0xVTU47CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmICggJENvbHVtbiAhfiBte1xBIER5bmFtaWNGaWVsZF99eG1zICkgewoKICAgICAgICAgICAgICAgICRTZWxmLT57TGF5b3V0T2JqZWN0fS0+QmxvY2soCiAgICAgICAgICAgICAgICAgICAgTmFtZSA9PiAnR2VuZXJhbE92ZXJ2aWV3Um93JywKICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICAkU2VsZi0+e0xheW91dE9iamVjdH0tPkJsb2NrKAogICAgICAgICAgICAgICAgICAgIE5hbWUgPT4gJ0NvbnRlbnRMYXJnZVRpY2tldEdlbmVyaWNUaWNrZXRDb2x1bW4nLAogICAgICAgICAgICAgICAgICAgIERhdGEgPT4ge30sCiAgICAgICAgICAgICAgICApOwoKICAgICAgICAgICAgICAgIG15ICRCbG9ja1R5cGUgPSAnJzsKICAgICAgICAgICAgICAgIG15ICRDU1NDbGFzcyAgPSAnJzsKCiAgICAgICAgICAgICAgICBpZiAoICRDb2x1bW4gZXEgJ1RpY2tldE51bWJlcicgKSB7CiAgICAgICAgICAgICAgICAgICAgJFNlbGYtPntMYXlvdXRPYmplY3R9LT5CbG9jaygKICAgICAgICAgICAgICAgICAgICAgICAgTmFtZSA9PiAnQ29udGVudExhcmdlVGlja2V0R2VuZXJpY1RpY2tldE51bWJlcicsCiAgICAgICAgICAgICAgICAgICAgICAgIERhdGEgPT4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgJVRpY2tldCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIFRpdGxlID0+ICRUaWNrZXR7VGl0bGV9LAogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICAgICAgbmV4dCBDT0xVTU47CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlbHNpZiAoICRDb2x1bW4gZXEgJ0VzY2FsYXRpb25UaW1lJyApIHsKICAgICAgICAgICAgICAgICAgICBteSAlRXNjYWxhdGlvbkRhdGE7CiAgICAgICAgICAgICAgICAgICAgJEVzY2FsYXRpb25EYXRhe0VzY2FsYXRpb25UaW1lfSAgICAgICAgICAgID0gJFRpY2tldHtFc2NhbGF0aW9uVGltZX07CiAgICAgICAgICAgICAgICAgICAgJEVzY2FsYXRpb25EYXRhe0VzY2FsYXRpb25EZXN0aW5hdGlvbkRhdGV9ID0gJFRpY2tldHtFc2NhbGF0aW9uRGVzdGluYXRpb25EYXRlfTsKCiAgICAgICAgICAgICAgICAgICAgJEVzY2FsYXRpb25EYXRhe0VzY2FsYXRpb25UaW1lSHVtYW59CiAgICAgICAgICAgICAgICAgICAgICAgID0gJFNlbGYtPntMYXlvdXRPYmplY3R9LT5DdXN0b21lckFnZUluSG91cnMoCiAgICAgICAgICAgICAgICAgICAgICAgIEFnZSAgID0+ICRFc2NhbGF0aW9uRGF0YXtFc2NhbGF0aW9uVGltZX0sCiAgICAgICAgICAgICAgICAgICAgICAgIFNwYWNlID0+ICcgJywKICAgICAgICAgICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgICAgICAkRXNjYWxhdGlvbkRhdGF7RXNjYWxhdGlvblRpbWVXb3JraW5nVGltZX0KICAgICAgICAgICAgICAgICAgICAgICAgPSAkU2VsZi0+e0xheW91dE9iamVjdH0tPkN1c3RvbWVyQWdlSW5Ib3VycygKICAgICAgICAgICAgICAgICAgICAgICAgQWdlICAgPT4gJEVzY2FsYXRpb25EYXRhe0VzY2FsYXRpb25UaW1lV29ya2luZ1RpbWV9LAogICAgICAgICAgICAgICAgICAgICAgICBTcGFjZSA9PiAnICcsCiAgICAgICAgICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICAgICAgaWYgKCBkZWZpbmVkICRUaWNrZXR7RXNjYWxhdGlvblRpbWV9ICYmICRUaWNrZXR7RXNjYWxhdGlvblRpbWV9IDwgNjAgKiA2MCAqIDEgKQogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgJEVzY2FsYXRpb25EYXRhe0VzY2FsYXRpb25DbGFzc30gPSAnV2FybmluZyc7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICRTZWxmLT57TGF5b3V0T2JqZWN0fS0+QmxvY2soCiAgICAgICAgICAgICAgICAgICAgICAgIE5hbWUgPT4gJ0NvbnRlbnRMYXJnZVRpY2tldEdlbmVyaWNFc2NhbGF0aW9uVGltZScsCiAgICAgICAgICAgICAgICAgICAgICAgIERhdGEgPT4geyVFc2NhbGF0aW9uRGF0YX0sCiAgICAgICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgICAgICBuZXh0IENPTFVNTjsKCiAgICAgICAgICAgICAgICAgICAgJERhdGFWYWx1ZSA9ICRTZWxmLT57TGF5b3V0T2JqZWN0fS0+Q3VzdG9tZXJBZ2UoCiAgICAgICAgICAgICAgICAgICAgICAgIEFnZSAgID0+ICRUaWNrZXR7J0VzY2FsYXRpb25UaW1lJ30sCiAgICAgICAgICAgICAgICAgICAgICAgIFNwYWNlID0+ICcgJwogICAgICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlbHNpZiAoICRDb2x1bW4gZXEgJ0FnZScgKSB7CiAgICAgICAgICAgICAgICAgICAgJERhdGFWYWx1ZSA9ICRTZWxmLT57TGF5b3V0T2JqZWN0fS0+Q3VzdG9tZXJBZ2UoCiAgICAgICAgICAgICAgICAgICAgICAgIEFnZSAgID0+ICRUaWNrZXR7QWdlfSwKICAgICAgICAgICAgICAgICAgICAgICAgU3BhY2UgPT4gJyAnLAogICAgICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlbHNpZiAoICRDb2x1bW4gZXEgJ0VzY2FsYXRpb25Tb2x1dGlvblRpbWUnICkgewogICAgICAgICAgICAgICAgICAgICRCbG9ja1R5cGUgPSAnRXNjYWxhdGlvbic7CiAgICAgICAgICAgICAgICAgICAgJERhdGFWYWx1ZSA9ICRTZWxmLT57TGF5b3V0T2JqZWN0fS0+Q3VzdG9tZXJBZ2VJbkhvdXJzKAogICAgICAgICAgICAgICAgICAgICAgICBBZ2UgPT4gJFRpY2tldHtTb2x1dGlvblRpbWV9IHx8IDAsCiAgICAgICAgICAgICAgICAgICAgICAgIFNwYWNlID0+ICcgJywKICAgICAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgICAgIGlmICggZGVmaW5lZCAkVGlja2V0e1NvbHV0aW9uVGltZX0gJiYgJFRpY2tldHtTb2x1dGlvblRpbWV9IDwgNjAgKiA2MCAqIDEgKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICRDU1NDbGFzcyA9ICdXYXJuaW5nJzsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlbHNpZiAoICRDb2x1bW4gZXEgJ0VzY2FsYXRpb25SZXNwb25zZVRpbWUnICkgewogICAgICAgICAgICAgICAgICAgICRCbG9ja1R5cGUgPSAnRXNjYWxhdGlvbic7CiAgICAgICAgICAgICAgICAgICAgJERhdGFWYWx1ZSA9ICRTZWxmLT57TGF5b3V0T2JqZWN0fS0+Q3VzdG9tZXJBZ2VJbkhvdXJzKAogICAgICAgICAgICAgICAgICAgICAgICBBZ2UgPT4gJFRpY2tldHtGaXJzdFJlc3BvbnNlVGltZX0gfHwgMCwKICAgICAgICAgICAgICAgICAgICAgICAgU3BhY2UgPT4gJyAnLAogICAgICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICAgICAgaWYgKAogICAgICAgICAgICAgICAgICAgICAgICBkZWZpbmVkICRUaWNrZXR7Rmlyc3RSZXNwb25zZVRpbWV9CiAgICAgICAgICAgICAgICAgICAgICAgICYmICRUaWNrZXR7Rmlyc3RSZXNwb25zZVRpbWV9IDwgNjAgKiA2MCAqIDEKICAgICAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgJENTU0NsYXNzID0gJ1dhcm5pbmcnOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2lmICggJENvbHVtbiBlcSAnRXNjYWxhdGlvblVwZGF0ZVRpbWUnICkgewogICAgICAgICAgICAgICAgICAgICRCbG9ja1R5cGUgPSAnRXNjYWxhdGlvbic7CiAgICAgICAgICAgICAgICAgICAgJERhdGFWYWx1ZSA9ICRTZWxmLT57TGF5b3V0T2JqZWN0fS0+Q3VzdG9tZXJBZ2VJbkhvdXJzKAogICAgICAgICAgICAgICAgICAgICAgICBBZ2UgPT4gJFRpY2tldHtVcGRhdGVUaW1lfSB8fCAwLAogICAgICAgICAgICAgICAgICAgICAgICBTcGFjZSA9PiAnICcsCiAgICAgICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgICAgICBpZiAoIGRlZmluZWQgJFRpY2tldHtVcGRhdGVUaW1lfSAmJiAkVGlja2V0e1VwZGF0ZVRpbWV9IDwgNjAgKiA2MCAqIDEgKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICRDU1NDbGFzcyA9ICdXYXJuaW5nJzsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlbHNpZiAoICRDb2x1bW4gZXEgJ1BlbmRpbmdUaW1lJyApIHsKICAgICAgICAgICAgICAgICAgICAkQmxvY2tUeXBlID0gJ0VzY2FsYXRpb24nOwogICAgICAgICAgICAgICAgICAgICREYXRhVmFsdWUgPSAkU2VsZi0+e0xheW91dE9iamVjdH0tPkN1c3RvbWVyQWdlKAogICAgICAgICAgICAgICAgICAgICAgICBBZ2UgICA9PiAkVGlja2V0eydVbnRpbFRpbWUnfSwKICAgICAgICAgICAgICAgICAgICAgICAgU3BhY2UgPT4gJyAnCiAgICAgICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgICAgICBpZiAoIGRlZmluZWQgJFRpY2tldHtVbnRpbFRpbWV9ICYmICRUaWNrZXR7VW50aWxUaW1lfSA8IC0xICkgewogICAgICAgICAgICAgICAgICAgICAgICAkQ1NTQ2xhc3MgPSAnV2FybmluZyc7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZWxzaWYgKCAkQ29sdW1uIGVxICdPd25lcicgKSB7CgogICAgICAgICAgICAgICAgICAgICMgZ2V0IG93bmVyIGluZm8KICAgICAgICAgICAgICAgICAgICBteSAlT3duZXJJbmZvID0gJFNlbGYtPntVc2VyT2JqZWN0fS0+R2V0VXNlckRhdGEoCiAgICAgICAgICAgICAgICAgICAgICAgIFVzZXJJRCA9PiAkVGlja2V0e093bmVySUR9LAogICAgICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICAgICAgJERhdGFWYWx1ZSA9ICRPd25lckluZm97J1VzZXJGaXJzdG5hbWUnfSAuICcgJyAuICRPd25lckluZm97J1VzZXJMYXN0bmFtZSd9OwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZWxzaWYgKCAkQ29sdW1uIGVxICdSZXNwb25zaWJsZScgKSB7CgogICAgICAgICAgICAgICAgICAgICMgZ2V0IHJlc3BvbnNpYmxlIGluZm8KICAgICAgICAgICAgICAgICAgICBteSAlUmVzcG9uc2libGVJbmZvID0gJFNlbGYtPntVc2VyT2JqZWN0fS0+R2V0VXNlckRhdGEoCiAgICAgICAgICAgICAgICAgICAgICAgIFVzZXJJRCA9PiAkVGlja2V0e1Jlc3BvbnNpYmxlSUR9LAogICAgICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICAgICAgJERhdGFWYWx1ZQogICAgICAgICAgICAgICAgICAgICAgICA9ICRSZXNwb25zaWJsZUluZm97J1VzZXJGaXJzdG5hbWUnfSAuICcgJwogICAgICAgICAgICAgICAgICAgICAgICAuICRSZXNwb25zaWJsZUluZm97J1VzZXJMYXN0bmFtZSd9OwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZWxzaWYgKAogICAgICAgICAgICAgICAgICAgICRDb2x1bW4gZXEgJ1N0YXRlJwogICAgICAgICAgICAgICAgICAgIHx8ICRDb2x1bW4gZXEgJ0xvY2snCiAgICAgICAgICAgICAgICAgICAgfHwgJENvbHVtbiBlcSAnUHJpb3JpdHknCiAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICRCbG9ja1R5cGUgPSAnVHJhbnNsYXRhYmxlJzsKICAgICAgICAgICAgICAgICAgICAkRGF0YVZhbHVlID0gJFRpY2tldHskQ29sdW1ufTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2lmICggJENvbHVtbiBlcSAnQ3JlYXRlZCcgKSB7CiAgICAgICAgICAgICAgICAgICAgJEJsb2NrVHlwZSA9ICdUaW1lJzsKICAgICAgICAgICAgICAgICAgICAkRGF0YVZhbHVlID0gJFRpY2tldHskQ29sdW1ufTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2lmICggJENvbHVtbiBlcSAnQ3VzdG9tZXJOYW1lJyApIHsKCiAgICAgICAgICAgICAgICAgICAgIyBnZXQgY3VzdG9tZXIgbmFtZQogICAgICAgICAgICAgICAgICAgIG15ICRDdXN0b21lck5hbWU7CiAgICAgICAgICAgICAgICAgICAgaWYgKCAkVGlja2V0e0N1c3RvbWVyVXNlcklEfSApIHsKICAgICAgICAgICAgICAgICAgICAgICAgJEN1c3RvbWVyTmFtZSA9ICRTZWxmLT57Q3VzdG9tZXJVc2VyT2JqZWN0fS0+Q3VzdG9tZXJOYW1lKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgVXNlckxvZ2luID0+ICRUaWNrZXR7Q3VzdG9tZXJVc2VySUR9LAogICAgICAgICAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAkRGF0YVZhbHVlID0gJEN1c3RvbWVyTmFtZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgICREYXRhVmFsdWUgPSAkVGlja2V0eyRDb2x1bW59OwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICRTZWxmLT57TGF5b3V0T2JqZWN0fS0+QmxvY2soCiAgICAgICAgICAgICAgICAgICAgTmFtZSA9PiAiQ29udGVudExhcmdlVGlja2V0R2VuZXJpY0NvbHVtbiRCbG9ja1R5cGUiLAogICAgICAgICAgICAgICAgICAgIERhdGEgPT4gewogICAgICAgICAgICAgICAgICAgICAgICBHZW5lcmljVmFsdWUgPT4gJERhdGFWYWx1ZSB8fCAnJywKICAgICAgICAgICAgICAgICAgICAgICAgQ2xhc3MgICAgICAgID0+ICRDU1NDbGFzcyAgfHwgJycsCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgICMgRHluYW1pYyBmaWVsZHMKICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICBteSAkRHluYW1pY0ZpZWxkQ29uZmlnOwogICAgICAgICAgICAgICAgbXkgJERGQ29sdW1uID0gJENvbHVtbjsKICAgICAgICAgICAgICAgICRERkNvbHVtbiA9fiBzL0R5bmFtaWNGaWVsZF8vL2c7CiAgICAgICAgICAgICAgICBEWU5BTUlDRklFTEQ6CiAgICAgICAgICAgICAgICBmb3IgbXkgJERGQ29uZmlnICggQHsgJFNlbGYtPntEeW5hbWljRmllbGR9IH0gKSB7CiAgICAgICAgICAgICAgICAgICAgbmV4dCBEWU5BTUlDRklFTEQgaWYgIUlzSGFzaFJlZldpdGhEYXRhKCRERkNvbmZpZyk7CiAgICAgICAgICAgICAgICAgICAgbmV4dCBEWU5BTUlDRklFTEQgaWYgJERGQ29uZmlnLT57TmFtZX0gbmUgJERGQ29sdW1uOwoKICAgICAgICAgICAgICAgICAgICAkRHluYW1pY0ZpZWxkQ29uZmlnID0gJERGQ29uZmlnOwogICAgICAgICAgICAgICAgICAgIGxhc3QgRFlOQU1JQ0ZJRUxEOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgbmV4dCBDT0xVTU4gaWYgIUlzSGFzaFJlZldpdGhEYXRhKCREeW5hbWljRmllbGRDb25maWcpOwoKICAgICAgICAgICAgICAgICMgZ2V0IGZpZWxkIHZhbHVlCiAgICAgICAgICAgICAgICBteSAkVmFsdWUgPSAkU2VsZi0+e0JhY2tlbmRPYmplY3R9LT5WYWx1ZUdldCgKICAgICAgICAgICAgICAgICAgICBEeW5hbWljRmllbGRDb25maWcgPT4gJER5bmFtaWNGaWVsZENvbmZpZywKICAgICAgICAgICAgICAgICAgICBPYmplY3RJRCAgICAgICAgICAgPT4gJFRpY2tldElELAogICAgICAgICAgICAgICAgKTsKCiAgICAgICAgICAgICAgICBteSAkVmFsdWVTdHJnID0gJFNlbGYtPntCYWNrZW5kT2JqZWN0fS0+RGlzcGxheVZhbHVlUmVuZGVyKAogICAgICAgICAgICAgICAgICAgIER5bmFtaWNGaWVsZENvbmZpZyA9PiAkRHluYW1pY0ZpZWxkQ29uZmlnLAogICAgICAgICAgICAgICAgICAgIFZhbHVlICAgICAgICAgICAgICA9PiAkVmFsdWUsCiAgICAgICAgICAgICAgICAgICAgVmFsdWVNYXhDaGFycyAgICAgID0+IDIwLAogICAgICAgICAgICAgICAgICAgIExheW91dE9iamVjdCAgICAgICA9PiAkU2VsZi0+e0xheW91dE9iamVjdH0sCiAgICAgICAgICAgICAgICApOwoKICAgICAgICAgICAgICAgICRTZWxmLT57TGF5b3V0T2JqZWN0fS0+QmxvY2soCiAgICAgICAgICAgICAgICAgICAgTmFtZSA9PiAnQ29udGVudExhcmdlVGlja2V0R2VuZXJpY0R5bmFtaWNGaWVsZCcsCiAgICAgICAgICAgICAgICAgICAgRGF0YSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIFZhbHVlID0+ICRWYWx1ZVN0cmctPntWYWx1ZX0sCiAgICAgICAgICAgICAgICAgICAgICAgIFRpdGxlID0+ICRWYWx1ZVN0cmctPntUaXRsZX0sCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICk7CgogICAgICAgICAgICAgICAgaWYgKCAkVmFsdWVTdHJnLT57TGlua30gKSB7CiAgICAgICAgICAgICAgICAgICAgJFNlbGYtPntMYXlvdXRPYmplY3R9LT5CbG9jaygKICAgICAgICAgICAgICAgICAgICAgICAgTmFtZSA9PiAnQ29udGVudExhcmdlVGlja2V0R2VuZXJpY0R5bmFtaWNGaWVsZExpbmsnLAogICAgICAgICAgICAgICAgICAgICAgICBEYXRhID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIFZhbHVlICAgICAgICAgICAgICAgICAgICAgICA9PiAkVmFsdWVTdHJnLT57VmFsdWV9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgVGl0bGUgICAgICAgICAgICAgICAgICAgICAgID0+ICRWYWx1ZVN0cmctPntUaXRsZX0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBMaW5rICAgICAgICAgICAgICAgICAgICAgICAgPT4gJFZhbHVlU3RyZy0+e0xpbmt9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgJER5bmFtaWNGaWVsZENvbmZpZy0+e05hbWV9ID0+ICRWYWx1ZVN0cmctPntUaXRsZX0sCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgICRTZWxmLT57TGF5b3V0T2JqZWN0fS0+QmxvY2soCiAgICAgICAgICAgICAgICAgICAgICAgIE5hbWUgPT4gJ0NvbnRlbnRMYXJnZVRpY2tldEdlbmVyaWNEeW5hbWljRmllbGRQbGFpbicsCiAgICAgICAgICAgICAgICAgICAgICAgIERhdGEgPT4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgVmFsdWUgPT4gJFZhbHVlU3RyZy0+e1ZhbHVlfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIFRpdGxlID0+ICRWYWx1ZVN0cmctPntUaXRsZX0sCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQoKICAgICAgICB9CgogICAgfQoKICAgICMgc2hvdyAibm9uZSIgaWYgbm8gdGlja2V0IGlzIGF2YWlsYWJsZQogICAgaWYgKCAhJFRpY2tldElEcyB8fCAhQHskVGlja2V0SURzfSApIHsKICAgICAgICAkU2VsZi0+e0xheW91dE9iamVjdH0tPkJsb2NrKAogICAgICAgICAgICBOYW1lID0+ICdDb250ZW50TGFyZ2VUaWNrZXRHZW5lcmljTm9uZScsCiAgICAgICAgICAgIERhdGEgPT4ge30sCiAgICAgICAgKTsKICAgIH0KCiAgICAjIGNoZWNrIGZvciByZWZyZXNoIHRpbWUKICAgIG15ICRSZWZyZXNoID0gJyc7CiAgICBpZiAoICRTZWxmLT57VXNlclJlZnJlc2hUaW1lfSApIHsKICAgICAgICAkUmVmcmVzaCA9IDYwICogJFNlbGYtPntVc2VyUmVmcmVzaFRpbWV9OwogICAgICAgIG15ICROYW1lSFRNTCA9ICRTZWxmLT57TmFtZX07CiAgICAgICAgJE5hbWVIVE1MID1+IHN7LX17X314bXNnOwogICAgICAgICRTZWxmLT57TGF5b3V0T2JqZWN0fS0+QmxvY2soCiAgICAgICAgICAgIE5hbWUgPT4gJ0NvbnRlbnRMYXJnZVRpY2tldEdlbmVyaWNSZWZyZXNoJywKICAgICAgICAgICAgRGF0YSA9PiB7CiAgICAgICAgICAgICAgICAleyAkU2VsZi0+e0NvbmZpZ30gfSwKICAgICAgICAgICAgICAgIE5hbWUgICAgICAgID0+ICRTZWxmLT57TmFtZX0sCiAgICAgICAgICAgICAgICBOYW1lSFRNTCAgICA9PiAkTmFtZUhUTUwsCiAgICAgICAgICAgICAgICBSZWZyZXNoVGltZSA9PiAkUmVmcmVzaCwKICAgICAgICAgICAgICAgIEN1c3RvbWVySUQgID0+ICRQYXJhbXtDdXN0b21lcklEfSwKICAgICAgICAgICAgICAgICV7JFN1bW1hcnl9LAogICAgICAgICAgICB9LAogICAgICAgICk7CiAgICB9CgogICAgIyBjaGVjayBmb3IgYWN0aXZlIGZpbHRlcnMgYW5kIGFkZCBhICdyZW1vdmUgZmlsdGVycycgYnV0dG9uIHRvIHRoZSB3aWRnZXQgaGVhZGVyCiAgICBpZiAoICRTZWxmLT57R2V0Q29sdW1uRmlsdGVyU2VsZWN0fSAmJiBJc0hhc2hSZWZXaXRoRGF0YSggJFNlbGYtPntHZXRDb2x1bW5GaWx0ZXJTZWxlY3R9ICkgKSB7CiAgICAgICAgJFNlbGYtPntMYXlvdXRPYmplY3R9LT5CbG9jaygKICAgICAgICAgICAgTmFtZSA9PiAnQ29udGVudExhcmdlVGlja2V0R2VuZXJpY1JlbW92ZUZpbHRlcnMnLAogICAgICAgICAgICBEYXRhID0+IHsKICAgICAgICAgICAgICAgIE5hbWUgICAgICAgPT4gJFNlbGYtPntOYW1lfSwKICAgICAgICAgICAgICAgIEN1c3RvbWVySUQgPT4gJFBhcmFte0N1c3RvbWVySUR9LAogICAgICAgICAgICB9LAogICAgICAgICk7CiAgICB9CiAgICBlbHNlIHsKICAgICAgICAkU2VsZi0+e0xheW91dE9iamVjdH0tPkJsb2NrKAogICAgICAgICAgICBOYW1lID0+ICdDb250ZW50TGFyZ2VUaWNrZXRHZW5lcmljUmVtb3ZlRmlsdGVyc1JlbW92ZScsCiAgICAgICAgICAgIERhdGEgPT4gewogICAgICAgICAgICAgICAgTmFtZSA9PiAkU2VsZi0+e05hbWV9LAogICAgICAgICAgICB9LAogICAgICAgICk7CiAgICB9CgogICAgbXkgJENvbnRlbnQgPSAkU2VsZi0+e0xheW91dE9iamVjdH0tPk91dHB1dCgKICAgICAgICBUZW1wbGF0ZUZpbGUgPT4gJ0FnZW50RGFzaGJvYXJkVGlja2V0TXlUaWNrZXRzRGFzaGxldCcsCiAgICAgICAgRGF0YSAgICAgICAgID0+IHsKICAgICAgICAgICAgJXsgJFNlbGYtPntDb25maWd9IH0sCiAgICAgICAgICAgIE5hbWUgPT4gJFNlbGYtPntOYW1lfSwKICAgICAgICAgICAgJXskU3VtbWFyeX0sCiAgICAgICAgICAgIEZpbHRlclZhbHVlID0+ICRTZWxmLT57RmlsdGVyfSwKICAgICAgICAgICAgQ3VzdG9tZXJJRCAgPT4gJFNlbGYtPntDdXN0b21lcklEfSwKICAgICAgICB9LAogICAgICAgIEtlZXBTY3JpcHRUYWdzID0+ICRQYXJhbXtBSkFYfSwKICAgICk7CgogICAgcmV0dXJuICRDb250ZW50Owp9CgpzdWIgX0luaXRpYWxDb2x1bW5GaWx0ZXIgewogICAgbXkgKCAkU2VsZiwgJVBhcmFtICkgPSBAXzsKCiAgICByZXR1cm4gaWYgISRQYXJhbXtDb2x1bW5OYW1lfTsKICAgIHJldHVybiBpZiAhJFNlbGYtPntWYWxpZEZpbHRlcmFibGVDb2x1bW5zfS0+eyAkUGFyYW17Q29sdW1uTmFtZX0gfTsKCiAgICBteSAkTGFiZWwgPSAkUGFyYW17TGFiZWx9IHx8ICRQYXJhbXtDb2x1bW5OYW1lfTsKICAgICRMYWJlbCA9ICRTZWxmLT57TGF5b3V0T2JqZWN0fS0+e0xhbmd1YWdlT2JqZWN0fS0+R2V0KCRMYWJlbCk7CgogICAgIyBzZXQgZml4ZWQgdmFsdWVzCiAgICBteSAkRGF0YSA9IFsKICAgICAgICB7CiAgICAgICAgICAgIEtleSAgID0+ICcnLAogICAgICAgICAgICBWYWx1ZSA9PiB1YyAkTGFiZWwsCiAgICAgICAgfSwKICAgIF07CgogICAgIyBkZWZpbmUgaWYgY29sdW1uIGZpbHRlciB2YWx1ZXMgc2hvdWxkIGJlIHRyYW5zbGF0YWJsZQogICAgbXkgJFRyYW5zbGF0aW9uT3B0aW9uID0gMDsKCiAgICBpZiAoCiAgICAgICAgJFBhcmFte0NvbHVtbk5hbWV9IGVxICdTdGF0ZScKICAgICAgICB8fCAkUGFyYW17Q29sdW1uTmFtZX0gZXEgJ0xvY2snCiAgICAgICAgfHwgJFBhcmFte0NvbHVtbk5hbWV9IGVxICdQcmlvcml0eScKICAgICAgICApCiAgICB7CiAgICAgICAgJFRyYW5zbGF0aW9uT3B0aW9uID0gMTsKICAgIH0KCiAgICBteSAkQ2xhc3MgPSAnQ29sdW1uRmlsdGVyJzsKICAgIGlmICggJFBhcmFte0Nzc30gKSB7CiAgICAgICAgJENsYXNzIC49ICcgJyAuICRQYXJhbXtDc3N9OwogICAgfQoKICAgICMgYnVpbGQgc2VsZWN0IEhUTUwKICAgIG15ICRDb2x1bW5GaWx0ZXJIVE1MID0gJFNlbGYtPntMYXlvdXRPYmplY3R9LT5CdWlsZFNlbGVjdGlvbigKICAgICAgICBOYW1lICAgICAgICA9PiAnQ29sdW1uRmlsdGVyJyAuICRQYXJhbXtDb2x1bW5OYW1lfSAuICRTZWxmLT57TmFtZX0sCiAgICAgICAgRGF0YSAgICAgICAgPT4gJERhdGEsCiAgICAgICAgQ2xhc3MgICAgICAgPT4gJENsYXNzLAogICAgICAgIFRyYW5zbGF0aW9uID0+ICRUcmFuc2xhdGlvbk9wdGlvbiwKICAgICAgICBTZWxlY3RlZElEICA9PiAnJywKICAgICk7CiAgICByZXR1cm4gJENvbHVtbkZpbHRlckhUTUw7Cn0KCnN1YiBfR2V0Q29sdW1uVmFsdWVzIHsKICAgIG15ICggJFNlbGYsICVQYXJhbSApID0gQF87CgogICAgcmV0dXJuIGlmICFJc1N0cmluZ1dpdGhEYXRhKCAkUGFyYW17SGVhZGVyQ29sdW1ufSApOwoKICAgIG15ICRIZWFkZXJDb2x1bW4gPSAkUGFyYW17SGVhZGVyQ29sdW1ufTsKICAgIG15ICVDb2x1bW5GaWx0ZXJWYWx1ZXM7CiAgICBteSAkVGlja2V0SURzOwoKICAgIGlmICggSXNBcnJheVJlZldpdGhEYXRhKCAkUGFyYW17T3JpZ2luYWxUaWNrZXRJRHN9ICkgKSB7CiAgICAgICAgJFRpY2tldElEcyA9ICRQYXJhbXtPcmlnaW5hbFRpY2tldElEc307CiAgICB9CgogICAgaWYgKCAkSGVhZGVyQ29sdW1uICF+IG0vXkR5bmFtaWNGaWVsZF8vICkgewogICAgICAgIG15ICRGdW5jdGlvbk5hbWUgPSAkSGVhZGVyQ29sdW1uIC4gJ0ZpbHRlclZhbHVlc0dldCc7CiAgICAgICAgaWYgKCAkSGVhZGVyQ29sdW1uIGVxICdDdXN0b21lcklEJyApIHsKICAgICAgICAgICAgJEZ1bmN0aW9uTmFtZSA9ICdDdXN0b21lckZpbHRlclZhbHVlc0dldCc7CiAgICAgICAgfQogICAgICAgICRDb2x1bW5GaWx0ZXJWYWx1ZXN7JEhlYWRlckNvbHVtbn0gPSAkU2VsZi0+e0NvbHVtbkZpbHRlck9iamVjdH0tPiRGdW5jdGlvbk5hbWUoCiAgICAgICAgICAgIFRpY2tldElEcyAgICA9PiAkVGlja2V0SURzLAogICAgICAgICAgICBIZWFkZXJDb2x1bW4gPT4gJEhlYWRlckNvbHVtbiwKICAgICAgICAgICAgVXNlcklEICAgICAgID0+ICRTZWxmLT57VXNlcklEfSwKICAgICAgICApOwogICAgfQogICAgZWxzZSB7CiAgICAgICAgRFlOQU1JQ0ZJRUxEOgogICAgICAgIGZvciBteSAkRHluYW1pY0ZpZWxkQ29uZmlnICggQHsgJFNlbGYtPntEeW5hbWljRmllbGR9IH0gKSB7CiAgICAgICAgICAgIG5leHQgRFlOQU1JQ0ZJRUxEIGlmICFJc0hhc2hSZWZXaXRoRGF0YSgkRHluYW1pY0ZpZWxkQ29uZmlnKTsKICAgICAgICAgICAgbXkgJEZpZWxkTmFtZSA9ICdEeW5hbWljRmllbGRfJyAuICREeW5hbWljRmllbGRDb25maWctPntOYW1lfTsKICAgICAgICAgICAgbmV4dCBEWU5BTUlDRklFTEQgaWYgJEZpZWxkTmFtZSBuZSAkSGVhZGVyQ29sdW1uOwogICAgICAgICAgICBteSAkSXNGaWx0cmFibGUgPSAkU2VsZi0+e0JhY2tlbmRPYmplY3R9LT5IYXNCZWhhdmlvcigKICAgICAgICAgICAgICAgIER5bmFtaWNGaWVsZENvbmZpZyA9PiAkRHluYW1pY0ZpZWxkQ29uZmlnLAogICAgICAgICAgICAgICAgQmVoYXZpb3IgICAgICAgICAgID0+ICdJc0ZpbHRyYWJsZScsCiAgICAgICAgICAgICk7CiAgICAgICAgICAgIG5leHQgRFlOQU1JQ0ZJRUxEIGlmICEkSXNGaWx0cmFibGU7CiAgICAgICAgICAgICRTZWxmLT57VmFsaWRGaWx0ZXJhYmxlQ29sdW1uc30tPnskSGVhZGVyQ29sdW1ufSA9ICRJc0ZpbHRyYWJsZTsKICAgICAgICAgICAgaWYgKCBJc0FycmF5UmVmV2l0aERhdGEoJFRpY2tldElEcykgKSB7CgogICAgICAgICAgICAgICAgIyBnZXQgdGhlIGhpc3RvcmljYWwgdmFsdWVzIGZvciB0aGUgZmllbGQKICAgICAgICAgICAgICAgICRDb2x1bW5GaWx0ZXJWYWx1ZXN7JEhlYWRlckNvbHVtbn0KICAgICAgICAgICAgICAgICAgICA9ICRTZWxmLT57QmFja2VuZE9iamVjdH0tPkNvbHVtbkZpbHRlclZhbHVlc0dldCgKICAgICAgICAgICAgICAgICAgICBEeW5hbWljRmllbGRDb25maWcgPT4gJER5bmFtaWNGaWVsZENvbmZpZywKICAgICAgICAgICAgICAgICAgICBMYXlvdXRPYmplY3QgICAgICAgPT4gJFNlbGYtPntMYXlvdXRPYmplY3R9LAogICAgICAgICAgICAgICAgICAgIFRpY2tldElEcyAgICAgICAgICA9PiAkVGlja2V0SURzLAogICAgICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSB7CgogICAgICAgICAgICAgICAgIyBnZXQgUG9zc2libGVWYWx1ZXMKICAgICAgICAgICAgICAgICRDb2x1bW5GaWx0ZXJWYWx1ZXN7JEhlYWRlckNvbHVtbn0gPSAkU2VsZi0+e0JhY2tlbmRPYmplY3R9LT5Qb3NzaWJsZVZhbHVlc0dldCgKICAgICAgICAgICAgICAgICAgICBEeW5hbWljRmllbGRDb25maWcgPT4gJER5bmFtaWNGaWVsZENvbmZpZywKICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgbGFzdDsKICAgICAgICB9CiAgICB9CgogICAgcmV0dXJuIFwlQ29sdW1uRmlsdGVyVmFsdWVzOwp9Cgo9b3ZlcgoKPWl0ZW0gX0NvbHVtbkZpbHRlckpTT04oKQoKICAgIGNyZWF0ZXMgYSBKU09OIHNlbGVjdCBmaWx0ZXIgZm9yIGNvbHVtbiBoZWFkZXIKCiAgICBteSAkQ29sdW1uRmlsdGVySlNPTiA9ICRUaWNrZXRPdmVydmlld1NtYWxsT2JqZWN0LT5fQ29sdW1uRmlsdGVySlNPTigKICAgICAgICBDb2x1bW5OYW1lID0+ICdRdWV1ZScsCiAgICAgICAgTGFiZWwgICAgICA9PiAnUXVldWUnLAogICAgICAgIENvbHVtblZhbHVlcyA9PiB7CiAgICAgICAgICAgIDEgPT4gJ1Bvc3RNYXN0ZXInLAogICAgICAgICAgICAyID0+ICdKdW5rJywKICAgICAgICB9LAogICAgICAgIFNlbGVjdGVkVmFsdWUgJzEnLAogICAgKTsKCj1jdXQKCnN1YiBfQ29sdW1uRmlsdGVySlNPTiB7CiAgICBteSAoICRTZWxmLCAlUGFyYW0gKSA9IEBfOwoKICAgIHJldHVybiBpZiAhJFBhcmFte0NvbHVtbk5hbWV9OwogICAgcmV0dXJuIGlmICEkU2VsZi0+e1ZhbGlkRmlsdGVyYWJsZUNvbHVtbnN9LT57ICRQYXJhbXtDb2x1bW5OYW1lfSB9OwoKICAgIG15ICRMYWJlbCA9ICRQYXJhbXtMYWJlbH07CiAgICAkTGFiZWwgPX4gc3sgXEEgRHluYW1pY0ZpZWxkXyB9e31neG1zOwogICAgJExhYmVsID0gJFNlbGYtPntMYXlvdXRPYmplY3R9LT57TGFuZ3VhZ2VPYmplY3R9LT5HZXQoJExhYmVsKTsKCiAgICAjIHNldCBmaXhlZCB2YWx1ZXMKICAgIG15ICREYXRhID0gWwogICAgICAgIHsKICAgICAgICAgICAgS2V5ICAgPT4gJ0RlbGV0ZUZpbHRlcicsCiAgICAgICAgICAgIFZhbHVlID0+IHVjICRMYWJlbCwKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgICAgS2V5ICAgICAgPT4gJy0nLAogICAgICAgICAgICBWYWx1ZSAgICA9PiAnLScsCiAgICAgICAgICAgIERpc2FibGVkID0+IDEsCiAgICAgICAgfSwKICAgIF07CgogICAgaWYgKCAkUGFyYW17Q29sdW1uVmFsdWVzfSAmJiByZWYgJFBhcmFte0NvbHVtblZhbHVlc30gZXEgJ0hBU0gnICkgewoKICAgICAgICBteSAlVmFsdWVzID0gJXsgJFBhcmFte0NvbHVtblZhbHVlc30gfTsKCiAgICAgICAgIyBzZXQgcG9zc2libGUgdmFsdWVzCiAgICAgICAgZm9yIG15ICRWYWx1ZUtleSAoIHNvcnQgeyBsYyAkVmFsdWVzeyRhfSBjbXAgbGMgJFZhbHVlc3skYn0gfSBrZXlzICVWYWx1ZXMgKSB7CiAgICAgICAgICAgIHB1c2ggQHskRGF0YX0sIHsKICAgICAgICAgICAgICAgIEtleSAgID0+ICRWYWx1ZUtleSwKICAgICAgICAgICAgICAgIFZhbHVlID0+ICRWYWx1ZXN7JFZhbHVlS2V5fQogICAgICAgICAgICB9OwogICAgICAgIH0KICAgIH0KCiAgICAjIGRlZmluZSBpZiBjb2x1bW4gZmlsdGVyIHZhbHVlcyBzaG91bGQgYmUgdHJhbnNsYXRhYmxlCiAgICBteSAkVHJhbnNsYXRpb25PcHRpb24gPSAwOwoKICAgIGlmICgKICAgICAgICAkUGFyYW17Q29sdW1uTmFtZX0gZXEgJ1N0YXRlJwogICAgICAgIHx8ICRQYXJhbXtDb2x1bW5OYW1lfSBlcSAnTG9jaycKICAgICAgICB8fCAkUGFyYW17Q29sdW1uTmFtZX0gZXEgJ1ByaW9yaXR5JwogICAgICAgICkKICAgIHsKICAgICAgICAkVHJhbnNsYXRpb25PcHRpb24gPSAxOwogICAgfQoKICAgICMgYnVpbGQgc2VsZWN0IEhUTUwKICAgIG15ICRKU09OID0gJFNlbGYtPntMYXlvdXRPYmplY3R9LT5CdWlsZFNlbGVjdGlvbkpTT04oCiAgICAgICAgWwogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBOYW1lICAgICAgICAgPT4gJ0NvbHVtbkZpbHRlcicgLiAkUGFyYW17Q29sdW1uTmFtZX0gLiAkUGFyYW17RGFzaGJvYXJkTmFtZX0sCiAgICAgICAgICAgICAgICBEYXRhICAgICAgICAgPT4gJERhdGEsCiAgICAgICAgICAgICAgICBDbGFzcyAgICAgICAgPT4gJ0NvbHVtbkZpbHRlcicsCiAgICAgICAgICAgICAgICBTb3J0ICAgICAgICAgPT4gJ0FscGhhbnVtZXJpY0tleScsCiAgICAgICAgICAgICAgICBUcmVlVmlldyAgICAgPT4gMSwKICAgICAgICAgICAgICAgIFNlbGVjdGVkSUQgICA9PiAkUGFyYW17U2VsZWN0ZWRWYWx1ZX0sCiAgICAgICAgICAgICAgICBUcmFuc2xhdGlvbiAgPT4gJFRyYW5zbGF0aW9uT3B0aW9uLAogICAgICAgICAgICAgICAgQXV0b0NvbXBsZXRlID0+ICdvZmYnLAogICAgICAgICAgICB9LAogICAgICAgIF0sCiAgICApOwoKICAgIHJldHVybiAkSlNPTjsKfQoKc3ViIF9TZWFyY2hQYXJhbXNHZXQgewogICAgbXkgKCAkU2VsZiwgJVBhcmFtICkgPSBAXzsKCiAgICAjIGdldCBhbGwgc2VhcmNoIGJhc2UgYXR0cmlidXRlcwogICAgbXkgJVRpY2tldFNlYXJjaDsKICAgIG15ICVEeW5hbWljRmllbGRzUGFyYW1ldGVyczsKICAgIG15IEBQYXJhbXMgPSBzcGxpdCAvOy8sICRTZWxmLT57Q29uZmlnfS0+e0F0dHJpYnV0ZXN9OwoKICAgICMgcmVhZCB1c2VyIHByZWZlcmVuY2VzIGFuZCBjb25maWcgdG8gZ2V0IGNvbHVtbnMgdGhhdAogICAgIyBzaG91bGQgYmUgc2hvd24gaW4gdGhlIGRhc2hib2FyZCB3aWRnZXQgKHRoZSBwcmVmZXJlY2VzCiAgICAjIGhhdmUgcHJlY2VkZW5jZSkKICAgIG15ICVQcmVmZXJlbmNlcyA9ICRTZWxmLT57VXNlck9iamVjdH0tPkdldFByZWZlcmVuY2VzKAogICAgICAgIFVzZXJJRCA9PiAkU2VsZi0+e1VzZXJJRH0sCiAgICApOwoKICAgICMgZ2V0IGNvbHVtbiBuYW1lcyBmcm9tIFByZWZlcmVuY2VzCiAgICBteSAkUHJlZmVyZW5jZXNDb2x1bW4gPSAkU2VsZi0+e0pTT05PYmplY3R9LT5EZWNvZGUoCiAgICAgICAgRGF0YSA9PiAkUHJlZmVyZW5jZXN7ICRTZWxmLT57UHJlZktleUNvbHVtbnN9IH0sCiAgICApOwoKICAgICMgY2hlY2sgZm9yIGRlZmF1bHQgc2V0dGluZ3MKICAgIG15IEBDb2x1bW5zOwogICAgaWYgKAogICAgICAgICRTZWxmLT57Q29uZmlnfS0+e0RlZmF1bHRDb2x1bW5zfQogICAgICAgICYmIElzSGFzaFJlZldpdGhEYXRhKCAkU2VsZi0+e0NvbmZpZ30tPntEZWZhdWx0Q29sdW1uc30gKQogICAgICAgICkKICAgIHsKICAgICAgICBAQ29sdW1ucyA9IGdyZXAgeyAkU2VsZi0+e0NvbmZpZ30tPntEZWZhdWx0Q29sdW1uc30tPnskX30gZXEgJzInIH0KICAgICAgICAgICAgc29ydCBrZXlzICV7ICRTZWxmLT57Q29uZmlnfS0+e0RlZmF1bHRDb2x1bW5zfSB9OwogICAgfQogICAgaWYgKCRQcmVmZXJlbmNlc0NvbHVtbikgewogICAgICAgIEBDb2x1bW5zID0gZ3JlcCB7ICRQcmVmZXJlbmNlc0NvbHVtbi0+e0NvbHVtbnN9LT57JF99ID09IDEgfQogICAgICAgICAgICBzb3J0IGtleXMgJXsgJFByZWZlcmVuY2VzQ29sdW1uLT57Q29sdW1uc30gfTsKCiAgICAgICAgaWYgKCAkUHJlZmVyZW5jZXNDb2x1bW4tPntPcmRlcn0gJiYgQHsgJFByZWZlcmVuY2VzQ29sdW1uLT57T3JkZXJ9IH0gKSB7CiAgICAgICAgICAgIEBDb2x1bW5zID0gQHsgJFByZWZlcmVuY2VzQ29sdW1uLT57T3JkZXJ9IH07CiAgICAgICAgfQogICAgfQoKICAgICMgYWx3YXlzIHNldCBUaWNrZXROdW1iZXIKICAgIGlmICggIWdyZXAgeyAkXyBlcSAnVGlja2V0TnVtYmVyJyB9IEBDb2x1bW5zICkgewogICAgICAgIHVuc2hpZnQgQENvbHVtbnMsICdUaWNrZXROdW1iZXInOwogICAgfQoKICAgIHsKCiAgICAgICAgIyBsb29wIHRocm91Z2ggYWxsIHRoZSBkeW5hbWljIGZpZWxkcyB0byBnZXQgdGhlIG9uZXMgdGhhdCBzaG91bGQgYmUgc2hvd24KICAgICAgICBEWU5BTUlDRklFTEROQU1FOgogICAgICAgIGZvciBteSAkRHluYW1pY0ZpZWxkTmFtZSAoQENvbHVtbnMpIHsKCiAgICAgICAgICAgIG5leHQgRFlOQU1JQ0ZJRUxETkFNRSBpZiAkRHluYW1pY0ZpZWxkTmFtZSAhfiBteyBEeW5hbWljRmllbGRfIH14bXM7CgogICAgICAgICAgICAjIHJlbW92ZSBkeW5hbWljIGZpZWxkIHByZWZpeAogICAgICAgICAgICBteSAkRmllbGROYW1lID0gJER5bmFtaWNGaWVsZE5hbWU7CiAgICAgICAgICAgICRGaWVsZE5hbWUgPX4gcy9EeW5hbWljRmllbGRfLy9naTsKICAgICAgICAgICAgJFNlbGYtPntEeW5hbWljRmllbGRGaWx0ZXJ9LT57JEZpZWxkTmFtZX0gPSAxOwogICAgICAgIH0KICAgIH0KCiAgICAjIGdldCB0aGUgZHluYW1pYyBmaWVsZHMgZm9yIHRoaXMgc2NyZWVuCiAgICAkU2VsZi0+e0R5bmFtaWNGaWVsZH0gPSAkU2VsZi0+e0R5bmFtaWNGaWVsZE9iamVjdH0tPkR5bmFtaWNGaWVsZExpc3RHZXQoCiAgICAgICAgVmFsaWQgICAgICAgPT4gMSwKICAgICAgICBPYmplY3RUeXBlICA9PiBbJ1RpY2tldCddLAogICAgICAgIEZpZWxkRmlsdGVyID0+ICRTZWxmLT57RHluYW1pY0ZpZWxkRmlsdGVyfSB8fCB7fSwKICAgICk7CgogICAgIyBnZXQgZmlsdHJhYmxlIER5bmFtaWMgZmllbGRzCiAgICAjIGN5Y2xlIHRyb3VnaCB0aGUgYWN0aXZhdGVkIER5bmFtaWMgRmllbGRzIGZvciB0aGlzIHNjcmVlbgogICAgRFlOQU1JQ0ZJRUxEOgogICAgZm9yIG15ICREeW5hbWljRmllbGRDb25maWcgKCBAeyAkU2VsZi0+e0R5bmFtaWNGaWVsZH0gfSApIHsKICAgICAgICBuZXh0IERZTkFNSUNGSUVMRCBpZiAhSXNIYXNoUmVmV2l0aERhdGEoJER5bmFtaWNGaWVsZENvbmZpZyk7CgogICAgICAgIG15ICRJc0ZpbHRyYWJsZSA9ICRTZWxmLT57QmFja2VuZE9iamVjdH0tPkhhc0JlaGF2aW9yKAogICAgICAgICAgICBEeW5hbWljRmllbGRDb25maWcgPT4gJER5bmFtaWNGaWVsZENvbmZpZywKICAgICAgICAgICAgQmVoYXZpb3IgICAgICAgICAgID0+ICdJc0ZpbHRyYWJsZScsCiAgICAgICAgKTsKCiAgICAgICAgIyBpZiB0aGUgZHluYW1pYyBmaWVsZCBpcyBmaWx0cmFibGUgYWRkIGl0IHRvIHRoZSBWYWxpZEZpbHRlcmFibGVDb2x1bW5zIGhhc2gKICAgICAgICBpZiAoJElzRmlsdHJhYmxlKSB7CiAgICAgICAgICAgICRTZWxmLT57VmFsaWRGaWx0ZXJhYmxlQ29sdW1uc30tPnsgJ0R5bmFtaWNGaWVsZF8nIC4gJER5bmFtaWNGaWVsZENvbmZpZy0+e05hbWV9IH0gPSAxOwogICAgICAgIH0KICAgIH0KCiAgICAjIGdldCBzb3J0YWJsZSBEeW5hbWljIGZpZWxkcwogICAgIyBjeWNsZSB0cm91Z2ggdGhlIGFjdGl2YXRlZCBEeW5hbWljIEZpZWxkcyBmb3IgdGhpcyBzY3JlZW4KICAgIERZTkFNSUNGSUVMRDoKICAgIGZvciBteSAkRHluYW1pY0ZpZWxkQ29uZmlnICggQHsgJFNlbGYtPntEeW5hbWljRmllbGR9IH0gKSB7CiAgICAgICAgbmV4dCBEWU5BTUlDRklFTEQgaWYgIUlzSGFzaFJlZldpdGhEYXRhKCREeW5hbWljRmllbGRDb25maWcpOwoKICAgICAgICBteSAkSXNTb3J0YWJsZSA9ICRTZWxmLT57QmFja2VuZE9iamVjdH0tPkhhc0JlaGF2aW9yKAogICAgICAgICAgICBEeW5hbWljRmllbGRDb25maWcgPT4gJER5bmFtaWNGaWVsZENvbmZpZywKICAgICAgICAgICAgQmVoYXZpb3IgICAgICAgICAgID0+ICdJc1NvcnRhYmxlJywKICAgICAgICApOwoKICAgICAgICAjIGlmIHRoZSBkeW5hbWljIGZpZWxkIGlzIHNvcnRhYmxlIGFkZCBpdCB0byB0aGUgVmFsaWRTb3J0YWJsZUNvbHVtbnMgaGFzaAogICAgICAgIGlmICgkSXNTb3J0YWJsZSkgewogICAgICAgICAgICAkU2VsZi0+e1ZhbGlkU29ydGFibGVDb2x1bW5zfS0+eyAnRHluYW1pY0ZpZWxkXycgLiAkRHluYW1pY0ZpZWxkQ29uZmlnLT57TmFtZX0gfSA9IDE7CiAgICAgICAgfQogICAgfQoKICAgIGZvciBteSAkU3RyaW5nIChAUGFyYW1zKSB7CiAgICAgICAgbmV4dCBpZiAhJFN0cmluZzsKICAgICAgICBteSAoICRLZXksICRWYWx1ZSApID0gc3BsaXQgLz0vLCAkU3RyaW5nOwoKICAgICAgICAjIHB1c2ggQVJSQVlSRUYgYXR0cmlidXRlcyBkaXJlY3RseSBpbiBhbiBBUlJBWVJFRgogICAgICAgIGlmICgKICAgICAgICAgICAgJEtleQogICAgICAgICAgICA9fiAvXihTdGF0ZVR5cGV8U3RhdGVUeXBlSURzfFF1ZXVlc3xRdWV1ZUlEc3xUeXBlc3xUeXBlSURzfFN0YXRlc3xTdGF0ZUlEc3xQcmlvcml0aWVzfFByaW9yaXR5SURzfFNlcnZpY2VzfFNlcnZpY2VJRHN8U0xBc3xTTEFJRHN8TG9ja3N8TG9ja0lEc3xPd25lcklEc3xSZXNwb25zaWJsZUlEc3xXYXRjaFVzZXJJRHN8QXJjaGl2ZUZsYWdzKSQvCiAgICAgICAgICAgICkKICAgICAgICB7CiAgICAgICAgICAgIHB1c2ggQHsgJFRpY2tldFNlYXJjaHskS2V5fSB9LCAkVmFsdWU7CiAgICAgICAgfQoKICAgICAgICAjIGNoZWNrIGlmIHBhcmFtZXRlciBpcyBhIGR5bmFtaWMgZmllbGQgYW5kIGNhcHR1cmUgZHluYW1pYyBmaWVsZCBuYW1lICh3aXRoIER5bmFtaWNGaWVsZF8pCiAgICAgICAgIyBpbiAkMSBhbmQgdGhlIE9wZXJhdG9yIGluICQyCiAgICAgICAgIyBwb3NzaWJsZSBEeW5hbWljIEZpZWxkcyBvcHRpb25zIGluY2x1ZGU6CiAgICAgICAgIyAgIER5bmFtaWNGaWVsZF9OYW1lWF9FcXVhbHM9MTIzOwogICAgICAgICMgICBEeW5hbWljRmllbGRfTmFtZVhfTGlrZT12YWx1ZSo7CiAgICAgICAgIyAgIER5bmFtaWNGaWVsZF9OYW1lWF9HcmVhdGVyVGhhbj0yMDAxLTAxLTAxIDAxOjAxOjAxOwogICAgICAgICMgICBEeW5hbWljRmllbGRfTmFtZVhfR3JlYXRlclRoYW5FcXVhbHM9MjAwMS0wMS0wMSAwMTowMTowMTsKICAgICAgICAjICAgRHluYW1pY0ZpZWxkX05hbWVYX1NtYWxsZXJUaGFuPTIwMDItMDItMDIgMDI6MDI6MDI7CiAgICAgICAgIyAgIER5bmFtaWNGaWVsZF9OYW1lWF9TbWFsbGVyVGhhbkVxdWFscz0yMDAyLTAyLTAyIDAyOjAyOjAyOwogICAgICAgIGVsc2lmICggJEtleSA9fiBte1xBIChEeW5hbWljRmllbGRfLis/KSBfICguKz8pIFx6fXN4bSApIHsKICAgICAgICAgICAgJER5bmFtaWNGaWVsZHNQYXJhbWV0ZXJzeyQxfS0+eyQyfSA9ICRWYWx1ZTsKICAgICAgICB9CgogICAgICAgIGVsc2lmICggIWRlZmluZWQgJFRpY2tldFNlYXJjaHskS2V5fSApIHsKCiAgICAgICAgICAgICMgY2hhbmdlIHNvcnQgYnksIGlmIG5lZWRlZAogICAgICAgICAgICBpZiAoCiAgICAgICAgICAgICAgICAkS2V5IGVxICdTb3J0QnknCiAgICAgICAgICAgICAgICAmJiAkU2VsZi0+e1NvcnRCeX0KICAgICAgICAgICAgICAgICYmICRTZWxmLT57VmFsaWRTb3J0YWJsZUNvbHVtbnN9LT57ICRTZWxmLT57U29ydEJ5fSB9CiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICRWYWx1ZSA9ICRTZWxmLT57U29ydEJ5fTsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNpZiAoICRLZXkgZXEgJ1NvcnRCeScgJiYgISRTZWxmLT57VmFsaWRTb3J0YWJsZUNvbHVtbnN9LT57JFZhbHVlfSApIHsKICAgICAgICAgICAgICAgICRWYWx1ZSA9ICdBZ2UnOwogICAgICAgICAgICB9CiAgICAgICAgICAgICRUaWNrZXRTZWFyY2h7JEtleX0gPSAkVmFsdWU7CiAgICAgICAgfQogICAgICAgIGVsc2lmICggIXJlZiAkVGlja2V0U2VhcmNoeyRLZXl9ICkgewogICAgICAgICAgICBteSAkVmFsdWVUbXAgPSAkVGlja2V0U2VhcmNoeyRLZXl9OwogICAgICAgICAgICAkVGlja2V0U2VhcmNoeyRLZXl9ID0gWyRWYWx1ZVRtcF07CiAgICAgICAgICAgIHB1c2ggQHsgJFRpY2tldFNlYXJjaHskS2V5fSB9LCAkVmFsdWU7CiAgICAgICAgfQogICAgICAgIGVsc2UgewogICAgICAgICAgICBwdXNoIEB7ICRUaWNrZXRTZWFyY2h7JEtleX0gfSwgJFZhbHVlOwogICAgICAgIH0KICAgIH0KICAgICVUaWNrZXRTZWFyY2ggPSAoCiAgICAgICAgJVRpY2tldFNlYXJjaCwKICAgICAgICAlRHluYW1pY0ZpZWxkc1BhcmFtZXRlcnMsCiAgICAgICAgUGVybWlzc2lvbiA9PiAkU2VsZi0+e0NvbmZpZ30tPntQZXJtaXNzaW9ufSB8fCAncm8nLAogICAgICAgIFVzZXJJRCA9PiAkU2VsZi0+e1VzZXJJRH0sCiAgICApOwoKICAgICMgQ3VzdG9tZXJJbmZvcm1hdGlvbkNlbnRlciBzaG93cyBkYXRhIHBlciBDdXN0b21lcklECiAgICBpZiAoICRQYXJhbXtDdXN0b21lcklEfSApIHsKICAgICAgICAkVGlja2V0U2VhcmNoe0N1c3RvbWVySUR9ID0gJFBhcmFte0N1c3RvbWVySUR9OwogICAgfQoKICAgICMgZGVmaW5lIGZpbHRlciBhdHRyaWJ1dGVzCiAgICBteSBATXlRdWV1ZXMgPSAkU2VsZi0+e1F1ZXVlT2JqZWN0fS0+R2V0QWxsQ3VzdG9tUXVldWVzKAogICAgICAgIFVzZXJJRCA9PiAkU2VsZi0+e1VzZXJJRH0sCiAgICApOwogICAgaWYgKCAhQE15UXVldWVzICkgewogICAgICAgIEBNeVF1ZXVlcyA9ICg5OTlfOTk5KTsKICAgIH0KICAgIG15ICVUaWNrZXRTZWFyY2hTdW1tYXJ5ID0gKAogICAgICAgIE9wZW4gPT4gewogICAgICAgICAgICBPd25lcklEcyA9PiBbICRTZWxmLT57VXNlcklEfSwgXSwKICAgICAgICAgICAgTG9ja3MgPT4gdW5kZWYsCiAgICAgICAgICAgIFN0YXRlVHlwZSA9PiBbICdvcGVuJyBdLAogICAgICAgIH0sCiAgICAgICAgUmVtaW5kZXI9PiB7CiAgICAgICAgICAgIE93bmVySURzID0+IFsgJFNlbGYtPntVc2VySUR9LCBdLAogICAgICAgICAgICBMb2NrcyA9PiB1bmRlZiwKICAgICAgICAgICAgU3RhdGVUeXBlID0+IFsgJ3BlbmRpbmcgcmVtaW5kZXInIF0sCiAgICAgICAgfSwKICAgICAgICBQZW5kaW5nID0+IHsKICAgICAgICAgICAgT3duZXJJRHMgPT4gWyAkU2VsZi0+e1VzZXJJRH0sIF0sCiAgICAgICAgICAgIExvY2tzID0+IHVuZGVmLAogICAgICAgICAgICBTdGF0ZVR5cGUgPT4gWyAncGVuZGluZyBhdXRvJyBdLAogICAgICAgIH0sCiAgICApOwoKICAgIGlmICggZGVmaW5lZCAkVGlja2V0U2VhcmNoe1F1ZXVlSURzfSB8fCBkZWZpbmVkICRUaWNrZXRTZWFyY2h7UXVldWVzfSApIHsKICAgICAgICBkZWxldGUgJFRpY2tldFNlYXJjaFN1bW1hcnl7TXlRdWV1ZXN9OwogICAgfQoKICAgIHJldHVybiAoCiAgICAgICAgQ29sdW1ucyAgICAgICAgICAgICA9PiBcQENvbHVtbnMsCiAgICAgICAgVGlja2V0U2VhcmNoICAgICAgICA9PiBcJVRpY2tldFNlYXJjaCwKICAgICAgICBUaWNrZXRTZWFyY2hTdW1tYXJ5ID0+IFwlVGlja2V0U2VhcmNoU3VtbWFyeSwKICAgICk7Cgp9CgoxOwoKPWJhY2sK</File>
        <File Location="Kernel/Output/HTML/Standard/AgentDashboardTicketMyTicketsDashlet.dtl" Permission="644" Encode="Base64">IyAtLQojIEFnZW50RGFzaGJvYXJkVGlja2V0TXlUaWNrZXRzRGFzaGxldC5kdGwgLSBwcm92aWRlcyBIVE1MIGZvciBnbG9iYWwgZGFzaGJvYXJkCiMgLS0KIyBUaGlzIHNvZnR3YXJlIGNvbWVzIHdpdGggQUJTT0xVVEVMWSBOTyBXQVJSQU5UWS4gRm9yIGRldGFpbHMsIHNlZQojIHRoZSBlbmNsb3NlZCBmaWxlIENPUFlJTkcgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24gKEFHUEwpLiBJZiB5b3UKIyBkaWQgbm90IHJlY2VpdmUgdGhpcyBmaWxlLCBzZWUgaHR0cDovL3d3dy5nbnUub3JnL2xpY2Vuc2VzL2FncGwudHh0LgojIC0tCgo8IS0tIGR0bDpibG9jazpDb250ZW50TGFyZ2VUaWNrZXRHZW5lcmljRmlsdGVyIC0tPgo8dWwgY2xhc3M9IlRhYiBBY3Rpb25zIj4KICAgIDxsaSBjbGFzcz0iJFFEYXRheyJPcGVuOjpTZWxlY3RlZCJ9Ij48YSBocmVmPSIjIiBpZD0iRGFzaGJvYXJkJFFEYXRheyJOYW1lIn1PcGVuIiBkYXRhLWZpbHRlcj0iT3BlbiI+JFRleHR7Ik9wZW4gdGlja2V0cyJ9ICgkUURhdGF7Ik9wZW4ifSk8L2E+PC9saT4KICAgIDxsaSBjbGFzcz0iJFFEYXRheyJSZW1pbmRlcjo6U2VsZWN0ZWQifSI+PGEgaHJlZj0iIyIgaWQ9IkRhc2hib2FyZCRRRGF0YXsiTmFtZSJ9UmVtaW5kZXIiIGRhdGEtZmlsdGVyPSJSZW1pbmRlciI+JFRleHR7IlJlbWluZGVyIHRpY2tldHMifSAoJFFEYXRheyJSZW1pbmRlciJ9KTwvYT48L2xpPgogICAgPGxpIGNsYXNzPSIkUURhdGF7IlBlbmRpbmc6OlNlbGVjdGVkIn0iPjxhIGhyZWY9IiMiIGlkPSJEYXNoYm9hcmQkUURhdGF7Ik5hbWUifVBlbmRpbmciIGRhdGEtZmlsdGVyPSJQZW5kaW5nIj4kVGV4dHsiUGVuZGluZyB0aWNrZXRzIn0gKCRRRGF0YXsiUGVuZGluZyJ9KTwvYT48L2xpPgo8L3VsPgo8IS0tIGR0bDpibG9jazpDb250ZW50TGFyZ2VUaWNrZXRHZW5lcmljRmlsdGVyTmF2QmFyIC0tPgo8c3BhbiBjbGFzcz0iUGFnaW5hdGlvbiI+CiAgICAkRGF0YXsiU2l0ZU5hdkJhciJ9Cjwvc3Bhbj4KPCEtLSBkdGw6YmxvY2s6Q29udGVudExhcmdlVGlja2V0R2VuZXJpY0ZpbHRlck5hdkJhciAtLT4KPCEtLSBkdGw6YmxvY2s6Q29udGVudExhcmdlVGlja2V0R2VuZXJpY0ZpbHRlciAtLT4KCiM8IS0tIFRoaXMgZm9ybSB3aWxsIG5vdCBiZSBzdWJtaXR0ZWQsIHdlIG5lZWQgaXQgZm9yIHRoZSBBSkFYIGNhbGxzLiAtLT4KPGZvcm0gYWN0aW9uPSIkRW52eyJDR0lIYW5kbGUifSIgbWV0aG9kPSJwb3N0IiBlbmN0eXBlPSJtdWx0aXBhcnQvZm9ybS1kYXRhIj4KICAgIDxpbnB1dCB0eXBlPSJoaWRkZW4iIG5hbWU9IkN1c3RvbWVySUQiIHZhbHVlPSIkUURhdGF7IkN1c3RvbWVySUQifSIvPgogICAgPGlucHV0IHR5cGU9ImhpZGRlbiIgbmFtZT0iRmlsdGVyJFFEYXRheyJOYW1lIn0iIGlkPSJGaWx0ZXIkUURhdGF7Ik5hbWUifSIgdmFsdWU9IiRRRGF0YXsiRmlsdGVyVmFsdWUifSIgLz4KICAgIDx0YWJsZSBjbGFzcz0iRGF0YVRhYmxlIj4KICAgICAgICA8dGhlYWQ+CjwhLS0gZHRsOmJsb2NrOkNvbnRlbnRMYXJnZVRpY2tldEdlbmVyaWNIZWFkZXIgLS0+CiAgICAgICAgICAgIDx0cj4KCjwhLS0gZHRsOmJsb2NrOkdlbmVyYWxPdmVydmlld0hlYWRlciAtLT4KCjwhLS0gZHRsOmJsb2NrOkNvbnRlbnRMYXJnZVRpY2tldEdlbmVyaWNIZWFkZXJNZXRhIC0tPgogICAgICAgICAgICAgICAgPHRoIGNsYXNzPSJEYXNoYm9hcmRIZWFkZXIgJFFEYXRheyJDU1MifSI+CjwhLS0gZHRsOmJsb2NrOkNvbnRlbnRMYXJnZVRpY2tldEdlbmVyaWNIZWFkZXJNZXRhTGluayAtLT4KICAgICAgICAgICAgICAgICAgICA8YSBpZD0iJFFEYXRheyJIZWFkZXJDb2x1bW5OYW1lIn1PdmVydmlld0NvbnRyb2wkUURhdGF7Ik5hbWUifSIgbmFtZT0iJFFEYXRheyJIZWFkZXJDb2x1bW5OYW1lIn1PdmVydmlld0NvbnRyb2wkUURhdGF7Ik5hbWUifSIgaHJlZj0iIyIgdGl0bGU9IiREYXRheyJUaXRsZSJ9IiA+PC9hPgoKPCEtLSBkdGw6anNfb25fZG9jdW1lbnRfY29tcGxldGUgLS0+CjxzY3JpcHQgdHlwZT0idGV4dC9qYXZhc2NyaXB0Ij4vLzwhW0NEQVRBWwogICAgJCgnIyRRRGF0YXsiSGVhZGVyQ29sdW1uTmFtZSJ9T3ZlcnZpZXdDb250cm9sJFFEYXRheyJOYW1lIn0nKS51bmJpbmQoJ2NsaWNrJykuYmluZCgnY2xpY2snLCBmdW5jdGlvbiAoRXZlbnQpIHsKICAgICAgICB2YXIgRmlsdGVyLCBMaW5rUGFnZSwgQ29sdW1uRmlsdGVyTmFtZSwgQ3VzdG9tZXJJRDsKCiAgICAgICAgRmlsdGVyICA9ICQoJyNGaWx0ZXIkUURhdGF7Ik5hbWUifScpLnZhbCgpIHx8ICdBbGwnOwogICAgICAgIExpbmtQYWdlID0gJyc7CiAgICAgICAgQ3VzdG9tZXJJRCA9ICQoJ2lucHV0W25hbWU9Q3VzdG9tZXJJRF0nKS52YWwoKSB8fCAnJzsKCiAgICAgICAgLy8gZ2V0IGFsbCBjb2x1bW4gZmlsdGVycwogICAgICAgICQoJy5Db2x1bW5GaWx0ZXInKS5lYWNoKGZ1bmN0aW9uKCl7CiAgICAgICAgICAgIENvbHVtbkZpbHRlck5hbWUgID0gJCh0aGlzKS5hdHRyKCduYW1lJyk7CgogICAgICAgICAgICAvLyBnZXQgYWxsIG9wdGlvbnMgb2YgY3VycmVudCBjb2x1bW4gZmlsdGVyCiAgICAgICAgICAgICQodGhpcykuY2hpbGRyZW4oKS5lYWNoKCBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgIGlmICggJCh0aGlzKS5hdHRyKCd2YWx1ZScpICYmICQodGhpcykuYXR0cignc2VsZWN0ZWQnKSApIHsKICAgICAgICAgICAgICAgICAgICBMaW5rUGFnZSA9IExpbmtQYWdlICsgQ29sdW1uRmlsdGVyTmFtZSArICc9JyArICQodGhpcykuYXR0cigndmFsdWUnKSArICc7JzsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgfSk7CgogICAgICAgICQoJyNEYXNoYm9hcmQkUURhdGF7Ik5hbWUifS1ib3gnKS5hZGRDbGFzcygnTG9hZGluZycpOwogICAgICAgIENvcmUuQUpBWC5Db250ZW50VXBkYXRlKCQoJyNEYXNoYm9hcmQkUURhdGF7Ik5hbWUifScpLCAnJEVudnsiQmFzZWxpbmsifUFjdGlvbj0kRW52eyJBY3Rpb24ifTtTdWJhY3Rpb249RWxlbWVudDtOYW1lPSRRRGF0YXsiTmFtZSJ9O0ZpbHRlcj0nICsgRmlsdGVyICsgJzsnICsgTGlua1BhZ2UgKyAnO0N1c3RvbWVySUQ9JyArIEN1c3RvbWVySUQgKyAnO1NvcnRCeT0kUURhdGF7IkhlYWRlckNvbHVtbk5hbWUifTtPcmRlckJ5PSRRRGF0YXsiT3JkZXJCeSJ9JywgZnVuY3Rpb24gKCkgewogICAgICAgICAgICBDb3JlLlVJLlRhYmxlLkluaXRDU1NQc2V1ZG9DbGFzc2VzKCQoJyNEYXNoYm9hcmQkUURhdGF7Ik5hbWUifScpKTsKICAgICAgICAgICAgJCgnI0Rhc2hib2FyZCRRRGF0YXsiTmFtZSJ9LWJveCcpLnJlbW92ZUNsYXNzKCdMb2FkaW5nJyk7CiAgICAgICAgfSk7CiAgICAgICAgRXZlbnQucHJldmVudERlZmF1bHQoKTsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICB9KTsKLy9dXT48L3NjcmlwdD4KPCEtLSBkdGw6anNfb25fZG9jdW1lbnRfY29tcGxldGUgLS0+Cgo8IS0tIGR0bDpibG9jazpDb250ZW50TGFyZ2VUaWNrZXRHZW5lcmljSGVhZGVyTWV0YUxpbmsgLS0+CjwhLS0gZHRsOmJsb2NrOkNvbnRlbnRMYXJnZVRpY2tldEdlbmVyaWNIZWFkZXJNZXRhRW1wdHkgLS0+CiAgICAgICAgICAgICAgICAgICAgPHNwYW4gdGl0bGU9IiRUZXh0eyIkRGF0YXsiSGVhZGVyQ29sdW1uTmFtZSJ9In0iPjwvc3Bhbj4KPCEtLSBkdGw6YmxvY2s6Q29udGVudExhcmdlVGlja2V0R2VuZXJpY0hlYWRlck1ldGFFbXB0eSAtLT4KCiAgICAgICAgICAgICAgICA8L3RoPgo8IS0tIGR0bDpibG9jazpDb250ZW50TGFyZ2VUaWNrZXRHZW5lcmljSGVhZGVyTWV0YSAtLT4KCjwhLS0gZHRsOmJsb2NrOkNvbnRlbnRMYXJnZVRpY2tldEdlbmVyaWNIZWFkZXJUaWNrZXRIZWFkZXIgLS0+CjwhLS0gZHRsOmJsb2NrOkNvbnRlbnRMYXJnZVRpY2tldEdlbmVyaWNIZWFkZXJUaWNrZXROdW1iZXJDb2x1bW4gLS0+CiAgICAgICAgICAgICAgICA8dGggY2xhc3M9IkRhc2hib2FyZEhlYWRlciBUaWNrZXROdW1iZXIgJFFEYXRheyJDU1MifSI+CiAgICAgICAgICAgICAgICAgICAgPGEgaWQ9IlRpY2tldE51bWJlck92ZXJ2aWV3Q29udHJvbCRRRGF0YXsiTmFtZSJ9IiBuYW1lPSJUaWNrZXROdW1iZXJPdmVydmlld0NvbnRyb2wkUURhdGF7Ik5hbWUifSIgaHJlZj0iIyIgdGl0bGU9IiREYXRheyJUaXRsZSJ9IiA+JENvbmZpZ3siVGlja2V0OjpIb29rIn08L2E+CjwhLS0gZHRsOmpzX29uX2RvY3VtZW50X2NvbXBsZXRlIC0tPgo8c2NyaXB0IHR5cGU9InRleHQvamF2YXNjcmlwdCI+Ly88IVtDREFUQVsKICAgICQoJyNUaWNrZXROdW1iZXJPdmVydmlld0NvbnRyb2wkUURhdGF7Ik5hbWUifScpLnVuYmluZCgnY2xpY2snKS5iaW5kKCdjbGljaycsIGZ1bmN0aW9uIChFdmVudCkgewogICAgICAgIHZhciBGaWx0ZXIsIExpbmtQYWdlLCBDb2x1bW5GaWx0ZXJOYW1lLCBDdXN0b21lcklEOwoKICAgICAgICBGaWx0ZXIgID0gJCgnI0ZpbHRlciRRRGF0YXsiTmFtZSJ9JykudmFsKCkgfHwgJ0FsbCc7CiAgICAgICAgTGlua1BhZ2UgPSAnJzsKICAgICAgICBDdXN0b21lcklEID0gJCgnaW5wdXRbbmFtZT1DdXN0b21lcklEXScpLnZhbCgpIHx8ICcnOwoKICAgICAgICAvLyBnZXQgYWxsIGNvbHVtbiBmaWx0ZXJzCiAgICAgICAgJCgnLkNvbHVtbkZpbHRlcicpLmVhY2goZnVuY3Rpb24oKXsKICAgICAgICAgICAgQ29sdW1uRmlsdGVyTmFtZSAgPSAkKHRoaXMpLmF0dHIoJ25hbWUnKTsKCiAgICAgICAgICAgIC8vIGdldCBhbGwgb3B0aW9ucyBvZiBjdXJyZW50IGNvbHVtbiBmaWx0ZXIKICAgICAgICAgICAgJCh0aGlzKS5jaGlsZHJlbigpLmVhY2goIGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgaWYgKCAkKHRoaXMpLmF0dHIoJ3ZhbHVlJykgJiYgJCh0aGlzKS5hdHRyKCdzZWxlY3RlZCcpICkgewogICAgICAgICAgICAgICAgICAgIExpbmtQYWdlID0gTGlua1BhZ2UgKyBDb2x1bW5GaWx0ZXJOYW1lICsgJz0nICsgJCh0aGlzKS5hdHRyKCd2YWx1ZScpICsgJzsnOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICB9KTsKCiAgICAgICAgJCgnI0Rhc2hib2FyZCRRRGF0YXsiTmFtZSJ9LWJveCcpLmFkZENsYXNzKCdMb2FkaW5nJyk7CiAgICAgICAgQ29yZS5BSkFYLkNvbnRlbnRVcGRhdGUoJCgnI0Rhc2hib2FyZCRRRGF0YXsiTmFtZSJ9JyksICckRW52eyJCYXNlbGluayJ9QWN0aW9uPSRFbnZ7IkFjdGlvbiJ9O1N1YmFjdGlvbj1FbGVtZW50O05hbWU9JFFEYXRheyJOYW1lIn07RmlsdGVyPScgKyBGaWx0ZXIgKyAnOycgKyBMaW5rUGFnZSArICc7Q3VzdG9tZXJJRD0nICsgQ3VzdG9tZXJJRCArICc7U29ydEJ5PVRpY2tldE51bWJlcjtPcmRlckJ5PSRRRGF0YXsiT3JkZXJCeSJ9JywgZnVuY3Rpb24gKCkgewogICAgICAgICAgICBDb3JlLlVJLlRhYmxlLkluaXRDU1NQc2V1ZG9DbGFzc2VzKCQoJyNEYXNoYm9hcmQkUURhdGF7Ik5hbWUifScpKTsKICAgICAgICAgICAgJCgnI0Rhc2hib2FyZCRRRGF0YXsiTmFtZSJ9LWJveCcpLnJlbW92ZUNsYXNzKCdMb2FkaW5nJyk7CiAgICAgICAgfSk7CiAgICAgICAgRXZlbnQucHJldmVudERlZmF1bHQoKTsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICB9KTsKLy9dXT48L3NjcmlwdD4KPCEtLSBkdGw6anNfb25fZG9jdW1lbnRfY29tcGxldGUgLS0+CiAgICAgICAgICAgICAgICA8L3RoPgo8IS0tIGR0bDpibG9jazpDb250ZW50TGFyZ2VUaWNrZXRHZW5lcmljSGVhZGVyVGlja2V0TnVtYmVyQ29sdW1uIC0tPgoKPCEtLSBkdGw6YmxvY2s6Q29udGVudExhcmdlVGlja2V0R2VuZXJpY0hlYWRlckNvbHVtbiAtLT4KICAgICAgICAgICAgICAgIDx0aCBjbGFzcz0iRGFzaGJvYXJkSGVhZGVyICRRRGF0YXsiSGVhZGVyQ29sdW1uTmFtZSJ9ICRRRGF0YXsiQ1NTIn0iPgoKPCEtLSBkdGw6YmxvY2s6Q29udGVudExhcmdlVGlja2V0R2VuZXJpY0hlYWRlckNvbHVtbkZpbHRlckxpbmsgLS0+CiAgICAgICAgICAgICAgICAgICAgPGEgaHJlZj0iIyIgY2xhc3M9IkNvbHVtblNldHRpbmdzVHJpZ2dlciIgdGl0bGU9IiREYXRheyJGaWx0ZXJUaXRsZSJ9Ij4KICAgICAgICAgICAgICAgICAgICAgICAgPGkgY2xhc3M9Imljb24tZmlsdGVyIj48L2k+CiAgICAgICAgICAgICAgICAgICAgPC9hPgogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9IkNvbHVtblNldHRpbmdzQ29udGFpbmVyIj4KICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iQ29sdW1uU2V0dGluZ3NCb3giPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgJERhdGF7IkNvbHVtbkZpbHRlclN0cmcifQo8IS0tIGR0bDpibG9jazpDb250ZW50TGFyZ2VUaWNrZXRHZW5lcmljSGVhZGVyQ29sdW1uRmlsdGVyTGlua0N1c3RvbWVySURTZWFyY2ggLS0+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0idGV4dCIgY2xhc3M9IkN1c3RvbWVySURBdXRvQ29tcGxldGUiIGF1dG9jb21wbGV0ZT0ib2ZmIiAvPgo8IS0tIGR0bDpqc19vbl9kb2N1bWVudF9jb21wbGV0ZSAtLT4KPHNjcmlwdCB0eXBlPSJ0ZXh0L2phdmFzY3JpcHQiPi8vPCFbQ0RBVEFbCkNvcmUuQ29uZmlnLlNldCgnQ3VzdG9tZXJJREF1dG9jb21wbGV0ZS5RdWVyeURlbGF5JywgIiRRRGF0YXsicXVlcnlEZWxheSJ9Iik7CkNvcmUuQ29uZmlnLlNldCgnQ3VzdG9tZXJJREF1dG9jb21wbGV0ZS5NYXhSZXN1bHRzRGlzcGxheWVkJywgIiRRRGF0YXsibWF4UmVzdWx0c0Rpc3BsYXllZCJ9Iik7CkNvcmUuQ29uZmlnLlNldCgnQ3VzdG9tZXJJREF1dG9jb21wbGV0ZS5NaW5RdWVyeUxlbmd0aCcsICIkUURhdGF7Im1pblF1ZXJ5TGVuZ3RoIn0iKTsKQ29yZS5BZ2VudC5EYXNoYm9hcmQuSW5pdEN1c3RvbWVySURBdXRvY29tcGxldGUoICQoIi5DdXN0b21lcklEQXV0b0NvbXBsZXRlIikgKTsKLy9dXT48L3NjcmlwdD4KPCEtLSBkdGw6anNfb25fZG9jdW1lbnRfY29tcGxldGUgLS0+CjwhLS0gZHRsOmJsb2NrOkNvbnRlbnRMYXJnZVRpY2tldEdlbmVyaWNIZWFkZXJDb2x1bW5GaWx0ZXJMaW5rQ3VzdG9tZXJJRFNlYXJjaCAtLT4KCjwhLS0gZHRsOmJsb2NrOkNvbnRlbnRMYXJnZVRpY2tldEdlbmVyaWNIZWFkZXJDb2x1bW5GaWx0ZXJMaW5rVXNlclNlYXJjaCAtLT4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJ0ZXh0IiBjbGFzcz0iVXNlckF1dG9Db21wbGV0ZSIgYXV0b2NvbXBsZXRlPSJvZmYiIC8+CjwhLS0gZHRsOmpzX29uX2RvY3VtZW50X2NvbXBsZXRlIC0tPgo8c2NyaXB0IHR5cGU9InRleHQvamF2YXNjcmlwdCI+Ly88IVtDREFUQVsKQ29yZS5Db25maWcuU2V0KCdVc2VyQXV0b2NvbXBsZXRlLlF1ZXJ5RGVsYXknLCAiJFFEYXRheyJxdWVyeURlbGF5In0iKTsKQ29yZS5Db25maWcuU2V0KCdVc2VyQXV0b2NvbXBsZXRlLk1heFJlc3VsdHNEaXNwbGF5ZWQnLCAiJFFEYXRheyJtYXhSZXN1bHRzRGlzcGxheWVkIn0iKTsKQ29yZS5Db25maWcuU2V0KCdVc2VyQXV0b2NvbXBsZXRlLk1pblF1ZXJ5TGVuZ3RoJywgIiRRRGF0YXsibWluUXVlcnlMZW5ndGgifSIpOwpDb3JlLkFnZW50LkRhc2hib2FyZC5Jbml0VXNlckF1dG9jb21wbGV0ZSggJCgiLlVzZXJBdXRvQ29tcGxldGUiKSApOwovL11dPjwvc2NyaXB0Pgo8IS0tIGR0bDpqc19vbl9kb2N1bWVudF9jb21wbGV0ZSAtLT4KPCEtLSBkdGw6YmxvY2s6Q29udGVudExhcmdlVGlja2V0R2VuZXJpY0hlYWRlckNvbHVtbkZpbHRlckxpbmtVc2VyU2VhcmNoIC0tPgogICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KCiAgICAgICAgICAgICAgICAgICAgPGEgaWQ9IiRRRGF0YXsiSGVhZGVyQ29sdW1uTmFtZSJ9T3ZlcnZpZXdDb250cm9sJFFEYXRheyJOYW1lIn0iIG5hbWU9IiRRRGF0YXsiSGVhZGVyQ29sdW1uTmFtZSJ9T3ZlcnZpZXdDb250cm9sJFFEYXRheyJOYW1lIn0iIGhyZWY9IiMiIHRpdGxlPSIkRGF0YXsiVGl0bGUifSIgPiRRRGF0YXsiSGVhZGVyTmFtZVRyYW5zbGF0ZWQifTwvYT4KPCEtLSBkdGw6anNfb25fZG9jdW1lbnRfY29tcGxldGUgLS0+CjxzY3JpcHQgdHlwZT0idGV4dC9qYXZhc2NyaXB0Ij4vLzwhW0NEQVRBWwogICAgJCgnI0NvbHVtbkZpbHRlciRRRGF0YXsiSGVhZGVyQ29sdW1uTmFtZSJ9JFFEYXRheyJOYW1lIn0nKS51bmJpbmQoJ2NoYW5nZScpLmJpbmQoJ2NoYW5nZScsIGZ1bmN0aW9uKCl7CiAgICAgICAgdmFyIExpbmtQYWdlLCBDb2x1bW5GaWx0ZXJOYW1lLCBGaWx0ZXIsIENvbHVtbkZpbHRlcklELCBDdXN0b21lcklEOwoKICAgICAgICBMaW5rUGFnZSA9ICcnOwogICAgICAgIEZpbHRlciAgID0gJCgnI0ZpbHRlciRRRGF0YXsiTmFtZSJ9JykudmFsKCkgfHwgJ0FsbCc7CiAgICAgICAgQ3VzdG9tZXJJRCA9ICQoJ2lucHV0W25hbWU9Q3VzdG9tZXJJRF0nKS52YWwoKSB8fCAnJzsKCiAgICAgICAgLy8gc2V0IENvbHVtbkZpbHRlciB2YWx1ZSBmb3IgY3VycmVudCBDb2x1bW5GaWx0ZXIKICAgICAgICBDb2x1bW5GaWx0ZXJOYW1lID0gJCh0aGlzKS5hdHRyKCduYW1lJyk7CiAgICAgICAgTGlua1BhZ2UgPSBMaW5rUGFnZSArIENvbHVtbkZpbHRlck5hbWUgKyAnPScgKyAkKHRoaXMpLnZhbCgpICsgJzsnOwoKICAgICAgICAvLyByZW1lbWJlciB0aGUgY3VycmVudCBDb2x1bW5GaWx0ZXIgSUQKICAgICAgICBDb2x1bW5GaWx0ZXJJRCA9ICQodGhpcykuYXR0cignSUQnKTsKCiAgICAgICAgLy8gZ2V0IGFsbCBjb2x1bW4gZmlsdGVycwogICAgICAgICQoJy5Db2x1bW5GaWx0ZXInKS5lYWNoKGZ1bmN0aW9uKCl7CiAgICAgICAgICAgIENvbHVtbkZpbHRlck5hbWUgID0gJCh0aGlzKS5hdHRyKCduYW1lJyk7CgogICAgICAgICAgICAvLyBleGNsdWRlIGN1cnJlbnQgY29sdW1uIGZpbHRlciwgYXBwYXJlbnRseSB0aGUgc2VsZWN0ZWQgb3B0aW9uIGlzIG5vdCBzZXQgdG8KICAgICAgICAgICAgLy8gc2VsZWN0ZWQgYXQgdGhpcyBwb2ludCBhbmQgdXNlcyB0aGUgb2xkIHZhbHVlCiAgICAgICAgICAgIGlmICgkKHRoaXMpLmF0dHIoJ0lEJykgIT09IENvbHVtbkZpbHRlcklEKSB7CgogICAgICAgICAgICAgICAgLy8gZ2V0IGFsbCBvcHRpb25zIG9mIGN1cnJlbnQgY29sdW1uIGZpbHRlcgogICAgICAgICAgICAgICAgJCh0aGlzKS5jaGlsZHJlbigpLmVhY2goIGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgIGlmICggJCh0aGlzKS5hdHRyKCd2YWx1ZScpICYmICQodGhpcykuYXR0cignc2VsZWN0ZWQnKSApIHsKICAgICAgICAgICAgICAgICAgICAgICAgTGlua1BhZ2UgPSBMaW5rUGFnZSArIENvbHVtbkZpbHRlck5hbWUgKyAnPScgKyAkKHRoaXMpLmF0dHIoJ3ZhbHVlJykgKyAnOyc7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICB9KTsKCiAgICAgICAgJCgnI0Rhc2hib2FyZCRRRGF0YXsiTmFtZSJ9LWJveCcpLmFkZENsYXNzKCdMb2FkaW5nJyk7CiAgICAgICAgQ29yZS5BSkFYLkNvbnRlbnRVcGRhdGUoJCgnI0Rhc2hib2FyZCRRRGF0YXsiTmFtZSJ9JyksICckRW52eyJCYXNlbGluayJ9QWN0aW9uPSRFbnZ7IkFjdGlvbiJ9O1N1YmFjdGlvbj1FbGVtZW50O05hbWU9JFFEYXRheyJOYW1lIn07RmlsdGVyPScgKyBGaWx0ZXIgKyAnO0N1c3RvbWVySUQ9JyArIEN1c3RvbWVySUQgKyAnO1NvcnRCeT0kUURhdGF7IlNvcnRCeSJ9O09yZGVyQnk9JFFEYXRheyJPcmRlckJ5In07JyArIExpbmtQYWdlLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIENvcmUuVUkuVGFibGUuSW5pdENTU1BzZXVkb0NsYXNzZXMoJCgnI0Rhc2hib2FyZCRRRGF0YXsiTmFtZSJ9JykpOwogICAgICAgICAgICAkKCcjRGFzaGJvYXJkJFFEYXRheyJOYW1lIn0tYm94JykucmVtb3ZlQ2xhc3MoJ0xvYWRpbmcnKTsKICAgICAgICB9KTsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICB9KTsKCiAgICAkKCcjJFFEYXRheyJIZWFkZXJDb2x1bW5OYW1lIn1PdmVydmlld0NvbnRyb2wkUURhdGF7Ik5hbWUifScpLnVuYmluZCgnY2xpY2snKS5iaW5kKCdjbGljaycsIGZ1bmN0aW9uIChFdmVudCkgewogICAgICAgIHZhciBMaW5rUGFnZSwgQ29sdW1uRmlsdGVyTmFtZSwgRmlsdGVyLCBDb2x1bW5GaWx0ZXJJRCwgQ3VzdG9tZXJJRDsKCiAgICAgICAgTGlua1BhZ2UgPSAnJzsKICAgICAgICBGaWx0ZXIgICA9ICQoJyNGaWx0ZXIkUURhdGF7Ik5hbWUifScpLnZhbCgpIHx8ICdBbGwnOwogICAgICAgIEN1c3RvbWVySUQgPSAkKCdpbnB1dFtuYW1lPUN1c3RvbWVySURdJykudmFsKCkgfHwgJyc7CgogICAgICAgIC8vIHNldCBDb2x1bW5GaWx0ZXIgdmFsdWUgZm9yIGN1cnJlbnQgQ29sdW1uRmlsdGVyCiAgICAgICAgQ29sdW1uRmlsdGVyTmFtZSA9ICQodGhpcykuYXR0cignbmFtZScpOwogICAgICAgIExpbmtQYWdlID0gTGlua1BhZ2UgKyBDb2x1bW5GaWx0ZXJOYW1lICsgJz0nICsgJCh0aGlzKS52YWwoKSArICc7JzsKCiAgICAgICAgLy8gcmVtZW1iZXIgdGhlIGN1cnJlbnQgQ29sdW1uRmlsdGVyIElECiAgICAgICAgQ29sdW1uRmlsdGVySUQgPSAkKHRoaXMpLmF0dHIoJ0lEJyk7CgogICAgICAgIC8vIGdldCBhbGwgY29sdW1uIGZpbHRlcnMKICAgICAgICAkKCcuQ29sdW1uRmlsdGVyJykuZWFjaChmdW5jdGlvbigpewogICAgICAgICAgICBDb2x1bW5GaWx0ZXJOYW1lICA9ICQodGhpcykuYXR0cignbmFtZScpOwoKICAgICAgICAgICAgLy8gZXhjbHVkZSBjdXJyZW50IGNvbHVtbiBmaWx0ZXIsIGFwcGFyZW50bHkgdGhlIHNlbGVjdGVkIG9wdGlvbiBpcyBub3Qgc2V0IHRvCiAgICAgICAgICAgIC8vIHNlbGVjdGVkIGF0IHRoaXMgcG9pbnQgYW5kIHVzZXMgdGhlIG9sZCB2YWx1ZQogICAgICAgICAgICBpZiAoJCh0aGlzKS5hdHRyKCdJRCcpICE9PSBDb2x1bW5GaWx0ZXJJRCkgewoKICAgICAgICAgICAgICAgIC8vIGdldCBhbGwgb3B0aW9ucyBvZiBjdXJyZW50IGNvbHVtbiBmaWx0ZXIKICAgICAgICAgICAgICAgICQodGhpcykuY2hpbGRyZW4oKS5lYWNoKCBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICBpZiAoICQodGhpcykuYXR0cigndmFsdWUnKSAmJiAkKHRoaXMpLmF0dHIoJ3NlbGVjdGVkJykgKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIExpbmtQYWdlID0gTGlua1BhZ2UgKyBDb2x1bW5GaWx0ZXJOYW1lICsgJz0nICsgJCh0aGlzKS5hdHRyKCd2YWx1ZScpICsgJzsnOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgfSk7CgogICAgICAgICQoJyNEYXNoYm9hcmQkUURhdGF7Ik5hbWUifS1ib3gnKS5hZGRDbGFzcygnTG9hZGluZycpOwogICAgICAgIENvcmUuQUpBWC5Db250ZW50VXBkYXRlKCQoJyNEYXNoYm9hcmQkUURhdGF7Ik5hbWUifScpLCAnJEVudnsiQmFzZWxpbmsifUFjdGlvbj0kRW52eyJBY3Rpb24ifTtTdWJhY3Rpb249RWxlbWVudDtOYW1lPSRRRGF0YXsiTmFtZSJ9O0ZpbHRlcj0nICsgRmlsdGVyICsgJztDdXN0b21lcklEPScgKyBDdXN0b21lcklEICsgJztTb3J0Qnk9JFFEYXRheyJIZWFkZXJDb2x1bW5OYW1lIn07T3JkZXJCeT0kUURhdGF7Ik9yZGVyQnkifTsnICsgTGlua1BhZ2UsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgQ29yZS5VSS5UYWJsZS5Jbml0Q1NTUHNldWRvQ2xhc3NlcygkKCcjRGFzaGJvYXJkJFFEYXRheyJOYW1lIn0nKSk7CiAgICAgICAgICAgICQoJyNEYXNoYm9hcmQkUURhdGF7Ik5hbWUifS1ib3gnKS5yZW1vdmVDbGFzcygnTG9hZGluZycpOwogICAgICAgIH0pOwogICAgICAgIEV2ZW50LnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgfSk7Ci8vXV0+PC9zY3JpcHQ+CjwhLS0gZHRsOmpzX29uX2RvY3VtZW50X2NvbXBsZXRlIC0tPgo8IS0tIGR0bDpibG9jazpDb250ZW50TGFyZ2VUaWNrZXRHZW5lcmljSGVhZGVyQ29sdW1uRmlsdGVyTGluayAtLT4KCjwhLS0gZHRsOmJsb2NrOkNvbnRlbnRMYXJnZVRpY2tldEdlbmVyaWNIZWFkZXJDb2x1bW5MaW5rIC0tPgogICAgICAgICAgICAgICAgICAgIDxhIGlkPSIkUURhdGF7IkhlYWRlckNvbHVtbk5hbWUifU92ZXJ2aWV3Q29udHJvbCRRRGF0YXsiTmFtZSJ9IiBuYW1lPSIkUURhdGF7IkhlYWRlckNvbHVtbk5hbWUifU92ZXJ2aWV3Q29udHJvbCRRRGF0YXsiTmFtZSJ9IiBocmVmPSIjIiB0aXRsZT0iJERhdGF7IlRpdGxlIn0iID4kUURhdGF7IkhlYWRlck5hbWVUcmFuc2xhdGVkIn08L2E+CjwhLS0gZHRsOmpzX29uX2RvY3VtZW50X2NvbXBsZXRlIC0tPgo8c2NyaXB0IHR5cGU9InRleHQvamF2YXNjcmlwdCI+Ly88IVtDREFUQVsKICAgICQoJyMkUURhdGF7IkhlYWRlckNvbHVtbk5hbWUifU92ZXJ2aWV3Q29udHJvbCRRRGF0YXsiTmFtZSJ9JykudW5iaW5kKCdjbGljaycpLmJpbmQoJ2NsaWNrJywgZnVuY3Rpb24gKEV2ZW50KSB7CiAgICAgICAgdmFyIExpbmtQYWdlLCBDb2x1bW5GaWx0ZXJOYW1lLCBGaWx0ZXIsIENvbHVtbkZpbHRlcklELCBDdXN0b21lcklEOwoKICAgICAgICBMaW5rUGFnZSA9ICcnOwogICAgICAgIEZpbHRlciAgID0gJCgnI0ZpbHRlciRRRGF0YXsiTmFtZSJ9JykudmFsKCkgfHwgJ0FsbCc7CiAgICAgICAgQ3VzdG9tZXJJRCA9ICQoJ2lucHV0W25hbWU9Q3VzdG9tZXJJRF0nKS52YWwoKSB8fCAnJzsKCiAgICAgICAgLy8gc2V0IENvbHVtbkZpbHRlciB2YWx1ZSBmb3IgY3VycmVudCBDb2x1bW5GaWx0ZXIKICAgICAgICBDb2x1bW5GaWx0ZXJOYW1lID0gJCh0aGlzKS5hdHRyKCduYW1lJyk7CiAgICAgICAgTGlua1BhZ2UgPSBMaW5rUGFnZSArIENvbHVtbkZpbHRlck5hbWUgKyAnPScgKyAkKHRoaXMpLnZhbCgpICsgJzsnOwoKICAgICAgICAvLyByZW1lbWJlciB0aGUgY3VycmVudCBDb2x1bW5GaWx0ZXIgSUQKICAgICAgICBDb2x1bW5GaWx0ZXJJRCA9ICQodGhpcykuYXR0cignSUQnKTsKCiAgICAgICAgLy8gZ2V0IGFsbCBjb2x1bW4gZmlsdGVycwogICAgICAgICQoJy5Db2x1bW5GaWx0ZXInKS5lYWNoKGZ1bmN0aW9uKCl7CiAgICAgICAgICAgIENvbHVtbkZpbHRlck5hbWUgID0gJCh0aGlzKS5hdHRyKCduYW1lJyk7CgogICAgICAgICAgICAvLyBleGNsdWRlIGN1cnJlbnQgY29sdW1uIGZpbHRlciwgYXBwYXJlbnRseSB0aGUgc2VsZWN0ZWQgb3B0aW9uIGlzIG5vdCBzZXQgdG8KICAgICAgICAgICAgLy8gc2VsZWN0ZWQgYXQgdGhpcyBwb2ludCBhbmQgdXNlcyB0aGUgb2xkIHZhbHVlCiAgICAgICAgICAgIGlmICgkKHRoaXMpLmF0dHIoJ0lEJykgIT09IENvbHVtbkZpbHRlcklEKSB7CgogICAgICAgICAgICAgICAgLy8gZ2V0IGFsbCBvcHRpb25zIG9mIGN1cnJlbnQgY29sdW1uIGZpbHRlcgogICAgICAgICAgICAgICAgJCh0aGlzKS5jaGlsZHJlbigpLmVhY2goIGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgIGlmICggJCh0aGlzKS5hdHRyKCd2YWx1ZScpICYmICQodGhpcykuYXR0cignc2VsZWN0ZWQnKSApIHsKICAgICAgICAgICAgICAgICAgICAgICAgTGlua1BhZ2UgPSBMaW5rUGFnZSArIENvbHVtbkZpbHRlck5hbWUgKyAnPScgKyAkKHRoaXMpLmF0dHIoJ3ZhbHVlJykgKyAnOyc7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICB9KTsKCiAgICAgICAgJCgnI0Rhc2hib2FyZCRRRGF0YXsiTmFtZSJ9LWJveCcpLmFkZENsYXNzKCdMb2FkaW5nJyk7CiAgICAgICAgQ29yZS5BSkFYLkNvbnRlbnRVcGRhdGUoJCgnI0Rhc2hib2FyZCRRRGF0YXsiTmFtZSJ9JyksICckRW52eyJCYXNlbGluayJ9QWN0aW9uPSRFbnZ7IkFjdGlvbiJ9O1N1YmFjdGlvbj1FbGVtZW50O05hbWU9JFFEYXRheyJOYW1lIn07RmlsdGVyPScgKyBGaWx0ZXIgKyAnO0N1c3RvbWVySUQ9JyArIEN1c3RvbWVySUQgKyc7U29ydEJ5PSRRRGF0YXsiSGVhZGVyQ29sdW1uTmFtZSJ9O09yZGVyQnk9JFFEYXRheyJPcmRlckJ5In07JyArIExpbmtQYWdlLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIENvcmUuVUkuVGFibGUuSW5pdENTU1BzZXVkb0NsYXNzZXMoJCgnI0Rhc2hib2FyZCRRRGF0YXsiTmFtZSJ9JykpOwogICAgICAgICAgICAkKCcjRGFzaGJvYXJkJFFEYXRheyJOYW1lIn0tYm94JykucmVtb3ZlQ2xhc3MoJ0xvYWRpbmcnKTsKICAgICAgICB9KTsKICAgICAgICBFdmVudC5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgIHJldHVybiBmYWxzZTsKICAgIH0pOwovL11dPjwvc2NyaXB0Pgo8IS0tIGR0bDpqc19vbl9kb2N1bWVudF9jb21wbGV0ZSAtLT4KCjwhLS0gZHRsOmJsb2NrOkNvbnRlbnRMYXJnZVRpY2tldEdlbmVyaWNIZWFkZXJDb2x1bW5MaW5rIC0tPgoKPCEtLSBkdGw6YmxvY2s6Q29udGVudExhcmdlVGlja2V0R2VuZXJpY0hlYWRlckNvbHVtbkZpbHRlciAtLT4KICAgICAgICAgICAgICAgICAgICA8YSBocmVmPSIjIiBjbGFzcz0iQ29sdW1uU2V0dGluZ3NUcmlnZ2VyIiB0aXRsZT0iJERhdGF7IkZpbHRlclRpdGxlIn0iPgogICAgICAgICAgICAgICAgICAgICAgICA8aSBjbGFzcz0iaWNvbi1maWx0ZXIiPjwvaT4KICAgICAgICAgICAgICAgICAgICA8L2E+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iQ29sdW1uU2V0dGluZ3NDb250YWluZXIiPgogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJDb2x1bW5TZXR0aW5nc0JveCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkRGF0YXsiQ29sdW1uRmlsdGVyU3RyZyJ9CjwhLS0gZHRsOmJsb2NrOkNvbnRlbnRMYXJnZVRpY2tldEdlbmVyaWNIZWFkZXJDb2x1bW5GaWx0ZXJMaW5rQ3VzdG9tZXJVc2VyU2VhcmNoIC0tPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9InRleHQiIGNsYXNzPSJDdXN0b21lclVzZXJBdXRvQ29tcGxldGUiIGF1dG9jb21wbGV0ZT0ib2ZmIiAvPgo8IS0tIGR0bDpqc19vbl9kb2N1bWVudF9jb21wbGV0ZSAtLT4KPHNjcmlwdCB0eXBlPSJ0ZXh0L2phdmFzY3JpcHQiPi8vPCFbQ0RBVEFbCkNvcmUuQ29uZmlnLlNldCgnQ3VzdG9tZXJVc2VyQXV0b2NvbXBsZXRlLlF1ZXJ5RGVsYXknLCAiJFFEYXRheyJxdWVyeURlbGF5In0iKTsKQ29yZS5Db25maWcuU2V0KCdDdXN0b21lclVzZXJBdXRvY29tcGxldGUuTWF4UmVzdWx0c0Rpc3BsYXllZCcsICIkUURhdGF7Im1heFJlc3VsdHNEaXNwbGF5ZWQifSIpOwpDb3JlLkNvbmZpZy5TZXQoJ0N1c3RvbWVyVXNlckF1dG9jb21wbGV0ZS5NaW5RdWVyeUxlbmd0aCcsICIkUURhdGF7Im1pblF1ZXJ5TGVuZ3RoIn0iKTsKQ29yZS5BZ2VudC5EYXNoYm9hcmQuSW5pdEN1c3RvbWVyVXNlckF1dG9jb21wbGV0ZSggJCgiLkN1c3RvbWVyVXNlckF1dG9Db21wbGV0ZSIpICk7Ci8vXV0+PC9zY3JpcHQ+CjwhLS0gZHRsOmpzX29uX2RvY3VtZW50X2NvbXBsZXRlIC0tPgo8IS0tIGR0bDpibG9jazpDb250ZW50TGFyZ2VUaWNrZXRHZW5lcmljSGVhZGVyQ29sdW1uRmlsdGVyTGlua0N1c3RvbWVyVXNlclNlYXJjaCAtLT4KICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgPC9kaXY+Cgo8IS0tIGR0bDpqc19vbl9kb2N1bWVudF9jb21wbGV0ZSAtLT4KPHNjcmlwdCB0eXBlPSJ0ZXh0L2phdmFzY3JpcHQiPi8vPCFbQ0RBVEFbCiAgICAkKCcjQ29sdW1uRmlsdGVyJFFEYXRheyJIZWFkZXJDb2x1bW5OYW1lIn0kUURhdGF7Ik5hbWUifScpLnVuYmluZCgnY2hhbmdlJykuYmluZCgnY2hhbmdlJywgZnVuY3Rpb24oKXsKICAgICAgICB2YXIgTGlua1BhZ2UsIENvbHVtbkZpbHRlck5hbWUsIEZpbHRlciwgQ29sdW1uRmlsdGVySUQsIEN1c3RvbWVySUQ7CgogICAgICAgIExpbmtQYWdlID0gJyc7CiAgICAgICAgRmlsdGVyICAgPSAkKCcjRmlsdGVyJFFEYXRheyJOYW1lIn0nKS52YWwoKSB8fCAnQWxsJzsKICAgICAgICBDdXN0b21lcklEID0gJCgnaW5wdXRbbmFtZT1DdXN0b21lcklEXScpLnZhbCgpIHx8ICcnOwoKICAgICAgICAvLyBzZXQgQ29sdW1uRmlsdGVyIHZhbHVlIGZvciBjdXJyZW50IENvbHVtbkZpbHRlcgogICAgICAgIENvbHVtbkZpbHRlck5hbWUgPSAkKHRoaXMpLmF0dHIoJ25hbWUnKTsKICAgICAgICBMaW5rUGFnZSA9IExpbmtQYWdlICsgQ29sdW1uRmlsdGVyTmFtZSArICc9JyArICQodGhpcykudmFsKCkgKyAnOyc7CgogICAgICAgIC8vIHJlbWVtYmVyIHRoZSBjdXJyZW50IENvbHVtbkZpbHRlciBJRAogICAgICAgIENvbHVtbkZpbHRlcklEID0gJCh0aGlzKS5hdHRyKCdJRCcpOwoKICAgICAgICAvLyBnZXQgYWxsIGNvbHVtbiBmaWx0ZXJzCiAgICAgICAgJCgnLkNvbHVtbkZpbHRlcicpLmVhY2goZnVuY3Rpb24oKXsKICAgICAgICAgICAgQ29sdW1uRmlsdGVyTmFtZSAgPSAkKHRoaXMpLmF0dHIoJ25hbWUnKTsKCiAgICAgICAgICAgIC8vIGV4Y2x1ZGUgY3VycmVudCBjb2x1bW4gZmlsdGVyLCBhcHBhcmVudGx5IHRoZSBzZWxlY3RlZCBvcHRpb24gaXMgbm90IHNldCB0bwogICAgICAgICAgICAvLyBzZWxlY3RlZCBhdCB0aGlzIHBvaW50IGFuZCB1c2VzIHRoZSBvbGQgdmFsdWUKICAgICAgICAgICAgaWYgKCQodGhpcykuYXR0cignSUQnKSAhPT0gQ29sdW1uRmlsdGVySUQpIHsKCiAgICAgICAgICAgICAgICAvLyBnZXQgYWxsIG9wdGlvbnMgb2YgY3VycmVudCBjb2x1bW4gZmlsdGVyCiAgICAgICAgICAgICAgICAkKHRoaXMpLmNoaWxkcmVuKCkuZWFjaCggZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKCAkKHRoaXMpLmF0dHIoJ3ZhbHVlJykgJiYgJCh0aGlzKS5hdHRyKCdzZWxlY3RlZCcpICkgewogICAgICAgICAgICAgICAgICAgICAgICBMaW5rUGFnZSA9IExpbmtQYWdlICsgQ29sdW1uRmlsdGVyTmFtZSArICc9JyArICQodGhpcykuYXR0cigndmFsdWUnKSArICc7JzsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgIH0pOwoKICAgICAgICAkKCcjRGFzaGJvYXJkJFFEYXRheyJOYW1lIn0tYm94JykuYWRkQ2xhc3MoJ0xvYWRpbmcnKTsKICAgICAgICBDb3JlLkFKQVguQ29udGVudFVwZGF0ZSgkKCcjRGFzaGJvYXJkJFFEYXRheyJOYW1lIn0nKSwgJyRFbnZ7IkJhc2VsaW5rIn1BY3Rpb249JEVudnsiQWN0aW9uIn07U3ViYWN0aW9uPUVsZW1lbnQ7TmFtZT0kUURhdGF7Ik5hbWUifTtGaWx0ZXI9JyArIEZpbHRlciArICc7Q3VzdG9tZXJJRD0nICsgQ3VzdG9tZXJJRCArICc7U29ydEJ5PSRRRGF0YXsiU29ydEJ5In07T3JkZXJCeT0kUURhdGF7Ik9yZGVyQnkifTsnICsgTGlua1BhZ2UsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgQ29yZS5VSS5UYWJsZS5Jbml0Q1NTUHNldWRvQ2xhc3NlcygkKCcjRGFzaGJvYXJkJFFEYXRheyJOYW1lIn0nKSk7CiAgICAgICAgICAgICQoJyNEYXNoYm9hcmQkUURhdGF7Ik5hbWUifS1ib3gnKS5yZW1vdmVDbGFzcygnTG9hZGluZycpOwogICAgICAgIH0pOwogICAgICAgIHJldHVybiBmYWxzZTsKICAgIH0pOwovL11dPjwvc2NyaXB0Pgo8IS0tIGR0bDpqc19vbl9kb2N1bWVudF9jb21wbGV0ZSAtLT4KICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz0iR3JheSIgdGl0bGU9IiREYXRheyJUaXRsZSJ9IiA+JFFEYXRheyJIZWFkZXJOYW1lVHJhbnNsYXRlZCJ9PC9zcGFuPgo8IS0tIGR0bDpibG9jazpDb250ZW50TGFyZ2VUaWNrZXRHZW5lcmljSGVhZGVyQ29sdW1uRmlsdGVyIC0tPgoKPCEtLSBkdGw6YmxvY2s6Q29udGVudExhcmdlVGlja2V0R2VuZXJpY0hlYWRlckNvbHVtbkVtcHR5IC0tPgogICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJHcmF5IiB0aXRsZT0iJERhdGF7IlRpdGxlIn0iID4kRGF0YXsiSGVhZGVyTmFtZVRyYW5zbGF0ZWQifTwvc3Bhbj4KPCEtLSBkdGw6YmxvY2s6Q29udGVudExhcmdlVGlja2V0R2VuZXJpY0hlYWRlckNvbHVtbkVtcHR5IC0tPgogICAgICAgICAgICAgICAgPC90aD4KPCEtLSBkdGw6YmxvY2s6Q29udGVudExhcmdlVGlja2V0R2VuZXJpY0hlYWRlckNvbHVtbiAtLT4KPCEtLSBkdGw6YmxvY2s6Q29udGVudExhcmdlVGlja2V0R2VuZXJpY0hlYWRlclRpY2tldEhlYWRlciAtLT4KCjwhLS0gZHRsOmJsb2NrOkdlbmVyYWxPdmVydmlld0hlYWRlciAtLT4KCiAgICAgICAgICAgIDwvdHI+Cgo8IS0tIGR0bDpqc19vbl9kb2N1bWVudF9jb21wbGV0ZSAtLT4KPHNjcmlwdCB0eXBlPSJ0ZXh0L2phdmFzY3JpcHQiPi8vPCFbQ0RBVEFbCiQoJy5EYXNoYm9hcmRIZWFkZXInKS5vZmYoJ2NsaWNrJykub24oJ2NsaWNrJywgJy5Db2x1bW5TZXR0aW5nc1RyaWdnZXInLCBmdW5jdGlvbigpIHsKCiAgICB2YXIgJFRyaWdnZXJPYmogPSAkKHRoaXMpLAogICAgICAgIEZpbHRlck5hbWU7CgogICAgaWYgKCRUcmlnZ2VyT2JqLmhhc0NsYXNzKCdBY3RpdmUnKSkgewoKICAgICAgICAkVHJpZ2dlck9iagogICAgICAgICAgICAubmV4dCgnLkNvbHVtblNldHRpbmdzQ29udGFpbmVyJykKICAgICAgICAgICAgLmZpbmQoJy5Db2x1bW5TZXR0aW5nc0JveCcpCiAgICAgICAgICAgIC5mYWRlT3V0KCdmYXN0JywgZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAkVHJpZ2dlck9iai5yZW1vdmVDbGFzcygnQWN0aXZlJyk7CiAgICAgICAgICAgIH0pOwogICAgfQogICAgZWxzZSB7CgogICAgICAgIC8vIHNsaWRlIHVwIGFsbCBvcGVuIHNldHRpbmdzIHdpZGdldHMKICAgICAgICAkKCcuQ29sdW1uU2V0dGluZ3NUcmlnZ2VyJykKICAgICAgICAgICAgLm5leHQoJy5Db2x1bW5TZXR0aW5nc0NvbnRhaW5lcicpCiAgICAgICAgICAgIC5maW5kKCcuQ29sdW1uU2V0dGluZ3NCb3gnKQogICAgICAgICAgICAuZmFkZU91dCgnZmFzdCcsIGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgJCh0aGlzKS5wYXJlbnQoKS5wcmV2KCcuQ29sdW1uU2V0dGluZ3NUcmlnZ2VyJykucmVtb3ZlQ2xhc3MoJ0FjdGl2ZScpOwogICAgICAgICAgICB9KTsKCiAgICAgICAgLy8gc2hvdyBUSElTIHNldHRpbmdzIHdpZGdldAogICAgICAgICRUcmlnZ2VyT2JqCiAgICAgICAgICAgIC5uZXh0KCcuQ29sdW1uU2V0dGluZ3NDb250YWluZXInKQogICAgICAgICAgICAuZmluZCgnLkNvbHVtblNldHRpbmdzQm94JykKICAgICAgICAgICAgLmZhZGVJbignZmFzdCcsIGZ1bmN0aW9uKCkgewoKICAgICAgICAgICAgICAgICRUcmlnZ2VyT2JqLmFkZENsYXNzKCdBY3RpdmUnKTsKCiAgICAgICAgICAgICAgICAvLyByZWZyZXNoIGZpbHRlciBkcm9wZG93bgogICAgICAgICAgICAgICAgRmlsdGVyTmFtZSA9ICRUcmlnZ2VyT2JqCiAgICAgICAgICAgICAgICAgICAgLm5leHQoJy5Db2x1bW5TZXR0aW5nc0NvbnRhaW5lcicpCiAgICAgICAgICAgICAgICAgICAgLmZpbmQoJ3NlbGVjdCcpCiAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ25hbWUnKTsKCiAgICAgICAgICAgICAgICBpZiAoICRUcmlnZ2VyT2JqLmNsb3Nlc3QoJ3RoJykuaGFzQ2xhc3MoJ0N1c3RvbWVySUQnKSB8fCAkVHJpZ2dlck9iai5jbG9zZXN0KCd0aCcpLmhhc0NsYXNzKCdDdXN0b21lclVzZXJJRCcpIHx8ICRUcmlnZ2VyT2JqLmNsb3Nlc3QoJ3RoJykuaGFzQ2xhc3MoJ1Jlc3BvbnNpYmxlJykgfHwgJFRyaWdnZXJPYmouY2xvc2VzdCgndGgnKS5oYXNDbGFzcygnT3duZXInKSApIHsKCiAgICAgICAgICAgICAgICAgICAgaWYgKCEkVHJpZ2dlck9iai5wYXJlbnQoKS5maW5kKCcuU2VsZWN0ZWRWYWx1ZScpLmxlbmd0aCkgewogICAgICAgICAgICAgICAgICAgICAgICBDb3JlLkFKQVguRm9ybVVwZGF0ZSgkVHJpZ2dlck9iai5wYXJlbnRzKCdmb3JtJyksICdBSkFYRmlsdGVyVXBkYXRlJywgRmlsdGVyTmFtZSwgWyBGaWx0ZXJOYW1lIF0sIGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIEF1dG9Db21wbGV0ZVZhbHVlID0gJFRyaWdnZXJPYmoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLm5leHQoJy5Db2x1bW5TZXR0aW5nc0NvbnRhaW5lcicpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5maW5kKCdzZWxlY3QnKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAudmFsKCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXV0b0NvbXBsZXRlVGV4dCAgPSAkVHJpZ2dlck9iagogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAubmV4dCgnLkNvbHVtblNldHRpbmdzQ29udGFpbmVyJykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmZpbmQoJ3NlbGVjdCcpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5maW5kKCdvcHRpb246c2VsZWN0ZWQnKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAudGV4dCgpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChBdXRvQ29tcGxldGVWYWx1ZSAhPT0gJ0RlbGV0ZUZpbHRlcicpIHsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJFRyaWdnZXJPYmoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLm5leHQoJy5Db2x1bW5TZXR0aW5nc0NvbnRhaW5lcicpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5maW5kKCdzZWxlY3QnKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYWZ0ZXIoJzxzcGFuIGNsYXNzPSJTZWxlY3RlZFZhbHVlIEhpZGRlbiI+PGEgaHJlZj0iIyI+eDwvYT48c3BhbiB0aXRsZT0iJyArIEF1dG9Db21wbGV0ZVRleHQgKyAnICgnICsgQXV0b0NvbXBsZXRlVmFsdWUgKyAnKSI+JyArIEF1dG9Db21wbGV0ZVRleHQgKyAnICgnICsgQXV0b0NvbXBsZXRlVmFsdWUgKyAnKTwvc3Bhbj48L3NwYW4+JykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnBhcmVudCgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5maW5kKCcuU2VsZWN0ZWRWYWx1ZScpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5maW5kKCdhJykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLm9mZigpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5vbignY2xpY2snLCBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICQodGhpcykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuY2xvc2VzdCgnLkNvbHVtblNldHRpbmdzQ29udGFpbmVyJykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZmluZCgnc2VsZWN0JykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAudmFsKCdEZWxldGVGaWx0ZXInKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50cmlnZ2VyKCdjaGFuZ2UnKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBDb3JlLkFKQVguRm9ybVVwZGF0ZSgkVHJpZ2dlck9iai5wYXJlbnRzKCdmb3JtJyksICdBSkFYRmlsdGVyVXBkYXRlJywgRmlsdGVyTmFtZSwgWyBGaWx0ZXJOYW1lIF0pOwogICAgICAgICAgICAgICAgfQogICAgICAgIH0pOwogICAgfQoKICAgIHJldHVybiBmYWxzZTsKfSk7CgovL11dPjwvc2NyaXB0Pgo8IS0tIGR0bDpqc19vbl9kb2N1bWVudF9jb21wbGV0ZSAtLT4KCjwhLS0gZHRsOmJsb2NrOkNvbnRlbnRMYXJnZVRpY2tldEdlbmVyaWNIZWFkZXIgLS0+CiAgICAgICAgPC90aGVhZD4KCiAgICAgICAgPHRib2R5Pgo8IS0tIGR0bDpibG9jazpDb250ZW50TGFyZ2VUaWNrZXRHZW5lcmljUm93IC0tPgogICAgICAgICAgICA8dHIgY2xhc3M9Ik1hc3RlckFjdGlvbiI+Cgo8IS0tIGR0bDpibG9jazpHZW5lcmFsT3ZlcnZpZXdSb3cgLS0+Cgo8IS0tIGR0bDpibG9jazpDb250ZW50TGFyZ2VUaWNrZXRHZW5lcmljUm93TWV0YSAtLT4KICAgICAgICAgICAgICAgIDx0ZCBjbGFzcz0iJFFEYXRheyJDbGFzc1RhYmxlIn0gRmxhZ3MiIHRpdGxlPSIkVGV4dHsiJERhdGF7IlRpdGxlIn0ifSI+CjwhLS0gZHRsOmJsb2NrOkNvbnRlbnRMYXJnZVRpY2tldEdlbmVyaWNSb3dNZXRhSW1hZ2UgLS0+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iJFFEYXRheyJDbGFzcyJ9IFNtYWxsIiB0aXRsZT0iJFRleHR7IiREYXRheyJUaXRsZSJ9In0iPgogICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz0iJFFEYXRheyJDbGFzc1NwYW4ifSI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aSBjbGFzcz0iaWNvbi1zdGFyIj48L2k+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aSBjbGFzcz0iaWNvbi1zdGFyIj48L2k+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZW0+JFRleHR7IiREYXRheyJUaXRsZSJ9In08L2VtPgogICAgICAgICAgICAgICAgICAgICAgICA8L3NwYW4+CiAgICAgICAgICAgICAgICAgICAgPC9kaXY+CjwhLS0gZHRsOmJsb2NrOkNvbnRlbnRMYXJnZVRpY2tldEdlbmVyaWNSb3dNZXRhSW1hZ2UgLS0+CiAgICAgICAgICAgICAgICA8L3RkPgo8IS0tIGR0bDpibG9jazpDb250ZW50TGFyZ2VUaWNrZXRHZW5lcmljUm93TWV0YSAtLT4KCiMgICAgICAgICAgICA8dGQgY2xhc3M9IlcxMHBjIj4KIyAgICAgICAgICAgICAgICA8YSBocmVmPSIkRW52eyJCYXNlbGluayJ9QWN0aW9uPUFnZW50VGlja2V0Wm9vbTtUaWNrZXRJRD0kRGF0YXsiVGlja2V0SUQifSIgdGl0bGU9IiRRRGF0YXsiVGl0bGUifSIgY2xhc3M9IkFzQmxvY2sgTWFzdGVyQWN0aW9uTGluayI+JERhdGF7IlRpY2tldE51bWJlciJ9PC9hPgojICAgICAgICAgICAgPC90ZD4KIyAgICAgICAgICAgIDx0ZCBjbGFzcz0iVzUwcGMiPgojICAgICAgICAgICAgICAgIDxkaXYgdGl0bGU9IiRRRGF0YXsiVGl0bGUifSI+JFFEYXRheyJUaXRsZSIsIjcwIn08L2Rpdj4KIyAgICAgICAgICAgIDwvdGQ+CiMgICAgICAgICAgICA8dGQ+JFFEYXRheyJUaW1lIn08L3RkPgoKPCEtLSBkdGw6YmxvY2s6Q29udGVudExhcmdlVGlja2V0R2VuZXJpY1RpY2tldENvbHVtbiAtLT4KPCEtLSBkdGw6YmxvY2s6Q29udGVudExhcmdlVGlja2V0R2VuZXJpY1RpY2tldE51bWJlciAtLT4KICAgICAgICAgICAgICAgIDx0ZD4KICAgICAgICAgICAgICAgICAgICA8YSBocmVmPSIkRW52eyJCYXNlbGluayJ9QWN0aW9uPUFnZW50VGlja2V0Wm9vbTtUaWNrZXRJRD0kRGF0YXsiVGlja2V0SUQifSIgdGl0bGU9IiRRRGF0YXsiVGl0bGUifSIgY2xhc3M9IkFzQmxvY2sgTWFzdGVyQWN0aW9uTGluayI+JERhdGF7IlRpY2tldE51bWJlciJ9PC9hPgogICAgICAgICAgICAgICAgPC90ZD4KPCEtLSBkdGw6YmxvY2s6Q29udGVudExhcmdlVGlja2V0R2VuZXJpY1RpY2tldE51bWJlciAtLT4KPCEtLSBkdGw6YmxvY2s6Q29udGVudExhcmdlVGlja2V0R2VuZXJpY0VzY2FsYXRpb25UaW1lIC0tPgogICAgICAgICAgICAgICAgPHRkPgogICAgICAgICAgICAgICAgICAgIDxkaXYgdGl0bGU9IiRUZXh0eyJTZXJ2aWNlIFRpbWUifTogJFFEYXRheyJFc2NhbGF0aW9uVGltZVdvcmtpbmdUaW1lIn0gLSAkVGltZVNob3J0eyIkUURhdGF7IkVzY2FsYXRpb25EZXN0aW5hdGlvbkRhdGUifSJ9IiBjbGFzcz0iJFFEYXRheyJFc2NhbGF0aW9uQ2xhc3MifSI+JFFEYXRheyJFc2NhbGF0aW9uVGltZUh1bWFuIn08YnIvPiRUaW1lU2hvcnR7IiRRRGF0YXsiVXBkYXRlVGltZURlc3RpbmF0aW9uRGF0ZSJ9In08L2Rpdj4KICAgICAgICAgICAgICAgIDwvdGQ+CjwhLS0gZHRsOmJsb2NrOkNvbnRlbnRMYXJnZVRpY2tldEdlbmVyaWNFc2NhbGF0aW9uVGltZSAtLT4KPCEtLSBkdGw6YmxvY2s6Q29udGVudExhcmdlVGlja2V0R2VuZXJpY0NvbHVtbiAtLT4KICAgICAgICAgICAgICAgIDx0ZD4KICAgICAgICAgICAgICAgICAgICA8ZGl2IHRpdGxlPSIkUURhdGF7IkdlbmVyaWNWYWx1ZSJ9Ij4kUURhdGF7IkdlbmVyaWNWYWx1ZSIsIjc4In08L2Rpdj4KICAgICAgICAgICAgICAgIDwvdGQ+CjwhLS0gZHRsOmJsb2NrOkNvbnRlbnRMYXJnZVRpY2tldEdlbmVyaWNDb2x1bW4gLS0+CjwhLS0gZHRsOmJsb2NrOkNvbnRlbnRMYXJnZVRpY2tldEdlbmVyaWNDb2x1bW5UcmFuc2xhdGFibGUgLS0+CiAgICAgICAgICAgICAgICA8dGQ+CiAgICAgICAgICAgICAgICAgICAgPGRpdiB0aXRsZT0iJFRleHR7IiREYXRheyJHZW5lcmljVmFsdWUifSJ9Ij4kVGV4dHsiJERhdGF7IkdlbmVyaWNWYWx1ZSJ9In08L2Rpdj4KICAgICAgICAgICAgICAgIDwvdGQ+CjwhLS0gZHRsOmJsb2NrOkNvbnRlbnRMYXJnZVRpY2tldEdlbmVyaWNDb2x1bW5UcmFuc2xhdGFibGUgLS0+CjwhLS0gZHRsOmJsb2NrOkNvbnRlbnRMYXJnZVRpY2tldEdlbmVyaWNDb2x1bW5UaW1lIC0tPgogICAgICAgICAgICAgICAgPHRkPgogICAgICAgICAgICAgICAgICAgIDxkaXYgdGl0bGU9IiRUaW1lU2hvcnR7IiRRRGF0YXsiR2VuZXJpY1ZhbHVlIn0ifSI+JFRpbWVTaG9ydHsiJERhdGF7IkdlbmVyaWNWYWx1ZSJ9In08L2Rpdj4KICAgICAgICAgICAgICAgIDwvdGQ+CjwhLS0gZHRsOmJsb2NrOkNvbnRlbnRMYXJnZVRpY2tldEdlbmVyaWNDb2x1bW5UaW1lIC0tPgo8IS0tIGR0bDpibG9jazpDb250ZW50TGFyZ2VUaWNrZXRHZW5lcmljQ29sdW1uRXNjYWxhdGlvbiAtLT4KICAgICAgICAgICAgICAgIDx0ZD4KICAgICAgICAgICAgICAgICAgICA8ZGl2IHRpdGxlPSIkUURhdGF7IkdlbmVyaWNWYWx1ZSJ9IiBjbGFzcz0iJFFEYXRheyJDbGFzcyJ9Ij4kUURhdGF7IkdlbmVyaWNWYWx1ZSJ9PC9kaXY+CiAgICAgICAgICAgICAgICA8L3RkPgo8IS0tIGR0bDpibG9jazpDb250ZW50TGFyZ2VUaWNrZXRHZW5lcmljQ29sdW1uRXNjYWxhdGlvbiAtLT4KPCEtLSBkdGw6YmxvY2s6Q29udGVudExhcmdlVGlja2V0R2VuZXJpY1RpY2tldENvbHVtbiAtLT4KCjwhLS0gZHRsOmJsb2NrOkNvbnRlbnRMYXJnZVRpY2tldEdlbmVyaWNEeW5hbWljRmllbGQgLS0+CiAgICAgICAgICAgICAgICA8dGQ+CiAgICAgICAgICAgICAgICAgICAgPGRpdiB0aXRsZT0iJFFEYXRheyJUaXRsZSJ9Ij4KPCEtLSBkdGw6YmxvY2s6Q29udGVudExhcmdlVGlja2V0R2VuZXJpY0R5bmFtaWNGaWVsZExpbmsgLS0+CiAgICAgICAgICAgICAgICAgICAgICAgIDxhIGhyZWY9IiREYXRheyJMaW5rIn0iICB0YXJnZXQ9Il9ibGFuayIgY2xhc3M9IkR5bmFtaWNGaWVsZExpbmsiPiREYXRheyJWYWx1ZSJ9PC9hPgo8IS0tIGR0bDpibG9jazpDb250ZW50TGFyZ2VUaWNrZXRHZW5lcmljRHluYW1pY0ZpZWxkTGluayAtLT4KPCEtLSBkdGw6YmxvY2s6Q29udGVudExhcmdlVGlja2V0R2VuZXJpY0R5bmFtaWNGaWVsZFBsYWluIC0tPgogICAgICAgICAgICAgICAgICAgICAgICAkRGF0YXsiVmFsdWUifQo8IS0tIGR0bDpibG9jazpDb250ZW50TGFyZ2VUaWNrZXRHZW5lcmljRHluYW1pY0ZpZWxkUGxhaW4gLS0+CiAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICA8L3RkPgo8IS0tIGR0bDpibG9jazpDb250ZW50TGFyZ2VUaWNrZXRHZW5lcmljRHluYW1pY0ZpZWxkIC0tPgoKPCEtLSBkdGw6YmxvY2s6R2VuZXJhbE92ZXJ2aWV3Um93IC0tPgoKICAgICAgICAgICAgPC90cj4KPCEtLSBkdGw6YmxvY2s6Q29udGVudExhcmdlVGlja2V0R2VuZXJpY1JvdyAtLT4KPCEtLSBkdGw6YmxvY2s6Q29udGVudExhcmdlVGlja2V0R2VuZXJpY05vbmUgLS0+CiAgICAgICAgICAgIDx0cj4KICAgICAgICAgICAgICAgIDx0ZCBjbGFzcz0iQXV0b0NvbHNwYW4iPgogICAgICAgICAgICAgICAgICAgICRUZXh0eyJub25lIn0KICAgICAgICAgICAgICAgIDwvdGQ+CiAgICAgICAgICAgIDwvdHI+CjwhLS0gZHRsOmpzX29uX2RvY3VtZW50X2NvbXBsZXRlIC0tPgo8c2NyaXB0IHR5cGU9InRleHQvamF2YXNjcmlwdCI+Ly88IVtDREFUQVsKJCgnLkF1dG9Db2xzcGFuJykuZWFjaChmdW5jdGlvbigpIHsKICAgIHZhciBDb2xzcGFuQ291bnQgPSAkKHRoaXMpLmNsb3Nlc3QoJ3RhYmxlJykuZmluZCgndGgnKS5sZW5ndGg7CiAgICAkKHRoaXMpLmF0dHIoJ2NvbHNwYW4nLCBDb2xzcGFuQ291bnQpOwp9KTsKLy9dXT48L3NjcmlwdD4KPCEtLSBkdGw6anNfb25fZG9jdW1lbnRfY29tcGxldGUgLS0+Cgo8IS0tIGR0bDpibG9jazpDb250ZW50TGFyZ2VUaWNrZXRHZW5lcmljTm9uZSAtLT4KICAgICAgICA8L3Rib2R5PgogICAgPC90YWJsZT4KPC9mb3JtPgoKPCEtLSBkdGw6YmxvY2s6Q29udGVudExhcmdlVGlja2V0R2VuZXJpY1JlZnJlc2ggLS0+CjwhLS0gZHRsOmpzX29uX2RvY3VtZW50X2NvbXBsZXRlIC0tPgo8c2NyaXB0IHR5cGU9InRleHQvamF2YXNjcmlwdCI+Ly88IVtDREFUQVsKQ29yZS5Db25maWcuU2V0KCdSZWZyZXNoU2Vjb25kc18kUURhdGF7Ik5hbWVIVE1MIn0nLCBwYXJzZUludCgiJFFEYXRheyJSZWZyZXNoVGltZSJ9IiwgMTApIHx8IDApOwppZiAoQ29yZS5Db25maWcuR2V0KCdSZWZyZXNoU2Vjb25kc18kUURhdGF7Ik5hbWVIVE1MIn0nKSkgewogICAgQ29yZS5Db25maWcuU2V0KCdUaW1lcl8kUURhdGF7Ik5hbWVIVE1MIn0nLCB3aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbigpIHsKCiAgICAgICAgLy8gZ2V0IGFjdGl2ZSBmaWx0ZXIKICAgICAgICB2YXIgRmlsdGVyID0gJCgnI0Rhc2hib2FyZCRRRGF0YXsiTmFtZSJ9LWJveCcpLmZpbmQoJy5UYWIuQWN0aW9ucyBsaS5TZWxlY3RlZCBhJykuYXR0cignZGF0YS1maWx0ZXInKTsKICAgICAgICAkKCcjRGFzaGJvYXJkJFFEYXRheyJOYW1lIn0tYm94JykuYWRkQ2xhc3MoJ0xvYWRpbmcnKTsKICAgICAgICBDb3JlLkFKQVguQ29udGVudFVwZGF0ZSgkKCcjRGFzaGJvYXJkJFFEYXRheyJOYW1lIn0nKSwgJyRFbnZ7IkJhc2VsaW5rIn1BY3Rpb249JEVudnsiQWN0aW9uIn07U3ViYWN0aW9uPUVsZW1lbnQ7TmFtZT0kUURhdGF7Ik5hbWUifTtGaWx0ZXI9JyArIEZpbHRlciArICc7Q3VzdG9tZXJJRD0kUURhdGF7IkN1c3RvbWVySUQifScsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgQ29yZS5VSS5UYWJsZS5Jbml0Q1NTUHNldWRvQ2xhc3NlcygkKCcjRGFzaGJvYXJkJFFEYXRheyJOYW1lIn0nKSk7CiAgICAgICAgICAgICQoJyNEYXNoYm9hcmQkUURhdGF7Ik5hbWUifS1ib3gnKS5yZW1vdmVDbGFzcygnTG9hZGluZycpOwogICAgICAgIH0pOwogICAgICAgIGNsZWFyVGltZW91dChDb3JlLkNvbmZpZy5HZXQoJ1RpbWVyXyRRRGF0YXsiTmFtZUhUTUwifScpKTsKICAgIH0sIENvcmUuQ29uZmlnLkdldCgnUmVmcmVzaFNlY29uZHNfJFFEYXRheyJOYW1lSFRNTCJ9JykgKiAxMDAwKSk7Cn0KLy9dXT48L3NjcmlwdD4KPCEtLSBkdGw6anNfb25fZG9jdW1lbnRfY29tcGxldGUgLS0+CjwhLS0gZHRsOmJsb2NrOkNvbnRlbnRMYXJnZVRpY2tldEdlbmVyaWNSZWZyZXNoIC0tPgoKPCEtLSBkdGw6YmxvY2s6Q29udGVudExhcmdlVGlja2V0R2VuZXJpY1JlbW92ZUZpbHRlcnMgLS0+CjwhLS0gZHRsOmpzX29uX2RvY3VtZW50X2NvbXBsZXRlIC0tPgo8c2NyaXB0IHR5cGU9InRleHQvamF2YXNjcmlwdCI+Ly88IVtDREFUQVsKaWYgKCEkKCcjRGFzaGJvYXJkJFFEYXRheyJOYW1lIn0tYm94JykuZmluZCgnLkFjdGlvbk1lbnUnKS5maW5kKCcuUmVtb3ZlRmlsdGVycycpLmxlbmd0aCkgewogICAgJCgnI0Rhc2hib2FyZCRRRGF0YXsiTmFtZSJ9LWJveCcpCiAgICAgICAgLmZpbmQoJy5BY3Rpb25NZW51JykKICAgICAgICAucHJlcGVuZCgnPGRpdiBjbGFzcz0iV2lkZ2V0QWN0aW9uIFJlbW92ZUZpbHRlcnMiPjxhIGhyZWY9IiMiIGlkPSJEYXNoYm9hcmQkUURhdGF7Ik5hbWUifS1yZW1vdmUtZmlsdGVycyIgdGl0bGU9IiRUZXh0eyJSZW1vdmUgYWN0aXZlIGZpbHRlcnMgZm9yIHRoaXMgd2lkZ2V0LiJ9Ij48aSBjbGFzcz0iaWNvbi10cmFzaCI+PC9pPjwvYT48L2Rpdj4nKQogICAgICAgIC5maW5kKCcuUmVtb3ZlRmlsdGVycycpCiAgICAgICAgLm9uKCdjbGljaycsIGZ1bmN0aW9uKCkgewoKICAgICAgICAgICAgLy8gZ2V0IGFjdGl2ZSBmaWx0ZXIKICAgICAgICAgICAgdmFyIEZpbHRlciA9ICQoJyNEYXNoYm9hcmQkUURhdGF7Ik5hbWUifS1ib3gnKS5maW5kKCcuVGFiLkFjdGlvbnMgbGkuU2VsZWN0ZWQgYScpLmF0dHIoJ2RhdGEtZmlsdGVyJyk7CiAgICAgICAgICAgICQoJyNEYXNoYm9hcmQkUURhdGF7Ik5hbWUifS1ib3gnKS5hZGRDbGFzcygnTG9hZGluZycpOwogICAgICAgICAgICBDb3JlLkFKQVguQ29udGVudFVwZGF0ZSgkKCcjRGFzaGJvYXJkJFFEYXRheyJOYW1lIn0nKSwgJyRFbnZ7IkJhc2VsaW5rIn1BY3Rpb249JEVudnsiQWN0aW9uIn07U3ViYWN0aW9uPUVsZW1lbnQ7TmFtZT0kUURhdGF7Ik5hbWUifTtGaWx0ZXI9JyArIEZpbHRlciArICc7Q3VzdG9tZXJJRD0kUURhdGF7IkN1c3RvbWVySUQifTtSZW1vdmVGaWx0ZXJzPTEnLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICBDb3JlLlVJLlRhYmxlLkluaXRDU1NQc2V1ZG9DbGFzc2VzKCQoJyNEYXNoYm9hcmQkUURhdGF7Ik5hbWUifScpKTsKICAgICAgICAgICAgICAgICQoJyNEYXNoYm9hcmQkUURhdGF7Ik5hbWUifS1ib3gnKS5yZW1vdmVDbGFzcygnTG9hZGluZycpOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0pOwp9Ci8vXV0+PC9zY3JpcHQ+CjwhLS0gZHRsOmpzX29uX2RvY3VtZW50X2NvbXBsZXRlIC0tPgo8IS0tIGR0bDpibG9jazpDb250ZW50TGFyZ2VUaWNrZXRHZW5lcmljUmVtb3ZlRmlsdGVycyAtLT4KCjwhLS0gZHRsOmJsb2NrOkNvbnRlbnRMYXJnZVRpY2tldEdlbmVyaWNSZW1vdmVGaWx0ZXJzUmVtb3ZlIC0tPgo8IS0tIGR0bDpqc19vbl9kb2N1bWVudF9jb21wbGV0ZSAtLT4KPHNjcmlwdCB0eXBlPSJ0ZXh0L2phdmFzY3JpcHQiPi8vPCFbQ0RBVEFbCiQoJyNEYXNoYm9hcmQkUURhdGF7Ik5hbWUifS1ib3gnKS5maW5kKCcuUmVtb3ZlRmlsdGVycycpLnJlbW92ZSgpOwovL11dPjwvc2NyaXB0Pgo8IS0tIGR0bDpqc19vbl9kb2N1bWVudF9jb21wbGV0ZSAtLT4KPCEtLSBkdGw6YmxvY2s6Q29udGVudExhcmdlVGlja2V0R2VuZXJpY1JlbW92ZUZpbHRlcnNSZW1vdmUgLS0+Cgo8IS0tIGR0bDpqc19vbl9kb2N1bWVudF9jb21wbGV0ZSAtLT4KPHNjcmlwdCB0eXBlPSJ0ZXh0L2phdmFzY3JpcHQiPi8vPCFbQ0RBVEFbCiAgICAkKCcuTWFzdGVyQWN0aW9uJykuYmluZCgnY2xpY2snLCBmdW5jdGlvbiAoRXZlbnQpIHsKICAgICAgICB2YXIgJE1hc3RlckFjdGlvbkxpbmsgPSAkKHRoaXMpLmZpbmQoJy5NYXN0ZXJBY3Rpb25MaW5rJyk7CiAgICAgICAgLy8gcHJldmVudCBNYXN0ZXJBY3Rpb24gb24gRHluYW1pYyBGaWVsZHMgbGlua3MKICAgICAgICBpZiAoJChFdmVudC50YXJnZXQpLmhhc0NsYXNzKCdEeW5hbWljRmllbGRMaW5rJykpIHsKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfQogICAgICAgIC8vIG9ubHkgYWN0IGlmIHRoZSBsaW5rIHdhcyBub3QgY2xpY2tlZCBkaXJlY3RseQogICAgICAgIGlmIChFdmVudC50YXJnZXQgIT09ICRNYXN0ZXJBY3Rpb25MaW5rLmdldCgwKSkgewogICAgICAgICAgICB3aW5kb3cubG9jYXRpb24gPSAkTWFzdGVyQWN0aW9uTGluay5hdHRyKCdocmVmJyk7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CiAgICB9KTsKCiAgICAkKCcjRGFzaGJvYXJkJFFEYXRheyJOYW1lIn0tYm94JykuZmluZCgnLlRhYi5BY3Rpb25zIGxpIGEnKS51bmJpbmQoJ2NsaWNrJykuYmluZCgnY2xpY2snLCBmdW5jdGlvbigpIHsKICAgICAgICB2YXIgRmlsdGVyID0gJCh0aGlzKS5hdHRyKCdkYXRhLWZpbHRlcicpLAogICAgICAgIEN1c3RvbWVySUQ7CgogICAgICAgIEN1c3RvbWVySUQgPSAkKCdpbnB1dFtuYW1lPUN1c3RvbWVySURdJykudmFsKCkgfHwgJyc7CgogICAgICAgICQoJyNEYXNoYm9hcmQkUURhdGF7Ik5hbWUifS1ib3gnKS5hZGRDbGFzcygnTG9hZGluZycpOwogICAgICAgIENvcmUuQUpBWC5Db250ZW50VXBkYXRlKCQoJyNEYXNoYm9hcmQkUURhdGF7Ik5hbWUifScpLCAnJEVudnsiQmFzZWxpbmsifUFjdGlvbj0kRW52eyJBY3Rpb24ifTtTdWJhY3Rpb249RWxlbWVudDtOYW1lPSRRRGF0YXsiTmFtZSJ9O0ZpbHRlcj0nICsgRmlsdGVyICsgJztDdXN0b21lcklEPScgKyBDdXN0b21lcklELCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIENvcmUuVUkuVGFibGUuSW5pdENTU1BzZXVkb0NsYXNzZXMoJCgnI0Rhc2hib2FyZCRRRGF0YXsiTmFtZSJ9JykpOwogICAgICAgICAgICAkKCcjRGFzaGJvYXJkJFFEYXRheyJOYW1lIn0tYm94JykucmVtb3ZlQ2xhc3MoJ0xvYWRpbmcnKTsKICAgICAgICB9KTsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICB9KTsKLy9dXT48L3NjcmlwdD4KPCEtLSBkdGw6anNfb25fZG9jdW1lbnRfY29tcGxldGUgLS0+Cg==</File>
    </Filelist>
</otrs_package>